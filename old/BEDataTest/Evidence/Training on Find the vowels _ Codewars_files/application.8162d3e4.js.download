var Ds=Object.defineProperty,Is=Object.defineProperties;var Fs=Object.getOwnPropertyDescriptors;var ut=Object.getOwnPropertySymbols;var Rs=Object.prototype.hasOwnProperty,Ls=Object.prototype.propertyIsEnumerable;var Me=(t,e,s)=>e in t?Ds(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,O=(t,e)=>{for(var s in e||(e={}))Rs.call(e,s)&&Me(t,s,e[s]);if(ut)for(var s of ut(e))Ls.call(e,s)&&Me(t,s,e[s]);return t},te=(t,e)=>Is(t,Fs(e));var B=(t,e,s)=>(Me(t,typeof e!="symbol"?e+"":e,s),s);import{a as Ms,$ as a,C as v,n as Vs,d as Ns,b as Us,u as Ps,c as Hs,U as qs,e as zs,p as ht,m as ce,k as Ws,t as Bs,R as Ks,D as Gs,Q as Ys,f as d,T as g,g as Js,h as Ve,E as se,i as ie,s as M,S as Xs,w as Zs,j as m,l as Qs,o as ei,q as dt,r as ne,A as ti,v as si,x as ii}from"./vendor.be6714a4.js";Element.prototype.toggleAttribute||(Element.prototype.toggleAttribute=function(t,e){return e!==void 0&&(e=!!e),this.hasAttribute(t)?e?!0:(this.removeAttribute(t),!1):e===!1?!1:(this.setAttribute(t,""),!0)});const Ne={},Ue=t=>(Ne[t]||(Ne[t]=new ai(t)),Ne[t]);function Pe(t,e){try{const s=JSON.stringify(e);return s==="{}"?window.localStorage.removeItem(t):window.localStorage.setItem(t,s),!0}catch{return!1}}function ni(t){try{return JSON.parse(t)}catch{return console.log("Failed to process local stored JSON."),{}}}class ai{constructor(e){this.ns=e,this._=ni(window.localStorage.getItem(e)||"{}")}set(e,s){return this._[e]={value:s,e:0},Pe(this.ns,this._)||this.remove(e),s}get(e){return this._[e]?this._[e].value:void 0}remove(e){delete this._[e],Pe(this.ns,this._)}clear(){this._={},Pe(this.ns,this._)}isEmpty(){return Object.keys(this._||{}).length===0}}const K={client:null,registrations:{},status:"disconnected",connect({key:t,clientId:e,privateChannelName:s}){if(this.status==="disconnected"){if(this.status="connecting",this.client)this.client.connect();else if(e){this.client=new Ms.exports.Realtime({key:t,clientId:e}),this.client.connection.on("connected",()=>{this.status="connected",this.register("private","model_update",n=>{n.updates&&Object.keys(n.updates).forEach(r=>{a(`[data-rt='${n.id}:${r}']`).text(n.updates[r])})},{key:t,clientId:e,privateChannelName:s})});const i=()=>{this.disconnect()};this.client.connection.on("disconnected",i),this.client.connection.on("failed",i),this.client.connection.on("suspended",i)}}},disconnect(){this.status!=="disconnected"&&(this.client&&this.client.close(),this.status="disconnected"),this.client=null,this.registrations={}},register(t,e,s,{key:i,clientId:n,privateChannelName:r}){if(!this.client)return!1;const o=t==="private"?r:t,c=`/${o}/${e}`;if(this.registrations[c]||(this.registrations[c]=s,this.connect({key:i,clientId:n}),!this.client))return!1;const h=this.client.channels.get(o),f=x=>{s(x.data||x)};return h.subscribe(e,f),()=>{delete this.registrations[c],h.unsubscribe(e,f)}}},ae=(t,e={})=>{const s=t.split("."),i=s.length;return s.reduce((n,r,o)=>r==="App"&&o===0?n:(o<i-1&&!n[r]&&(n[r]={}),n[r]),e)},ri=()=>Math.random().toString(36).substr(2),oi=t=>{const e={};for(const[s,i]of new URL(t).searchParams.entries())if(s.endsWith("[]")){const n=s.slice(0,-2);e[n]||(e[n]=[]),e[n].push(i)}else e[s]=i;return e},ke=()=>oi(window.location.href),ue=t=>{window.history.replaceState(window.history.state,document.title,t)},li=t=>{window.history.pushState(window.history.state,document.title,t)},pt=t=>t[0].toUpperCase()+t.substr(1),ci=t=>t[0].toLowerCase()+t.substr(1),He=t=>ui(t,"-"),ui=(t,e)=>{const s=t.replace(/([A-Z])/g,i=>e+i.toLowerCase());return s.startsWith(e)?s.substr(1):s},hi=t=>t.replace(/([\\/'*+?|()\[\]{}.^$])/g,"\\$1"),di=t=>{const e=t.slice();let s=e.length,i,n;for(;s;)i=Math.random()*s|0,n=e[--s],e[s]=e[i],e[i]=n;return e},he=(t,e)=>{const s=di(t);return typeof e=="number"?s.slice(0,e):s[0]},pi=(t,e=null)=>{let s;return(...i)=>{s&&window.cancelAnimationFrame(s),s=window.requestAnimationFrame(()=>{t.call(e,...i)})}},qe=(t={})=>Object.keys(t).map(e=>{const s=t[e];if(!Array.isArray(s))return encodeURIComponent(e)+"="+encodeURIComponent(s);const i=[];for(let n=0;n<s.length;n++)i.push(encodeURIComponent(e+"[]")+"="+encodeURIComponent(s[n]));return i.join("&")}).filter(Boolean).join("&"),fi={escape_html(t){if(t.value)return(t.value+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescape_html(t){if(t.value)return(t.value+"").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&#39;/g,"'")},strip_scripts(t){if(t.value)return(t.value+"").replace(/<script.*?>[\s\S]*<\/script>/gi,"")},pluralize(t){const e=t.value===1?t.args[0]:t.args[1];return`${t.value} ${e}`},stringify(t){return JSON.stringify(t.value)},count(t){return re(t.value)},string(t){return t.value+""},"any?"(t){return re(t.value)>0},"many?"(t){return re(t.value)>1},"one?"(t){return re(t.value)===1},"none?"(t){return!t.value||re(t.value)===0},"zero?"(t){return re(t.value)===0},"contains?"(t){return t.value.indexOf(t.args[0])>=0},"false?"(t){return t.value===!1},"true?"(t){return t.value===!0},"null?"(t){return t.value===null},"el_is_active?"(t){return a(t.args[0]).is(".is-active")},disabled_class(t){if(t.value)return"is-disabled"},active_class(t){if(t.value)return"is-active"},hidden_class(t){if(t.value)return"is-hidden"},"current_user_is_admin?"(t){return t.currentUser.role==="admin"},"moderator?"(t){return t.currentUser.role==="admin"||t.currentUser.role==="moderator"},"guest_user?"(t){const e=t.currentUser;return!e.id||e.guest},"is_current_user?"(t){const e=t.currentUser;return e?t.value===e.id||t.value===e.username:!1},prepend(t){return t.args[0]+t.value},append(t){return t.value+t.args[0]},lt(t){return t.value<t.args[0]},gt(t){return t.value>t.args[0]},eq(t){return t.value===t.args[0]},ne(t){return t.value!==t.args[0]},in(t){return(t.args[0]||[]).indexOf(t.value)>=0},nin(t){return(t.args[0]||[]).indexOf(t.value)===-1},lower_case(t){if(t.value!=null)return t.value.toString().toLowerCase()},upper_case(t){if(t.value!=null)return t.value.toString().toUpperCase()},upper_first(t){if(t.value!=null)return pt(t.value.toString())},take(t){if(t.value!=null)return t.value.slice(0,Math.max(0,t.args[0]||0))},skip(t){if(t.value!=null)return t.value.slice(t.args[0])},split(t){return t.value?t.value.split(t.args.length>0?t.args[0]:/,[ ]*/).filter(s=>!!s):[]}},re=t=>Array.isArray(t)?t.length:t||0;class G{constructor(e,s={}){this.options=Object.assign({},s),this._app=this.options._app,delete this.options._app,this.$template=a(e),this.$template.data("template",this),this.name=this.$template.attr("class")||this.$template.attr("id")}context(){return this.contexts?this.contexts[this.contexts.length-1]:null}parentContext(e){return this.contexts?this.contexts[this.contexts.length-((e||1)+1)]:null}render(e,s,i,n){s==null&&(s={}),n==null&&(n={}),this._initFilters(i),this.contextMap=n.contextMap||{},this.includeData=n.includeData||{},this.debug=!!n.debug;const r=a(this.$template.html());this.data=n.rootData||s,this._initContexts(s,n);const o=[];r.each((h,f)=>{const x=a(f);this._processNode(x),o.push(We(x))});const c=a(e);c.html(o.join("")),c.attr("data-context","root"),c.data("context",this.data),n.contextMap||c.find("[data-context-key]").each((h,f)=>{const x=a(f);s=this.contextMap[x.data("context-key")],s&&x.data("context",s)})}_initFilters(e){this.filters=this.options.filters||fi,e&&(this.filters=Object.assign({},this.filters,e)),!this.filters._controller&&this._app.controller&&(this.filters._controller=this._app.controller)}_initContexts(e,s){if(s.contexts)this.contexts=s.contexts;else{const i=s.parentContext||this.parentContext();this.contexts=i?[i,e]:[e]}}_processNode(e,s){if(e.is("script"))return;const i=e.data();if(i&&Object.keys(i).length>0){if(i.bindEach&&!s){this._processBindEach(e,i.bindEach);return}i.template&&(i.bindTo?this._withChildContext(this._processBindingValue(i.bindTo),()=>{this.context()&&this._processTemplate(e,i)}):this._processTemplate(e,i)),Object.keys(i).forEach(n=>{this._processBinding(e,n,i)})}e.children().each((n,r)=>{i.bindTo?this._withChildContext(this._processBindingValue(i.bindTo),()=>{this._processNode(a(r))}):this._processNode(a(r))}),e===this.$caseNode&&(this.caseValue=this.prevCaseValue),e.is("include")&&e.replaceWith(We(e))}_processBindEach(e,s){const i=this._processBindingValue(s);if(i&&Array.isArray(i)){const n=[];i.forEach(o=>{this._withChildContext(o,()=>{const c=e.clone();c.removeAttr("data-bind-each"),this._processContextMapping(c),this._processNode(c,!0),n.push(We(c))})});const r=n.join("");e.html(r),e.replaceWith(r)}else e.remove()}_withChildContext(e,s){this.contexts.push(e),s(),this.contexts.pop()}_processTemplate(e,s){const i=this.$template.parent();mi.call(this,e,s.template,i).render(e,this.context()||e.data("context"),this.filters,{root:i,contextMap:this.contextMap,includeData:s,contexts:this.contexts}),e.attr("data-template-selector",s.template),this._processContextMapping(e)}_processContextMapping(e){if(!e.data("context-key")){const s=ri();this.contextMap[s]=this.context(),e.attr("data-context-key",s)}}_processBinding(e,s,i){if(this.$node=e,this._currentBinding=`data-${He(s)}`,!s.match(/bind[A-Z]/))return;let n;const r=s.substr(4);r!=="When"&&(n=this._processBindingValue(i[s])),e.removeAttr(this._currentBinding);const o=n!=null;switch(r){case"Each":case"To":break;case"Class":o&&e.addClass(n);break;case"Text":o&&e.text(n);break;case"Html":o&&e.html(n);break;case"ReplaceWith":o&&e.replaceWith(n);break;case"Value":o&&(e.is("textarea")?e.html(n):e.attr("value",n));break;case"Case":this.prevCaseValue=this.caseValue,this.caseValue=(n||"").toString(),this.$caseNode=e;break;case"When":(e.data("bind-case")?this.prevCaseValue:this.caseValue)!==(i[s]||"").toString()&&ze(e);break;case"ShowIf":n?e.show():e.hide();break;case"HideIf":n?e.hide():e.show();break;case"ShowUnless":n?e.hide():e.show();break;case"HideUnless":n?e.show():e.hide();break;case"If":n||ze(e);break;case"Unless":n&&ze(e);break;default:if(r.match(/^Data[A-Z]/))o&&(e.data(ci(r.substr(4)),n),e.attr(He(r),n));else if(o){const h=He(r);h==="checked"?(e.prop("checked",n),n&&e.attr("checked",!0)):e.attr(h,n)}break}}_processBindingValue(e){if(!e)return null;if(e=e.toString(),e.includes("{{")){for(;e.includes("{{");)e=this._processNextBindingToken(e);if(!e.includes("::")&&!e.includes("|"))return e}return this._processValuePaths(e)}_processNextBindingToken(e){const s=e.indexOf("{{")+2,i=e.indexOf("}}"),n=e.substr(s,i-s),r=this._processValuePaths(n)||"";return e.replace(new RegExp(`{{${hi(n)}}}`,"g"),r)}_processValuePaths(e){const s=e.split("||");if(s.length>1){let n=null;for(const r of s)if(n=this._processValuePaths(r.trim()),n)break;return n}const i=e.split("&&");if(i.length>1){let n=null;for(const r of i)if(n=this._processValuePath(r.trim()),!n)return!1;return n}return this._processValuePath(e.trim())}_processValuePath(e){if(!e)return;const[s,...i]=e.split("|"),n=this._getValue(s.trim(),e);return i.reduce((r,o)=>this._processFilter(o,r,e),n)}_getValue(e,s){switch(e){case"@":return this.context();case"@@":return this.parentContext();case"true":return!0;case"false":return!1;case".":return this.data;default:const i=parseInt(e,10);if(!isNaN(i))return i;if(e.startsWith("@@"))return this._processValue(ae(e.substr(2),this.parentContext()));if(e.startsWith("@"))return this._processValue(ae(e.substr(1),this.context()));if(e.startsWith("%"))return this._processValue(ae(e.substr(1),this.includeData||{}));if(e.startsWith("="))return e.substr(1);if(e.startsWith('"'))return e.split('"')[1];if(e.startsWith("'"))return e.split("'")[1];if(e.startsWith("App."))return this._processValue(ae(e,this._app));if(e.startsWith("$"))return this._processValue(ae(e.substr(1),this._app.data));if(e.startsWith("!"))return!this._processValuePath(e.substr(1));let n=this._processValue(ae(e,this.data));return n===void 0&&this.filters[e.split("::")[0]]&&(n=this._processFilter(e,void 0,s)),n}}_processValue(e){return typeof e=="function"?e(this.context()):e}_processFilter(e,s,i){const[n,...r]=e.split("::"),o=n.trim();if(!o||!this.filters[o])return s;const c={value:s,valuePath:i,data:this.data,parentContext:this.parentContext(),context:this.context(),includeData:this.includeData,element:this.$node,binding:this._currentBinding,template:this,appData:this._app.data,currentUser:this._app.currentUser,args:r.map(h=>this._processValuePath(h.trim())),filter:h=>this.filters[h](c),expr:h=>this._processValuePath(h)};return c.filter(o)}}const ze=function(t){t.remove(),t.data("template-removed",!0)},We=function(t){return t.is("include")?(t.attr("data-context-key")&&t.children().attr("data-context-key",t.attr("data-context-key")),t.children().attr("data-template-selector",t.attr("data-template-selector")),t.html()):t.data("template-removed")?"":gi(t)},gi=t=>a("<div></div>").append(t).html();function mi(t,e,s){if(e instanceof G)return e;let i;return s?(i=s.find(e),i.length===0&&(i=a(e))):i=a(e),i=i.eq(0),i.data("template")||new G(i,{_app:this._app})}class Be{constructor(e,s={}){this.options=Object.assign({},s),this._app=this.options._app,delete this.options._app,this.element=a(e),this.placeholder=this.element.find(".view-placeholder").eq(0),this.$templates=this.element.children('script[type="template"]'),this.template=new G(this.options.template?a(this.options.template):this.$templates.eq(0),{_app:this._app}),this.options.target?this.target=this.options.target:(this.target=this.element.find(".view").eq(0),this.target.length===0&&(this.target=a('<div class="view"></div>').appendTo(this.element))),this.data=this.options.data||this.element.data("view-data"),this.filters=this.filters||this.options.filters||{},this.options.render&&this.on("render",this.options.render),this._controllers=[],this.element.data("view",this),document.addEventListener("turbolinks:visit",()=>{this.destroy()},{once:!0})}destroy(){if(!this.destroyed){for(this._bindings&&this._bindings.forEach(e=>{e()});this._controllers.length>0;){const e=this._controllers.pop();e&&!e.destroyed&&e.destroy()}this.element.data("view",null),this.destroyed=!0}}render(e){return e==null&&(e={}),this.setFilters(e.filters),e.data&&(this.data=e.data),Ze(),this.template.render(this.target,this.data||this.target.data("context"),this.filters,e),this.target.show(),this.target.data("view",this),this.placeholder.hide(),this._updateUi(),this._callChildPartialRenderEvents({partial:!1}),this.renderEvents.view&&this.renderEvents.view.call(this,{options:e}),this.trigger("view:render",{options:e}),this.rendered=!0,this.element.addClass("js-rendered"),this}trigger(e,s){s=s||{},s.view=this,this.element.trigger(e,s)}on(e,s){return e=`view:${e}`,this._bindings=this._bindings||[],this._bindings.push(()=>this.element.off(e,null,s)),this.element.on(e,null,s)}renderPartial(e,s,i){typeof s=="string"?i=i||{}:s instanceof G||(i=s||{}),i=i||{},this.setFilters(i.filters),Ze();let n=typeof e=="string"?this.element.find(e):a(e);n=_i.call(this,n,n.data("context"),s,this.filters,i),s=n.data("template").name;const r={element:n,template:s,partial:!0,options:i};return this._callPartialRenderEvent(n,r),this._callChildPartialRenderEvents(r),this.renderEvents.partial&&this.renderEvents.partial.call(this,r),this.trigger("view:render",r),this._updateUi(),n.attr("data-context","partial"),n}setFilters(e){e&&(this.filters=Object.assign({},this.filters,e))}_callChildPartialRenderEvents(e){this.target.find("[data-template-selector]").each((s,i)=>{this._callPartialRenderEvent(a(i),e)})}_callPartialRenderEvent(e,s){const i=Object.assign({},s);e.data("template-selector")&&(i.template=e.data("template-selector").substr(1));const n=this.renderEvents[i.template];n&&(i.element=e,n.call(this,i))}_updateUi(){q(),Ae(this._app),z()}}Be.prototype.renderEvents={};const Y=(t,e,s)=>{t.each((i,n)=>{const r=a(n),o=r.data("view")||r.closest("view").data("view");o&&(s&&o.setFilters(s),o.render({data:e}))})};function _i(t,e,s,i,n={}){if(s=s||t.data("template")||t.data("template-selector"),!s)return t;if(!(s instanceof G)){const c=a(s).eq(0);s=c.data("template")||new G(c,{_app:this._app})}e=e||t.data("context")||{};const r=a("<div></div>");s.render(r,e,i,n);const o=r.children();return o.data("template",s),o.data("context",e),t.replaceWith(o),a(o)}class w{constructor(e,s){if(this.element=a(e),this.options=Object.assign({},this.constructor.defaults,s||{}),this._app=this.options._app,delete this.options._app,this._controllers=[],this._unregisters=[],this.element.length>0){let i=this.element.data("controls");i||(i=[],this.element.data("controls",i)),i.push(this),bi.call(this),document.addEventListener("turbolinks:visit",()=>{this.destroy()},{once:!0})}}destroy(){if(this.destroyed)return;vi.call(this);const e=this.element.data("controls");if(e){const s=e.indexOf(this);s!==-1&&e.splice(s,1)}for(;this._controllers.length>0;){const s=this._controllers.pop();s&&!s.destroyed&&s.destroy()}for(;this._unregisters.length>0;){const s=this._unregisters.pop();s&&s()}this.destroyed=!0}renderViews(e){e==null&&(e=this.data);const s=this.filters?yi(this):null;this.element.find("view").each((i,n)=>Y(a(n),e,s)),q(),Ae(this._app),z()}}const bi=function(){!this.events||(this._bindings=[],Object.keys(this.events).forEach(t=>{const e=this.events[t];t.split(",").forEach(s=>{this._bindings.push(wi.call(this,s,e))})}))},wi=function(t,e){const s=t.split(" "),i=s[s.length-1],n=i.replace("|"," "),r=this,o=function(c,h){return e.call(r,a(this),c,h)};if(t===n)return this.element.on(n,o),()=>this.element.off(n,o);{let c=this.element;return t.startsWith("window")?(c=a(window),t=null):t.startsWith("#")?c=a("body"):t.startsWith("body")&&(c=a("body"),t=t.replace("body ","")),t&&(t=t.replace(` ${i}`,"")),c.on(n,t,o),()=>c.off(n,t,o)}},vi=function(){this._bindings&&this._bindings.forEach(t=>{t()})},yi=t=>Object.keys(t.filters).reduce((e,s)=>{const i=t.filters[s];return typeof i=="function"&&(e[s]=i.bind(t)),e},{});const H=v.Pos;function xi(t,e,s,i){if(!i||e>s)return 0;const n=t.clipPos(H(e,0)),r=t.clipPos(H(s)),o=t.getRange(n,r);e<=t.firstLine()?t.replaceRange("",n,H(r.line+1,0)):t.replaceRange("",H(n.line-1),r);const c=n.line+i;if(c<=t.firstLine())return t.replaceRange(o+`
`,H(c,0)),t.firstLine()-n.line;const h=t.clipPos(H(c-1));return t.replaceRange(`
`+o,h),h.line+1-n.line}function ft(t,e){const s=t.getCursor("head"),i=t.getCursor("anchor");t.operation(()=>{const n=xi(t,Math.min(s.line,i.line),Math.max(s.line,i.line),e);t.setSelection(H(i.line+n,i.ch),H(s.line+n,s.ch))})}v.commands.moveLinesUp=t=>{ft(t,-1)};v.commands.moveLinesDown=t=>{ft(t,1)};v.keyMap.default["Alt-Up"]="moveLinesUp";v.keyMap.default["Alt-Down"]="moveLinesDown";v.defineMode("coq",function(t,e){var s=["Abort","About","Add","All","Arguments","Asymmetric","Axiom","Bind","Canonical","Check","Class","Close","Coercion","CoFixpoint","Comments","CoInductive","Context","Constructors","Contextual","Corollary","Defined","Definition","Delimit","Fail","Eval","End","Example","Export","Fact","Fixpoint","From","Global","Goal","Graph","Hint","Hypotheses","Hypothesis","Implicit","Implicits","Import","Inductive","Infix","Instance","Lemma","Let","Local","Ltac","Module","Morphism","Next","Notation","Obligation","Open","Parameter","Parameters","Prenex","Print","Printing","Program","Patterns","Projections","Proof","Proposition","Qed","Record","Relation","Remark","Require","Reserved","Resolve","Rewrite","Save","Scope","Search","SearchAbout","Section","Set","Show","Strict","Structure","Tactic","Time","Theorem","Types","Unset","Variable","Variables","View"],i=["as","at","cofix","crush","else","end","False","fix","for","forall","fun","if","in","is","let","match","of","Prop","return","struct","then","True","Type","when","with"],n=["after","apply","assert","auto","autorewrite","case","change","clear","compute","congruence","constructor","congr","cut","cutrewrite","dependent","destruct","eapply","eassumption","eauto","econstructor","elim","exists","field","firstorder","fold","fourier","generalize","have","hnf","induction","injection","instantiate","intro","intros","inversion","left","move","pattern","pose","refine","remember","rename","replace","revert","rewrite","right","ring","set","simpl","specialize","split","subst","suff","symmetry","transitivity","trivial","unfold","unlock","using","vm_compute","where","wlog"],r=["assumption","by","contradiction","discriminate","exact","now","omega","reflexivity","tauto"],o=["admit","Admitted"],c={};i.map(function(_){c[_]="keyword"}),o.map(function(_){c[_]="keyword"}),s.map(function(_){c[_]="builtin"}),n.map(function(_){c[_]="tactic"}),r.map(function(_){c[_]="terminator"});function h(_,y){if(_.eatSpace())return null;var C=_.next();if(y.begin_sentence&&/[-*+{}]/.test(C))return"coq-bullet";if(C==="(")return _.peek()==="*"?(_.next(),y.commentLevel++,y.tokenize=x,y.tokenize(_,y)):(y.begin_sentence=!1,"parenthesis");if(/\s/.test(C)||(y.begin_sentence=!1),C===".")return _.peek()!=="."?(y.tokenize=A,y.tokenize(_,y)):(_.next(),"operator");if(C==='"')return y.tokenize=f,y.tokenize(_,y);if(C===")")return"parenthesis";if(C==="~")return _.eatWhile(/\w/),"variable-2";if(C==="`")return _.eatWhile(/\w/),"quote";if(/\d/.test(C))return _.eatWhile(/[\d]/),"number";if(/[+\-*&%=<>!?|]/.test(C))return"operator";if(/[\[\]]/.test(C))return"bracket";_.eatWhile(/\w/);var j=_.current();return c.hasOwnProperty(j)?c[j]:"variable"}function f(_,y){for(var C,j=!1,F=!1;(C=_.next())!=null;){if(C==='"'&&!F){j=!0;break}F=!F&&C==="\\"}return j&&!F&&(y.tokenize=h),"string"}function x(_,y){for(var C;y.commentLevel&&(C=_.next());)C==="("&&_.peek()==="*"&&(_.next(),y.commentLevel++),C==="*"&&_.peek()===")"&&(_.next(),y.commentLevel--);return y.commentLevel||(y.tokenize=h),"comment"}function A(_,y){if(y.tokenize=h,_.eol()||_.match(/\s/,!1))return y.begin_sentence=!0,"statementend"}return{startState:function(){return{begin_sentence:!0,tokenize:h,commentLevel:0}},token:function(_,y){return y.tokenize(_,y)},blockCommentStart:"(*",blockCommentEnd:"*)",lineComment:null}});v.defineMIME("text/x-coq",{name:"coq"});v.defineMode("nasm",function(){function t(o){for(var c={},h=o.split(" "),f=0;f<h.length;++f)c[h[f]]=!0;return c}var e=t("aaa aad aam aas adc add and arpl bound bsf bsr bswap bt btc btr bts call cbw cdq clc cld cli clts cmc cmp cmps cmpxchg cwd cwde daa das dec div enter esc hlt idiv imul in inc ins int into invd invlpg iret iretd ja jae jb jbe jc jcxz je jecxz jg jge jl jle jmp jna jnae jnb jnbe jnc jne jng jnge jnl jnle jno jnp jns jnz jo jp jpe jpo js jz lahf lar lds lea leave les lfs lgdt lidt lgs lldt lmsw lock lods loop loope loopz loopnz loopne lsl lss ltr mov movs movsx movzx mul near neg nop not or out outs pop popa popad popf popfd push pusha pushad pushf pushfd rcl rcr rep repe repz repne repnz ret retf rol ror sahf sal sar sbb scas section setae setnb setb setnae setbe setna sete setz setne setnz setl setnge setge setng setle setng setg setnle sets setns setc setnc seto setno setp setpe setnp setpo sgdt sidt shl shld shr shrd sldt smsw stc std sti stos str sub test verr verw wait fwait wait fwait wbinvd xchg xlat xlatb xor equ"),s=t("db dw dd dq dt do dy dz resb resw resd resq rest reso resy resz"),i=t("section segment .data .text .bss"),n=t("ip eip eax ebx ecx edx edi esi ebp esp ax bx cx dx di si bp sp ah al bh bl ch cl dh dl ax bx cx dx cs ds ss es fs gs cr0 cr2 cr3 db0 db1 db2 db3 db6 db7 tr6 tr7 st rax rcx rdx rbs rsp rbp rsi rdi"),r=";";return{startState:function(){return{tokenize:null}},token:function(o,c){if(c.tokenize)return c.tokenize(o,c);var h,f=o.next();if(f===r)return o.skipToEnd(),"comment";if(f==="'")return o.skipTo("'"),"string";if(f==='"')return o.eatWhile(/\w/),"string";if(f==="."&&(o.eatWhile(/\w/),h=o.current().toLowerCase(),i.propertyIsEnumerable(h)))return"tag";if(/\d/.test(f))return f==="0"&&o.eat("x")?(o.eatWhile(/[0-9a-fA-F]/),"number"):(o.eatWhile(/\d/),"number");if(/\w/.test(f)&&(o.eatWhile(/\w/),o.eat(":")||(h=o.current().toLowerCase(),i.propertyIsEnumerable(h))))return"tag";if(e.propertyIsEnumerable(h))return o.eatWhile(/\w/),"keyword";if(s.propertyIsEnumerable(h))return o.eatWhile(/\w/),"tag";if(n.propertyIsEnumerable(h))return o.eatWhile(/\w/),"builtin"},lineComment:r}});v.defineMIME("text/x-nasm","nasm");v.defineMode("perl6",function(t,e){var s={"->":4,"++":4,"--":4,"**":4,"=~":4,"!~":4,"*":4,"/":4,"%":4,x:4,"+":4,"-":4,".":4,"<<":4,">>":4,"<":4,">":4,"<=":4,">=":4,"==":4,"!=":4,"<=>":4,"~~":4,"&":4,"|":4,"^":4,"&&":4,"||":4,"//":4,"..":4,"...":4,"?":4,":":4,"=":4,"+=":4,"-=":4,"*=":4,",":4,"=>":4,"::":4,BEGIN:[5,1],END:[5,1],GETC:[5,1],READ:[5,1],READLINE:[5,1],DESTROY:[5,1],TIE:[5,1],TIEHANDLE:[5,1],UNTIE:[5,1],$ARG:5,$_:5,"@ARG":5,"@_":5,'$"':5,$$:5,"$(":5,$EGID:5,"$)":5,$0:5,$SUBSEP:5,"$;":5,$UID:5,"$<":5,$EUID:5,"$>":5,$a:5,$b:5,"$^C":5,"$^D":5,$ENV:5,"%ENV":5,"$^F":5,"@F":5,"$^H":5,"%^H":5,$INPLACE_EDIT:5,"$^I":5,"$^M":5,$OSNAME:5,"$^O":5,"${^OPEN}":5,$PERLDB:5,"$^P":5,$SIG:5,"%SIG":5,$BASETIME:5,"$^T":5,"${^TAINT}":5,"${^UNICODE}":5,"${^UTF8CACHE}":5,"${^UTF8LOCALE}":5,$PERL_VERSION:5,"$^V":5,"${^WIN32_SLOPPY_STAT}":5,$EXECUTABLE_NAME:5,"$^X":5,$1:5,$MATCH:5,"$&":5,"${^MATCH}":5,$PREMATCH:5,"$`":5,"${^PREMATCH}":5,$POSTMATCH:5,"$'":5,"${^POSTMATCH}":5,$LAST_PAREN_MATCH:5,"$+":5,$LAST_SUBMATCH_RESULT:5,"$^N":5,"@LAST_MATCH_END":5,"@+":5,"%LAST_PAREN_MATCH":5,"%+":5,"@LAST_MATCH_START":5,"@-":5,"%LAST_MATCH_START":5,"%-":5,$LAST_REGEXP_CODE_RESULT:5,"$^R":5,"${^RE_DEBUG_FLAGS}":5,"${^RE_TRIE_MAXBUF}":5,$ARGV:5,"@ARGV":5,ARGV:5,ARGVOUT:5,$OUTPUT_FIELD_SEPARATOR:5,$OFS:5,"$,":5,$INPUT_LINE_NUMBER:5,$NR:5,"$.":5,$INPUT_RECORD_SEPARATOR:5,$RS:5,"$/":5,$OUTPUT_RECORD_SEPARATOR:5,$ORS:5,"$\\":5,$OUTPUT_AUTOFLUSH:5,"$|":5,$ACCUMULATOR:5,"$^A":5,$FORMAT_FORMFEED:5,"$^L":5,$FORMAT_PAGE_NUMBER:5,"$%":5,$FORMAT_LINES_LEFT:5,"$-":5,$FORMAT_LINE_BREAK_CHARACTERS:5,"$:":5,$FORMAT_LINES_PER_PAGE:5,"$=":5,$FORMAT_TOP_NAME:5,"$^":5,$FORMAT_NAME:5,"$~":5,"${^CHILD_ERROR_NATIVE}":5,$EXTENDED_OS_ERROR:5,"$^E":5,$EXCEPTIONS_BEING_CAUGHT:5,"$^S":5,$WARNING:5,"$^W":5,"${^WARNING_BITS}":5,$OS_ERROR:5,$ERRNO:5,"$!":5,"%OS_ERROR":5,"%ERRNO":5,"%!":5,$CHILD_ERROR:5,"$?":5,$EVAL_ERROR:5,"$@":5,$OFMT:5,"$#":5,"$*":5,$ARRAY_BASE:5,"$[":5,$OLD_PERL_VERSION:5,"$]":5,if:[1,1],elsif:[1,1],else:[1,1],while:[1,1],unless:[1,1],for:[1,1],foreach:[1,1],q:null,qq:null,qr:null,quotemeta:null,qw:null,qx:null,y:null},i=["macro sub submethod method multi proto only rule token regex category"],n=["module class role package enum grammar slang subset"],r=["self"],o=["use require"],c=["if else elsif unless"],h=["let my our state temp has constant"],f=["for loop repeat while until gather given"],x=["take do when next last redo return contend maybe defer","default exit make continue break goto leave async lift"],A=["is as but trusts of returns handles where augment supersede"],_=["BEGIN CHECK INIT START FIRST ENTER LEAVE KEEP","UNDO NEXT LAST PRE POST END CATCH CONTROL TEMP"],y=["die fail try warn"],C=["prec irs ofs ors export deep binary unary reparsed rw parsed cached","readonly defequiv will ref copy inline tighter looser equiv assoc","required"],j=["NaN Inf"],F=["oo fatal"],ye=["Object Any Junction Whatever Capture Match","Signature Proxy Matcher Package Module Class","Grammar Scalar Array Hash KeyHash KeySet KeyBag","Pair List Seq Range Set Bag Mapping Void Undef","Failure Exception Code Block Routine Sub Macro","Method Submethod Regex Str Blob Char Byte","Codepoint Grapheme StrPos StrLen Version Num","Complex num complex Bit bit bool True False","Increasing Decreasing Ordered Callable AnyChar","Positional Associative Ordering KeyExtractor","Comparator OrderingPair IO KitchenSink Role","Int int int1 int2 int4 int8 int16 int32 int64","Rat rat rat1 rat2 rat4 rat8 rat16 rat32 rat64","Buf buf buf1 buf2 buf4 buf8 buf16 buf32 buf64","UInt uint uint1 uint2 uint4 uint8 uint16 uint32","uint64 Abstraction utf8 utf16 utf32"],$s=["eager hyper substr index rindex grep map sort join lines hints chmod","split reduce min max reverse truncate zip cat roundrobin classify","first sum keys values pairs defined delete exists elems end kv any","all one wrap shape key value name pop push shift splice unshift floor","ceiling abs exp log log10 rand sign sqrt sin cos tan round strand","roots cis unpolar polar atan2 pick chop p5chop chomp p5chomp lc","lcfirst uc ucfirst capitalize normalize pack unpack quotemeta comb","samecase sameaccent chars nfd nfc nfkd nfkc printf sprintf caller","evalfile run runinstead nothing want bless chr ord gmtime time eof","localtime gethost getpw chroot getlogin getpeername kill fork wait","perl graphs codes bytes clone print open read write readline say seek","close opendir readdir slurp pos fmt vec link unlink symlink uniq pair","asin atan sec cosec cotan asec acosec acotan sinh cosh tanh asinh","acos acosh atanh sech cosech cotanh sech acosech acotanh asech ok","plan_ok dies_ok lives_ok skip todo pass flunk force_todo use_ok isa_ok","diag is_deeply isnt like skip_rest unlike cmp_ok eval_dies_ok nok_error","eval_lives_ok approx is_approx throws_ok version_lt plan eval succ pred","times nonce once signature new connect operator undef undefine sleep","from to infix postfix prefix circumfix postcircumfix minmax lazy count","unwrap getc pi e context void quasi body each contains rewinddir subst","can isa flush arity assuming rewind callwith callsame nextwith nextsame","attr eval_elsewhere none srand trim trim_start trim_end lastcall WHAT","WHERE HOW WHICH VAR WHO WHENCE ACCEPTS REJECTS does not true iterator by","re im invert flip"],Os=["div x xx mod also leg cmp before after eq ne le lt","gt ge eqv ff fff and andthen Z X or xor","orelse extra m mm rx s tr"],$=function(l,p){var k,E,D;for(k=0;k<l.length;k++)for(D=l[k].split(" "),E=0;E<D.length;E++)s[D[E]]=p};$(i,1),$(n,1),$(r,1),$(o,1),$(c,1),$(h,2),$(f,1),$(x,1),$(A,1),$(_,1),$(y,1),$(C,1),$(j,1),$(F,1),$(ye,2),$($s,3),$(Os,4);var S="string-2",T=/[goseximacplud]/;function b(l,p,k,E,D){return p.chain=null,p.style=null,p.tail=null,p.tokenize=function(u,P){for(var Fe=!1,Re,Le=0;Re=u.next();){if(Re===k[Le]&&!Fe)return k[++Le]!==void 0?(P.chain=k[Le],P.style=E,P.tail=D):D&&u.eatWhile(D),P.tokenize=xe,E;Fe=!Fe&&Re=="\\"}return E},p.tokenize(l,p)}function Ie(l,p,k){return p.tokenize=function(E,D){return E.string==k&&(D.tokenize=xe),E.skipToEnd(),"string"},p.tokenize(l,p)}function xe(l,p){if(l.eatSpace())return null;if(p.chain)return b(l,p,p.chain,p.style,p.tail);if(l.match(/^\-?[\d\.]/,!1)&&l.match(/^(\-?(\d*\.\d+(e[+-]?\d+)?|\d+\.\d*)|0x[\da-fA-F]+|0b[01]+|\d+(e[+-]?\d+)?)/))return"number";if(l.match(/^<<(?=\w)/))return l.eatWhile(/\w/),Ie(l,p,l.current().substr(2));if(l.sol()&&l.match(/^\=item(?!\w)/))return Ie(l,p,"=cut");var k=l.next();if(k=='"'||k=="'"){if(l.prefix(3)=="<<"+k){var E=l.pos;l.eatWhile(/\w/);var D=l.current().substr(1);if(D&&l.eat(k))return Ie(l,p,D);l.pos=E}return b(l,p,[k],"string")}if(k=="q"){var u=l.look(-2);if(!(u&&/\w/.test(u))){if(u=l.look(0),u=="x"){if(u=l.look(1),u=="(")return l.eatSuffix(2),b(l,p,[")"],S,T);if(u=="[")return l.eatSuffix(2),b(l,p,["]"],S,T);if(u=="{")return l.eatSuffix(2),b(l,p,["}"],S,T);if(u=="<")return l.eatSuffix(2),b(l,p,[">"],S,T);if(/[\^'"!~\/]/.test(u))return l.eatSuffix(1),b(l,p,[l.eat(u)],S,T)}else if(u=="q"){if(u=l.look(1),u=="(")return l.eatSuffix(2),b(l,p,[")"],"string");if(u=="[")return l.eatSuffix(2),b(l,p,["]"],"string");if(u=="{")return l.eatSuffix(2),b(l,p,["}"],"string");if(u=="<")return l.eatSuffix(2),b(l,p,[">"],"string");if(/[\^'"!~\/]/.test(u))return l.eatSuffix(1),b(l,p,[l.eat(u)],"string")}else if(u=="w"){if(u=l.look(1),u=="(")return l.eatSuffix(2),b(l,p,[")"],"bracket");if(u=="[")return l.eatSuffix(2),b(l,p,["]"],"bracket");if(u=="{")return l.eatSuffix(2),b(l,p,["}"],"bracket");if(u=="<")return l.eatSuffix(2),b(l,p,[">"],"bracket");if(/[\^'"!~\/]/.test(u))return l.eatSuffix(1),b(l,p,[l.eat(u)],"bracket")}else if(u=="r"){if(u=l.look(1),u=="(")return l.eatSuffix(2),b(l,p,[")"],S,T);if(u=="[")return l.eatSuffix(2),b(l,p,["]"],S,T);if(u=="{")return l.eatSuffix(2),b(l,p,["}"],S,T);if(u=="<")return l.eatSuffix(2),b(l,p,[">"],S,T);if(/[\^'"!~\/]/.test(u))return l.eatSuffix(1),b(l,p,[l.eat(u)],S,T)}else if(/[\^'"!~\/(\[{<]/.test(u)){if(u=="(")return l.eatSuffix(1),b(l,p,[")"],"string");if(u=="[")return l.eatSuffix(1),b(l,p,["]"],"string");if(u=="{")return l.eatSuffix(1),b(l,p,["}"],"string");if(u=="<")return l.eatSuffix(1),b(l,p,[">"],"string");if(/[\^'"!~\/]/.test(u))return b(l,p,[l.eat(u)],"string")}}}if(k=="m"){var u=l.look(-2);if(!(u&&/\w/.test(u))&&(u=l.eat(/[(\[{<\^'"!~\/]/),u)){if(/[\^'"!~\/]/.test(u))return b(l,p,[u],S,T);if(u=="(")return b(l,p,[")"],S,T);if(u=="[")return b(l,p,["]"],S,T);if(u=="{")return b(l,p,["}"],S,T);if(u=="<")return b(l,p,[">"],S,T)}}if(k=="s"){var u=/[\/>\]})\w]/.test(l.look(-2));if(!u&&(u=l.eat(/[(\[{<\^'"!~\/]/),u))return u=="["?b(l,p,["]","]"],S,T):u=="{"?b(l,p,["}","}"],S,T):u=="<"?b(l,p,[">",">"],S,T):u=="("?b(l,p,[")",")"],S,T):b(l,p,[u,u],S,T)}if(k=="y"){var u=/[\/>\]})\w]/.test(l.look(-2));if(!u&&(u=l.eat(/[(\[{<\^'"!~\/]/),u))return u=="["?b(l,p,["]","]"],S,T):u=="{"?b(l,p,["}","}"],S,T):u=="<"?b(l,p,[">",">"],S,T):u=="("?b(l,p,[")",")"],S,T):b(l,p,[u,u],S,T)}if(k=="t"){var u=/[\/>\]})\w]/.test(l.look(-2));if(!u&&(u=l.eat("r"),u&&(u=l.eat(/[(\[{<\^'"!~\/]/),u)))return u=="["?b(l,p,["]","]"],S,T):u=="{"?b(l,p,["}","}"],S,T):u=="<"?b(l,p,[">",">"],S,T):u=="("?b(l,p,[")",")"],S,T):b(l,p,[u,u],S,T)}if(k=="`")return b(l,p,[k],"variable-2");if(k=="/")return/~\s*$/.test(l.prefix())?b(l,p,[k],S,T):"operator";if(k=="$"){var E=l.pos;if(l.eatWhile(/\d/)||l.eat("{")&&l.eatWhile(/\d/)&&l.eat("}"))return"variable-2";l.pos=E}if(/[$@%]/.test(k)){var E=l.pos;if(l.eat("^")&&l.eat(/[A-Z]/)||!/[@$%&]/.test(l.look(-2))&&l.eat(/[=|\\\-#?@;:&`~\^!\[\]*'"$+.,\/<>()]/)){var u=l.current();if(s[u])return"variable-2"}l.pos=E}if(/[$@%&]/.test(k)&&(l.eatWhile(/[\w$\[\]]/)||l.eat("{")&&l.eatWhile(/[\w$\[\]]/)&&l.eat("}"))){var u=l.current();return s[u]?"variable-2":"variable"}if(k=="#"&&l.look(-2)!="$")return l.skipToEnd(),"comment";if(/[:+\-\^*$&%@=<>!?|\/~\.]/.test(k)){var E=l.pos;if(l.eatWhile(/[:+\-\^*$&%@=<>!?|\/~\.]/),s[l.current()])return"operator";l.pos=E}if(k=="_"&&l.pos==1){if(l.suffix(6)=="_END__")return b(l,p,["\0"],"comment");if(l.suffix(7)=="_DATA__")return b(l,p,["\0"],"variable-2");if(l.suffix(7)=="_C__")return b(l,p,["\0"],"string")}if(/\w/.test(k)){var E=l.pos;if(l.look(-2)=="{"&&(l.look(0)=="}"||l.eatWhile(/\w/)&&l.look(0)=="}"))return"string";l.pos=E}if(/[A-Z]/.test(k)){var P=l.look(-2),E=l.pos;if(l.eatWhile(/[A-Z_]/),/[\da-z]/.test(l.look(0)))l.pos=E;else{var u=s[l.current()];return u?(u[1]&&(u=u[0]),P!=":"?u==1?"keyword":u==2?"def":u==3?"atom":u==4?"operator":u==5?"variable-2":"meta":"meta"):"meta"}}if(/[a-zA-Z_]/.test(k)){var P=l.look(-2);l.eatWhile(/\w/);var u=s[l.current()];return u?(u[1]&&(u=u[0]),P!=":"?u==1?"keyword":u==2?"def":u==3?"atom":u==4?"operator":u==5?"variable-2":"meta":"meta"):"meta"}return null}return{startState:function(){return{tokenize:xe,chain:null,style:null,tail:null}},token:function(l,p){return(p.tokenize||xe)(l,p)},electricChars:"{}"}});v.defineMIME("text/x-perl6","perl6");v.StringStream.prototype.look=function(t){return this.string.charAt(this.pos+(t||0))};v.StringStream.prototype.prefix=function(t){if(t){var e=this.pos-t;return this.string.substr(e>=0?e:0,t)}else return this.string.substr(0,this.pos-1)};v.StringStream.prototype.suffix=function(t){var e=this.string.length,s=e-this.pos+1;return this.string.substr(this.pos,t&&t<e?t:s)};v.StringStream.prototype.nsuffix=function(t){var e=this.pos,s=t||this.string.length-this.pos+1;return this.pos+=s,this.string.substr(e,s)};v.StringStream.prototype.eatSuffix=function(t){var e=this.pos+t,s;e<=0?this.pos=0:e>=(s=this.string.length-1)?this.pos=s:this.pos=e};v.defineSimpleMode("prolog",{start:[{regex:/"/,token:"string",next:"string_double_quote"},{regex:/`/,token:"string",next:"string_back_quote"},{regex:/'/,token:"atom",next:"atom"},{regex:/[a-z][0-9a-zA-Z_]*/,token:"atom"},{regex:/\s*(?:(?:%.*)|(?:\s+))\s*/,token:"comment"},{regex:/\/\*/,token:"comment",next:"comment"},{regex:/(?:[A-Z_][a-zA-Z0-9_]*)/,token:"variable"},{regex:/(?:0o[0-7]+|0x[0-9a-f]+|0b[01]+|0'(?:''|\\[abfnrtv\\'"`]|\\x?\d+\\|.)|\d+(?:\.\d+(?:e[+-]?\d+)?)?)/,token:"number"},{regex:/([#\$\&\*\+\-\.\/\:\<\=\>\?@\^\~\\]+)/,token:"graphic"},{regex:/\./,token:"point"},{regex:/\!/,token:"cut"},{regex:/[,;\(\)]/,token:"paren"},{regex:/\s+/,token:null}],comment:[{regex:/.*?\*\//,token:"comment",next:"start"},{regex:/.*/,token:"comment"}],atom:[{regex:/'/,token:"atom",next:"start"},{regex:/(?:\\(?:x?\d+)?\\)|(?:'')|(?:\\')|[^']/,token:"atom"}],string_double_quote:[{regex:/"/,token:"string",next:"start"},{regex:/[^"]|""|\\"/,token:"string"}],string_back_quote:[{regex:/`/,token:"string",next:"start"},{regex:/[^`]|``|\\`/,token:"string"}]});v.defineMIME("text/x-prolog","prolog");v.defineMIME("text/x-purescript","haskell");var gt="and as assert begin class constraint done downto exception external fun esfun function functor include inherit initializer lazy let pub mutable new nonrec object of open or pri rec then to type val virtualtry catch finally do else for if switch while import library export part of show hide is as".split(" "),ki="try catch match with else for if switch while do begin end in module sig struct".split(" "),mt="unit int char exn string int32 int64 float bool option mod land lor lxor lsl lsr asr".split(" "),_t="true false Error Ok None Some".split(" ");function Ce(t){for(var e={},s=0;s<t.length;++s)e[t[s]]=!0;return e}v.defineMIME("application/reason",{name:"clike",keywords:Ce(gt),blockKeywords:Ce(ki),atoms:Ce(mt),builtin:Ce(_t),hooks:{"{":function(t,e){if(t.eat("|"))return e.longString=!0,e.tokenize=Ti,e.tokenize(t,e)},"[":function(t,e){return t.eat("|")?"operator":null},"|":function(t,e){return t.eat("]"),"operator"},'"':function(t,e){return e.tokenize=Si,e.tokenize(t,e)},"'":function(t,e){return e.tokenize=Ci,e.tokenize(t,e)},"/":function(t,e){return t.eat("*")?(e.tokenize=Ke(1),e.tokenize(t,e)):!1}}});function Ci(t,e){for(var s=0;t.next()!=null;){if(t.eat("'")&&s<=4)return e.tokenize=null,"string";if(!/\w/.test(t.peek()))return e.tokenize=null,"variable-2";s++}return e.tokenize=null,null}function Si(t,e){for(var s,i=!1,n=!1;(s=t.next())!=null;){if(s==='"'&&!n){i=!0;break}n=!n&&s==="\\"}return i&&!n&&(e.tokenize=!1),"string"}function Ke(t){return function(e,s){for(var i;i=e.next();)if(i=="*"&&e.eat("/"))if(t==1){s.tokenize=null;break}else return s.tokenize=Ke(t-1),s.tokenize(e,s);else if(i=="/"&&e.eat("*"))return s.tokenize=Ke(t+1),s.tokenize(e,s);return"comment"}}function Ti(t,e){for(var s,i;e.longString&&(i=t.next())!=null;)s==="|"&&i==="}"&&(e.longString=!1),s=i;return e.longString||(e.tokenize=!1),"string"}v.registerHelper("hintWords","application/reason",gt.concat(mt).concat(_t));v.defineMode("reason",function(t){return Object.assign(v.getMode(t,"application/reason"),{lineComment:void 0})},"clike");Vs.register(v);Ns(v);Us(v);v.registerGlobalHelper("hint","agda-input",(t,e)=>t&&t.name==="agda",Ps(qs));v.registerGlobalHelper("hint","julia-helper",(t,e)=>t&&t.name==="julia",Hs);class Ei extends w{constructor(e,s){super(e,s)}cache(){return this._cache||(this._cache=Ue(this.stashGroup()),this._cache._=this._cache._||{}),this._cache}stashGroup(){return this.options.stashGroup||"default_group"}getStash(){if(this.stashId)return this.cache().get(this.stashId)}updateStash(){let e=this.getValue();e===""&&(e=" "),e===this.originalValue&&(e=null),(e||this.cache().get(this.stashId))&&this.stashId&&this.cache().set(this.stashId,e)}setStashId(e){this.stashId!==e&&this.setValue(this.getValue(),e,!0)}emptyStash(){this.cache().clear()}setValue(e,s,i){return e===this.getValue()?!1:(this.updateStash(),this.originalValue=e,s&&(this.stashId=s),i&&(e=this.getStash()||e),e===" "&&(e=""),this._setValue(e))}isDirty(){return!!this.originalValue&&this.getValue()!==this.originalValue}markClean(){this.originalValue=this.getValue(),this.updateStash()}}const de=(t,e)=>{const s=new AbortController;return(async()=>{try{await zs(t,{signal:s.signal}),e&&e()}catch(i){if(i.name==="AbortError")return;throw i}})(),s};function Ai(t,e,s){const i=document.querySelector(t);i.classList.add("animated",e),i.addEventListener("animationend",function n(){i.classList.remove("animated",e),i.removeEventListener("animationend",n),typeof s=="function"&&s(i)})}const pe=(t,{duration:e=400,finish:s}={})=>{if(!!t)return t.style.opacity=0,t.style.display="inline-block",t.style.visibility="visible",Se({step:i=>{t.style.opacity=i},finish:s,duration:e})},fe=(t,{duration:e=400,finish:s}={})=>{if(!!t)return Se({step:i=>{t.style.opacity=1-i},finish:()=>{t.style.display="none",t.style.visibility="hidden",typeof s=="function"&&s()},duration:e})},I=(t,{duration:e=400,finish:s}={})=>{if(!t)return;t.style.height=0,t.style.display="block",bt(t);const i=t.scrollHeight;return Se({step:n=>{t.style.height=`${(i*n).toFixed(2)}px`},finish:()=>{t.style.display="block",t.style.height=null,wt(t),typeof s=="function"&&s()},duration:e})},V=(t,{duration:e=400,finish:s}={})=>{if(!t)return;const i=t.scrollHeight;return t.style.display="block",bt(t),Se({step:n=>{t.style.height=`${(i*(1-n)).toFixed(2)}px`},finish:()=>{t.style.display="none",t.style.height=null,wt(t),typeof s=="function"&&s()},duration:e})},bt=t=>Object.assign(t.style,{overflow:"hidden",marginTop:"0",marginBottom:"0",paddingTop:"0",paddingBottom:"0"}),wt=t=>Object.assign(t.style,{overflow:null,marginTop:null,marginBottom:null,paddingTop:null,paddingBottom:null}),ji=t=>.5-Math.cos(t*Math.PI)/2,Se=({step:t,finish:e,timing:s=ji,duration:i=400})=>{if(typeof t!="function")throw new TypeError("step must be a function");if(typeof s!="function")throw new TypeError("timing must be a function");const n=performance.now(),r={id:0};return r.id=requestAnimationFrame(function o(c){const h=i===0?1:Math.max(Math.min((c-n)/i,1),0);t(s(h)),h<1?r.id=requestAnimationFrame(o):typeof e=="function"&&e()}),r};class ge extends w{constructor(e,s){super(e,s);this.$box=this.element.find(".alert-box"),this.currentAnimation=null,this.$box.length===0&&(this.element.is(".alert-box")?this.$box=this.element:this.$box=a("<div></div>").addClass("alert-box").appendTo(this.element)),this.$msgContainer=this.$box.find(".message"),this.$msgContainer.length===0&&(this.$msgContainer=this.$box)}container(){return this.options.boxContainer?this.$box:(this.$box.show(),this.element)}sanitize(e,s){return this.options.sanitize?this.options.sanitize(e,s):e}pickMessage(e){const s=this.options[`${e}Message`];return Array.isArray(s)?he(s):typeof s=="function"?s(this):s}showResult(e,s,i){e?this.success(s,i):this.fail(s,i)}success(e,s){e=this.sanitize(e,"success"),this.$box.removeClass(this.options.failClassName).removeClass(this.options.workingClassName).removeClass(this.options.warnClassName).addClass(this.options.successClassName),this.show(e||this.pickMessage("success"),s)}fail(e,s){e=this.sanitize(e,"fail"),this.$box.addClass(this.options.failClassName).removeClass(this.options.successClassName).removeClass(this.options.warnClassName).removeClass(this.options.workingClassName),this.show(e||this.pickMessage("fail"),s)}warn(e,s){e=this.sanitize(e,"fail"),this.$box.addClass(this.options.warnClassName).removeClass(this.options.failClassName).removeClass(this.options.successClassName).removeClass(this.options.workingClassName),this.show(e,s)}working(e,s){e=this.sanitize(e,"working"),this.$box.addClass(this.options.workingClassName).removeClass(this.options.successClassName).removeClass(this.options.failClassName).removeClass(this.options.warnClassName),this.show(e,s)}show(e,s){if(this.update(e,s),this.cancelWaitHide(),!e)return this.hide();const i=this.container();if(s===0){i.show();return}i.hide();const n=()=>this.waitHide(s);this.stopCurrentAnimation(),this.currentAnimation=this.options.useSlide?I(i.get(0),{finish:n}):pe(i.get(0),{finish:n})}hide(){const e=this.container();this.stopCurrentAnimation(),this.currentAnimation=this.options.useSlide?V(e.get(0)):fe(e.get(0))}cancelWaitHide(){this._waitHide!=null&&this._waitHide.abort()}waitHide(e){(e>0||e!==0&&this.options.displayDuration>0)&&(this.cancelWaitHide(),this._waitHide=de(e||this.options.displayDuration,()=>this.hide()))}update(e,s){if(!e||(this.element.show(),this.options.showClose&&(e+="<a class='close'>&times;</a>"),this.$msgContainer.html(e),s===0))return;const i=this.container();this.stopCurrentAnimation(),this.currentAnimation=this.options.useSlide?I(i.get(0)):pe(i.get(0))}stopCurrentAnimation(){this.currentAnimation&&(cancelAnimationFrame(this.currentAnimation.id),this.currentAnimation=null)}}ge.prototype.events={"a.close click"(t,e){e.preventDefault(),e.stopPropagation(),this.hide()}};ge.defaults={displayDuration:5e3,successClassName:"success",warnClassName:"warning",failClassName:"alert",workingClassName:"working",successMessage:"",failMessage:"",showClose:!1,boxContainer:!0,useSlide:!1,sanitize:null};const $i={white:"#FFF",yellow:"#ECB613",blue:"#3C7EBB",purple:"#9574E6",black:"#333"},Ge=["Good Job!","Impressive!","Outstanding!","Correct!","Great!","Correctamundo!","Excellent!"],Oi=["Incorrect!","Nope! Try again."],Te="default",vt=function(t,e){return e.options.commands!=null&&e.options.commands[t]?(e.options.commands[t](),!0):!1};v.commands.save=t=>vt("save",t);v.commands.test=t=>vt("test",t);const yt=t=>{t.somethingSelected()?t.indentSelection("add"):t.getOption("indentWithTabs")?t.replaceSelection("	","end","+input"):t.execCommand("insertSoftTab")},xt=t=>{t.indentSelection("subtract")};v.keyMap["vim-insert"].Tab=yt;v.keyMap["vim-insert"]["Shift-Tab"]=xt;const kt={"\\"(t){t.replaceSelection("\\"),t.execCommand("autocomplete")}},Di={extraKeys:{Space(t){const e=t.state.completionActive;e&&(e.widget.pick(),t.replaceSelection(" "))}},closeCharacters:/[\s]/,completeSingle:!1},Ct=function(t,e){e?(t.addKeyMap(kt),t.setOption("hintOptions",Di)):(t.removeKeyMap(kt),t.setOption("hintOptions",null))},St=(t,e)=>{e?(t.setOption("specialChars",/\\/),t.setOption("specialCharPlaceholder",()=>{const s=document.createElement("span");return s.setAttribute("cm-text","\\"),s.innerHTML="\u03BB",s})):(t.setOption("specialChars",v.defaults.specialChars),t.setOption("specialCharPlaceholder",v.defaults.specialCharPlaceholder))};class R extends Ei{constructor(e,s){super(e,s);var r,o;this.options.mode||(this.options.mode=this._app.data.language),this.keyMap=this.options.keyMap||this._app.localStorage.get("editorKeyMap")||Te,this.options.theme=this.options.theme||this._app.data.editorTheme||"codewars",this.width=this.options.width,this.height=this.element.height(),this.element.addClass("text-editor-container"),this.textarea=this.element.find("textarea"),this.textarea.length===1&&(this.options.value=this.textarea.val(),this.textarea.hide()),this.container=this.element.find(".js-editor"),this.config=Ii();const i=this.options.tabSize;this.editor=new v(this.container.get(0),{value:this.options.value||"",mode:this.options.mode,tabSize:i,indentUnit:i,smartIndent:(r=this.options.smartIndent)!=null?r:!0,autoCloseBrackets:(o=this.options.autoCloseBrackets)!=null?o:!0,indentWithTabs:!1,readOnly:this.options.readOnly,lineNumbers:this.options.lineNumbers,lineWrapping:this.options.lineWrapping,foldGutter:this.options.foldGutter,styleActiveLine:this.options.styleActiveLine,electricChars:!1,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],keyMap:this.keyMap,extraKeys:this.extraKeys(),commands:this.options.commands,matchBrackets:!0,undoDepth:600}),(this.options.mode==="agda"||this.options.mode==="julia")&&Ct(this.editor,!0),this.options.mode==="lambdacalc"&&St(this.editor,!0),this.setTheme(this.options.theme),this.editor.on("change",()=>this.element.trigger("texteditor.change")),this.editor.on("focus",()=>{this.focused=!0,this.element.trigger("texteditor.focus")}),this.editor.on("blur",()=>{this.focused=!1,this.element.trigger("texteditor.blur")}),this.editor.on("scroll",()=>this.element.trigger("texteditor.scroll")),(this.options.value||this.options.stashId)&&this.setValue(this.options.value,this.options.stashId,this.options.preferStash),setTimeout(()=>{this.resize(),this.keyMap!==Te&&this.setBindings(this.keyMap)},0);const n=this.element.find(".editor-msg-container");n.appendTo(this.container),this.messages=new ge(n,{boxContainer:!1,showClose:!0,displayDuration:0,successMessage:this.options.successMessage,sanitize(c,h){return c&&c.replace("Test::Error: ","")}}),this._controllers.push(this.messages),this.minHeight=this.element.height()}extraKeys(){const e=v.keyMap.default===v.keyMap.macDefault?"Cmd":"Ctrl",s={[`${e}-Enter`]:()=>this.onSubmit(),[`${e}-/`]:()=>this.editor.toggleComment(),Tab:yt,["Shift-Tab"]:xt};return this.keyMap!=="vim"&&(s.Esc=()=>{this.options.esc?this.options.esc(this):this.toggleFullScreen()}),this.options.extraKeys?Object.assign(s,this.options.extraKeys):s}setExtraKeys(e){this.options.extraKeys=e,this.editor.setOption("extraKeys",this.extraKeys())}toggleBindings(e){this.setBindings(this.keyMap!==e?e:Te)}setBindings(e){e==="default"&&(e="sublime"),e=e||Te,this.keyMap=e,this.editor.setOption("keyMap",e),this.editor.setOption("extraKeys",this.extraKeys()),this._app.localStorage.set("editorKeyMap",this.keyMap)}setOption(e,s){this.options.name=s;const i=`set${pt(e)}`;this[i]?this[i](s):this.editor.setOption(e,s)}onSubmit(){const e=this.getValue();this.element.get(0).dispatchEvent(new CustomEvent("texteditor:submit",{detail:e})),this.element.trigger("texteditor.submit",this,e)}getCursorLineStart(){return this.editor.getCursor("from").line}getCursorLineEnd(){return this.editor.getCursor("to").line}selectAllCurrentLines(){this.editor.setSelection(v.Pos(this.getCursorLineStart(),0),this.editor.getCursor("end"))}setTheme(e){this.editor.setOption("theme",e)}setMode(e,s){switch(e){case"nasm":s||(e="c");break;case"bf":case"lambdacalc":s||(e="javascript");break;case"shell":case"sql":s||(e="ruby");break}const i=Ee(this.config,e,"smartIndent",!0),n=Ee(this.config,e,"autoCloseBrackets",!0),r=Ee(this.config,e,"indentWithTabs",!1),o=Ee(this.config,e,"tabSize",jt(e)),c=At(e);Ct(this.editor,c==="agda"||c==="julia"),St(this.editor,c==="lambdacalc"),this.editor.setOption("mode",c),this.editor.setOption("tabSize",o),this.editor.setOption("indentUnit",o),this.editor.setOption("smartIndent",i),this.editor.setOption("autoCloseBrackets",n),this.editor.setOption("indentWithTabs",r)}setReadOnly(e){this.editor.setOption("readOnly",e)}setCursor(e=0,s=0){this.editor.setCursor(v.Pos(e,s))}scrollToLine(e=0){this.editor.scrollIntoView(v.Pos(e,0))}focus(){this.editor.focus()}getValue(){return this.editor.getValue()}_setValue(e){return e===""&&this.editor.setValue(" "),this.editor.setValue(e||"")}refresh(){const e=this.getValue();this.editor.setValue(""),this._setValue(e)}resize(){const e=this.element.parent();let s=this.fullScreenEnabled?a(window).height()-20:e.height();this.container.siblings().each(function(i,n){const r=a(n);r.css("position")==="static"&&r.is(":visible")&&(s-=r.outerHeight(!0))}),s>0&&this.setHeight(s)}setHeight(e,s){if(e<1)throw"height cannot be less than 1";this._setHeightWait!=null&&this._setHeightWait.reject(),!(s&&(s===!0&&(s=this.minHeight),e<s))&&(this.height=e,this.container.height(e),this.editor.setSize({width:"100%",height:Fi(this.height)}))}save(){this.textarea.val(this.getValue()),this.options.emptyStashOnSave&&this.emptyStash(),typeof this.options.save=="function"&&this.options.save(this)}change(e){this.editor.on("change",()=>e(this))}enterFullScreen(){this.fullScreenEnabled||(this.fullScreenEnabled=!0,this.options.enterFullScreen?this.options.enterFullScreen():(this.originalScroll=a(window).scrollTop(),this.originalParent=this.element.parent(),this.element.addClass("is-full-screen"),this.element.appendTo("#app"),this.resize()),this.element.find("li.shrink").show(),this.element.find("li.expand").hide(),a("#uvTab, #shell, #main_header, #main_footer, #intercom-container").hide(),a("html").addClass("has-full-screen-control"),this.focus())}exitFullScreen(){!this.fullScreenEnabled||(this.fullScreenEnabled=!1,this.options.exitFullScreen?this.options.exitFullScreen():(this.element.removeClass("is-full-screen"),this.element.appendTo(this.originalParent),this.element.height("")),setTimeout(()=>a(window).trigger("resize"),0),this.element.find("li.expand").show(),this.element.find("li.shrink").hide(),a("#uvTab, #shell, #main_header, #main_footer, #intercom-container").show(),a(window).scrollTop(this.originalScroll),a("html").removeClass("has-full-screen-control"),this.focus())}toggleFullScreen(){this.fullScreenEnabled?this.exitFullScreen():this.enterFullScreen()}setBorder(e){const s=this.element.find(".CodeMirror").removeClass(`has-${this.currentBorder}-border`);this.currentBorder=e,e&&s.addClass(`has-${e}-border`)}}R.prototype.events={"texteditor.change"(){this.updateStash(),this.options.change&&this.options.change(this),this.textarea.text(this.editor.getValue()),this.textarea!=null&&this.textarea.length>0&&(this.textarea.val(this.getValue()),this.textarea.get(0).dispatchEvent(new Event("input")))},"li.expand click"(){this.enterFullScreen()},"li.shrink click"(){this.exitFullScreen()},"window resize"(){this.resize()}};R.defaults={value:null,allowFullScreen:!0,tabSize:2,indentUnit:2,theme:null,mode:null,lineNumbers:!0,readOnly:!1,highlightActiveLine:!0,emptyStashOnSave:!1,save:null,change:null,stashGroup:"code_editor",successMessage:Ge,foldGutter:!0,lineWrapping:!1,styleActiveLine:!0,width:"100%",height:null,esc:null};const Ii=()=>{try{const t=localStorage.getItem("editorOptions");return t?JSON.parse(t):{}}catch{return{}}},Ee=(t,e,s,i)=>{const n=t[`[${e}]`];return n&&s in n?n[s]:s in t?t[s]:i},Fi=t=>typeof t=="number"?`${t}px`:t;class me extends w{constructor(e,s){super(e,s);this.emptyText=this.options.emptyText||this.element.html()||"",this.setLanguage(this.options.lang||this.options.language||this.element.data("language")||this._app.data.language),this.setMarkdown(this.options.markdown||this.element.data("markdown"))}setMarkdown(e){e==null&&(e=this.markdown),this.markdown=e,this.element.html(Ye(e||this.emptyText,this.lang)),this._processLinks()}setLanguage(e){this.lang=e,this.markdown&&this.setMarkdown()}_processLinks(){this.element.find("a").each((e,s)=>{s.target="_blank",a(s).on("click",i=>i.stopPropagation())})}}const Ye=(t,e)=>{var h,f,x,A;const s=ht.sanitize(ce(t,Object.assign({},Ri,{renderer:new Li({language:e})}))),i=document.createElement("div");i.innerHTML=s;const n=[],r=[];for(const _ of i.querySelectorAll("pre"))if(((f=(h=_.nextElementSibling)==null?void 0:h.tagName)==null?void 0:f.toUpperCase())==="PRE"||((A=(x=_.previousElementSibling)==null?void 0:x.tagName)==null?void 0:A.toUpperCase())==="PRE"){const y=_.querySelector("code[class^=language-]");if(y){const C=y.className.replace(/language-/,"");r.push(C),n.push([C,_])}}if(r.length===0)return i.innerHTML;const o=r[0],c=r.includes(e);for(const[_,y]of n)_!==e&&(c||_!==o)&&(y.style.display="none");return i.innerHTML},Tt=(t,e)=>t.replace(/^if(-not)?:/,"").split(",").includes(e),Ri={gfm:!0,breaks:!1,smartLists:!0,highlight:(t,e)=>je(t,e)};class Li extends ce.Renderer{constructor(e={}){let s="";e.language&&(s=e.language,delete e.language);super(e);this._language=s}codespan(e){if(e&&e.length>2&&e.startsWith("$")&&e.endsWith("$")){const s=Et(e.slice(1,-1));if(s)return s}return super.codespan(e)}code(e,s,i){if(s){if(/^if:/.test(s))return Tt(s,this._language)?ce(e,Object.assign({},this.options,{renderer:this})):"";if(/^if-not:/.test(s))return Tt(s,this._language)?"":ce(e,Object.assign({},this.options,{renderer:this}));if(s[0]==="%")return`<div class="block block--${s.substr(1)}">`+ce(e,Object.assign({},this.options,{renderer:this}))+"</div>";if(s==="math"){const n=Et(e);if(n)return`<div>${n}</div>`}}try{return super.code(e,s,i)}catch(n){return console.warn("Failed to highlight markdown code block",n.message),`<pre><code>${e}</code></pre>`}}}const Et=t=>Ws.renderToString(t,{throwOnError:!1});class oe extends w{constructor(e,s){super(e,s);const i=()=>{this.editor=new R(this.element.find(".text-editor-container"),{_app:this._app,mode:"markdown",theme:this.options.theme,lineNumbers:!1,lineWrapping:!0,stashGroup:this.options.stashGroup,value:this.options.originalValue,styleActiveLine:this.options.styleActiveLine,allowFullScreen:this.options.allowFullScreen,enterFullScreen:this.onEnterFullScreen.bind(this),exitFullScreen:this.onExitFullScreen.bind(this),smartIndent:!1,autoCloseBrackets:!1,change:()=>this.refresh(),extraKeys:{End:"goLineRight",Home:"goLineLeft"}}),this.previewDisplay=new me(this.element.find(".markdown").eq(0),{_app:this._app,emptyText:this.options.emptyPreviewText,language:this.options.language}),this._controllers.push(this.editor,this.previewDisplay),this.originalValue=this.options.originalValue||this.editor.getValue(),this.refreshHeight(),setTimeout(()=>this.updatePreview(),0),this.panels=[this.editor.element,this.previewDisplay.element],typeof this.ready=="function"&&this.ready()},n=()=>{this.options.alwaysVisible||this.element.is(":visible")?i():this.destroyed||setTimeout(n,500)};n()}focus(){this.editor.focus()}refreshHeight(e){e==null&&(e=this.options.editorHeight||this.element.height()),this.element.is(":visible")&&(this.fullScreenEnabled||this.editor.setHeight(e))}refresh(){this.updatePreview(),this.isDirty()?this.dirtyFired||(this.element.trigger("markdowneditor.dirty",this,this.getValue()),this.dirtyFired=!0):this.dirtyFired&&this.markClean()}isDirty(){return this.getValue()!==this.originalValue}markClean(){this.originalValue=this.editor.getValue(),this.dirtyFired=!1,this.element.trigger("markdowneditor.clean",this,this.getValue())}getValue(){return this.editor.getValue()}setValue(...e){this.editor.setValue(...e)}setStashId(e){this.editor.setStashId(e)}updatePreview(){this.previewDisplay.setMarkdown(this.getValue())}setLanguage(e){this.previewDisplay.setLanguage(e)}setTheme(e){this.editor.setTheme(e)}appendToParent(e){a(this).appendTo(e)}resize(){let e=a(window).height();this.fullScreenEnabled&&(e-=Object.values(this.element.css(["paddingTop","paddingBottom"])).reduce((i,n)=>parseInt(n,10),0));for(let s of this.panels)a(s).height(e);this.editor.resize()}onEnterFullScreen(){if(!this.fullScreenEnabled){this.fullScreenEnabled=!0,this.originalParents=[],this.originalHeight=this.editor.element.height(),this.fullScreenContainer().appendTo("#app").hide(),this.collapseLink().on("click",()=>this.editor.exitFullScreen());for(let e of this.panels)this.originalParents.push(e.parent()),e.addClass("is-full-screen").appendTo(this.fullScreenContainer());pe(this.fullScreenContainer().get(0)),setTimeout(()=>this.resize(),0)}}onExitFullScreen(){if(!!this.fullScreenEnabled){this.fullScreenEnabled=!1,this.editor.setHeight(this.originalHeight);for(let e=0;e<this.panels.length;e++)this.panels[e].removeClass("is-full-screen").height("").appendTo(this.originalParents[e]);this.fullScreenContainer().remove(),typeof this.options.exitFullScreen=="function"&&this.options.exitFullScreen()}}fullScreenContainer(){return this._fullScreenContainer||(this._fullScreenContainer=a('<div id="markdown_full_screen"></div>')),this._fullScreenContainer}collapseLink(){return this._collapseLink||(this._collapseLink=a('<a class="collapse-btn"><i class="icon-moon-collapse"></i>Exit Full Screen</a>').appendTo(this.fullScreenContainer())),this._collapseLink}}oe.prototype.events={".btn-expand click, .js-expand click"(t,e){e.preventDefault(),e.stopPropagation(),this.editor.enterFullScreen()}};oe.defaults={allowFullScreen:!0,emptyPreviewText:null,stashGroup:"markdown",language:null,styleActiveLine:!0,editorHeight:null,theme:null,alwaysVisible:!1};var Mi={agda:`{-# OPTIONS --safe #-}
module Test where

open import Example

check : {A : Set} {a b c : A} \u2192 a \u2261 b \u2192 b \u2261 c \u2192 a \u2261 c
check = _\u21C6_
`,bf:`// You can use the Mocha (JavaScript) framework for testing BF.
// TODO: replace with your own tests (TDD), these are just here to demonstrate usage.

describe("Your Test Suite", function () {
  it("should return Hello World!", function () {
    // use runBF() to run your program, you can pass it arguments
    Test.assertEquals(runBF(), "Hello World!");
  });
});
`,c:`// TODO: Replace examples and use TDD by writing your own tests. The code provided here is just a how-to example.

#include <criterion/criterion.h>

// replace with the actual method being tested
int foo(int,int);

Test(the_multiply_function, should_pass_all_the_tests_provided) {
    cr_assert_eq(foo(1, 1), 1);
}
`,cfml:`// https://testbox.ortusbooks.com/
component extends="CodewarsBaseSpec" {
    // Submitted solution is written to Solution.cfc
    function beforeAll(){
        SUT = createObject( 'Solution' );
    }

    function run(){
        describe( "Example", function(){
            it( "returns sum", function(){
                expect( SUT.add(1, 1) ).toBe( 2 );
            });
        });
    }
}
`,clojure:`;; TODO: TDD using clojure.test framework
`,cobol:`123456*8901
      * See https://github.com/codewars/cobol-test
       identification division.
       program-id. tests.

       data division.
       working-storage section.
       01  arg1        pic s9(5).
       01  arg2        pic s9(5).
       01  arg1-str    pic -9(5).
       01  arg2-str    pic -9(5).
       01  result      pic s9(6).
       01  expected    pic s9(6).

       procedure division.
      * Fixed Tests
           testsuite 'Fixed Tests'.
           testcase 'Test 1'.
           move 3 to arg1
           move -5 to arg2
           call 'solution' using
               by content arg1 arg2
               by reference result
           expect result to be -2.0.

      * Random Tests
           testsuite "Random Tests".
           perform set-random-seed
           perform 5 times
               compute arg1 = function random() * 199999 - 99999
               compute arg2 = function random() * 199999 - 99999
               move arg1 to arg1-str
               move arg2 to arg2-str
               testcase 'Testing ' arg1-str ' + ' arg2-str.
               add arg1 to arg2 giving expected
               call 'solution' using
                   by content arg1 arg2
                   by reference result
               expect result to be expected.
           end-perform

           end tests.

       end program tests.
`,coffeescript:`# Create your own tests here. These are some of the methods available:
#  Test.expect(boolean, [optional] message)
#  Test.assertEquals(actual, expected, [optional] message)
#  Test.assertSimilar(actual, expected, [optional] message)
#  Test.assertNotEquals(actual, expected, [optional] message)
`,commonlisp:`(in-package #:cl-user)
(defpackage #:challenge/tests/solution
  (:use #:cl
        #:rove
        #:challenge/solution))
(in-package #:challenge/tests/solution)
; Solution can be imported from \`challenge/solution\`.
; Optional preloaded package (\`challenge/preloaded\`) can be provided by kata authors.

; Write tests with Rove (https://github.com/fukamachi/rove).
; The use of \`testing\` is recommended for better output on Codewars.
(deftest test-solution
  (testing "add"
    (ok (= (add 1 1) 2))))
`,coq:`Require Solution.
Require Import Preloaded.
From CW Require Import Loader.

CWGroup "Solution.example".
  CWTest "should have the correct type".
    CWAssert Solution.example : (forall (A : Type) (a b c : A),
      a = b -> b = c -> a = c).
  CWTest "should be closed under the global context".
    CWAssert Solution.example Assumes.
CWEndGroup.
`,cpp:`// TODO: Replace examples and use TDD by writing your own tests

Describe(any_group_name_you_want)
{
    It(should_do_something)
    {
        Assert::That("some value", Equals("another value"));
    }
};
`,crystal:`# Spec example:
# TODO: replace with your own tests (TDD), these are just how-to examples.

describe "Solution" do
  it "should test something" do
     foo.should eq "bar"
  end
end
`,csharp:`namespace Solution {
  using NUnit.Framework;
  using System;

  // TODO: Replace examples and use TDD by writing your own tests

  [TestFixture]
  public class SolutionTest
  {
    [Test]
    public void MyTest()
    {
      Assert.AreEqual("expected", "actual");
    }
  }
}
`,d:`module solution_test;

import solution : add;

// fluent asserts is supported
version(unittest) import fluent.asserts;

// Name the unittest block
@("add returns the sum")
unittest {
    add(1, 1).should.equal(2).because("1 + 1 == 2");
    assert(add(1, 1) == 2);
}
`,dart:`// See https://pub.dartlang.org/packages/test
import "package:test/test.dart";
import "package:solution/solution.dart";

void main() {
  test("add", () {
    expect(add(1, 1), equals(2));
  });
}
`,elixir:`# TODO: Replace examples and use TDD by writing your own tests

defmodule TestSolution do
  use ExUnit.Case

  test "some test description" do
    assert "actual" == "expected"
  end
end
`,elm:`module ExampleTest exposing (..)
-- Codewars uses [elm-test](https://package.elm-lang.org/packages/elm-explorations/test/1.1.0).
-- Replace this with your own tests.

import Expect exposing (Expectation)
import Test exposing (..)

import Example

suite : Test
suite =
  describe "Example"
    [ test "add" <|
      \\_ -> (Example.add 1 1) |> Expect.equal 2
    ]
`,erlang:`% Test using EUnit (http://erlang.org/doc/apps/eunit/chapter.html)
% TODO: replace with your own tests (TDD), these are just here to demonstrate usage.
-module(example_tests).
-include_lib("eunit/include/eunit.hrl").

example_test_() ->
  {"Two Oldest Ages",
    [{"returns [45, 87] for [1,5,87,45,8,8]", ?_assertMatch([45, 87], [45])}]}.
`,factor:`! Use vocabulary tools.testest for testing.
! See https://github.com/codewars/testest

USING: example tools.testest ;
IN: example.tests

: run-tests ( -- )
  "Example" describe#{
    "test case" it#{
      <{ 1 1 example ->  1 }>
    }#
  }#
;

MAIN: run-tests
`,forth:`\\ ttester.fs with extension for Codewars
\\ See https://github.com/codewars/ttester-codewars

s" example" describe#{
  s" returns sum" it#{
    <{ 1 1 example -> 2 }>
  }#
}#
`,fortran:`! CW2 example
program TestCases
  use CW2
  use Solution
implicit none
  call describe("add")
    call it("adds integers")
      call assertEquals(2, add(1, 1))
    call endContext()
  call endContext()
end program
`,fsharp:`// Fuchu Spec example:
// TODO: replace with your own tests (TDD), these are just how-to examples.
// See https://github.com/mausch/Fuchu for documentation

module Tests = begin
    open Fuchu
    let suite =
        testList "Solution" [
            testCase "Example Test" <|
              fun _ -> Assert.Equal("2+2", 4, 2+2)
        ]
end
`,go:`// TODO: replace with your own tests (TDD). An example to get you started is included below.
// Ginkgo BDD Testing Framework <http://onsi.github.io/ginkgo/>
// Gomega Matcher Library <http://onsi.github.io/gomega/>

package kata_test
import (
  . "github.com/onsi/ginkgo"
  . "github.com/onsi/gomega"
  . "codewarrior/kata"
)
var _ = Describe("Test Example", func() {
//   It("should test that the solution returns the correct value", func() {
//     Expect(Solution(1)).To(Equal(2))
//   })
})
`,groovy:`// You can test using JUnit or Spock. JUnit is shown below
// TODO: replace this example test with your own, this is just here to demonstrate usage.
import org.junit.Test

class TestExample {
  @Test
  void returnsProduct() {
    assert Example.multiply(2, 2) == 4
  }
}
`,haskell:`module ExampleSpec where
-- Tests can be written using Hspec http://hspec.github.io/
-- Replace this with your own tests.

import Test.Hspec
import Example

-- \`spec\` of type \`Spec\` must exist
spec :: Spec
spec = do
    describe "add" $ do
        it "adds Nums" $ do
            (add 1 1) \`shouldBe\` (2 :: Integer)

`,haxe:`// Tests are written using https://github.com/haxe-utest/utest
import utest.Assert;
import Solution;

class SolutionTest extends utest.Test {
  function testExample() {
    Assert.equals(2, Example.add(1, 1));
  }
}
`,idris:`module ExampleSpec
-- Tests can be written using [specdris](https://github.com/pheymann/specdris)
-- \`specSuite : IO ()\` is required.

import Specdris.Spec
import Example

%access export
%default total

specSuite : IO ()
specSuite = spec $ do
  describe "add" $ do
    it "adds two natural numbers" $ do
      (1 \`add\` 1) \`shouldBe\` 2
`,java:`import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.assertEquals;

// TODO: Replace examples and use TDD by writing your own tests

class SolutionTest {
    @Test
    void testSomething() {
        // assertEquals("expected", "actual");
    }
}
`,javascript:`// Since Node 10, we're using Mocha.
// You can use \`chai\` for assertions.
const chai = require("chai");
const assert = chai.assert;
// Uncomment the following line to disable truncating failure messages for deep equals, do:
// chai.config.truncateThreshold = 0;
// Since Node 12, we no longer include assertions from our deprecated custom test framework by default.
// Uncomment the following to use the old assertions:
// const Test = require("@codewars/test-compat");

describe("Solution", function() {
  it("should test for something", function() {
    // Test.assertEquals(1 + 1, 2);
    // assert.strictEqual(1 + 1, 2);
  });
});
`,julia:`# FactCheck example:
# TODO: replace with your own tests (TDD), these are just how-to examples.
using FactCheck
facts("Testing basics") do
  @fact 1 --> 1
  @fact 2*2 --> 4
  @fact uppercase("foo") --> "FOO"
  @fact 2*[1,2,3] --> [2,4,6]
end
`,kotlin:`// You can test using JUnit or KotlinTest. JUnit is shown below
// TODO: replace this example test with your own, this is just here to demonstrate usage.

// TODO: replace with whatever your package is called
package solution

import kotlin.test.assertEquals
import org.junit.Test

class TestExample {
  @Test
  fun multiply() {
    assertEquals(4, multiply(2, 2))
  }
}
`,lambdacalc:`import { assert, LC, getSolution } from "./lc-test.js";

LC.configure({ purity: "Let", numEncoding: "Church", verbosity: "Concise" });
const { multiply } = LC.compile(getSolution());

describe("Multiply", () => {
  it("example tests", () => {
    assert.numEql( multiply(7)(7), 49 );
    assert.numEql( multiply(11)(11), 121 );
  });
});
`,lean:`import Preloaded Solution

theorem submission : SUBMISSION := immediate
#print axioms submission
`,lua:`-- TODO: Replace examples and use TDD by writing your own tests
local solution = require 'solution'
describe("solution", function()
  it("test for something", function()
    assert.are.same("expected", solution.foo())
  end)
end)
`,nasm:`; this is just an example. See https://docs.codewars.com/languages/nasm
#include <criterion/criterion.h>
int add(int, int);
Test(add_test, should_add_integers) {
  cr_assert_eq(add(1, 1), 2);
}
`,objc:`// TODO: replace with your own tests, these are just how-to examples.
// Codewars uses UnitKit unit testing framework.
// See https://docs.codewars.com/languages/objc/unitkit
@implementation TestSuite
- (void) testsIfReturnsActual
{
  UKStringsEqual(@"expected", Solution(@"value"));
  UKStringsNotEqual(@"expected", Solution(@"value"));
}
@end
`,ocaml:`(* TODO: replace with your own tests, these are just how-to examples.
 * OUnit Spec example:
 * See http://ounit.forge.ocamlcore.org/api-ounit-2.0.0 for documentation
 *)

module Tests = struct
    open OUnit
    let suite = [
        "Suite Name" >:::
            [
                "Test Name" >:: (fun _ ->
                    assert_equal "Expected" "Actual"
                )
            ]
        ]
    ;;
end
`,pascal:`unit ExampleTests;
// Tests are written with [FPTest](https://github.com/graemeg/fptest).

{$mode objfpc}{$H+}

interface

uses
  TestFramework,
  Example;

type TExampleTests = class(TTestCase)
  published
    procedure TestAdd;
end;

procedure RegisterTests;

implementation

procedure RegisterTests;
begin
  TestFramework.RegisterTest(TExampleTests.Suite);
end;

procedure TExampleTests.TestAdd;
begin
  CheckEquals(2, Add(1, 1));
end;
end.
`,perl:`# You can use \`Test::More\` to write tests.
# https://metacpan.org/pod/Test::More
# use strict;
# use warnings;
# use Test::More;
# \`Test::Most\` can be used to load commonly needed features.
# See https://metacpan.org/pod/Test::Most
use Test::Most;

# The name of the solution package is inferred from the code.
use Solution;

subtest "examples" => sub {
  is(Solution::add(1, 1), 2);
};

done_testing();
`,php:`<?php
use PHPUnit\\Framework\\TestCase;

// PHPUnit Test Examples:
// TODO: Replace examples and use TDD by writing your own tests
class ExampleTest extends TestCase
{
    // test function names should start with "test"
    public function testThatSomethingShouldHappen() {
      $this->assertEquals("a", "a");
      $this->assertEquals([0], [0]);
    }
}
`,powershell:`# You can test with Pester (https://github.com/pester/Pester)
# TODO: replace with your own tests (TDD), these are just here to demonstrate usage.
$Results = answer_to_life @(4,2)

Describe 'My Solution' {
  It 'Should return 42' {
    $Results[0] | Should be 42
  }
}
`,prolog:`% plunit can be used to test solution
:- begin_tests(example).
:- include(example).

test(example_test) :-
        X is 1+1,
        assertion(X == 2).

:- end_tests(example).
`,purescript:`module ExampleSpec where
-- Tests can be written using spec https://purescript-spec.github.io/purescript-spec
-- Replace this with your own tests.

import Prelude

import Test.Spec (Spec, describe, it)
import Test.Spec.Assertions (shouldEqual)

import Example (add')

spec :: Spec Unit
spec =
  describe "Example" do
    describe "add'" do
      it "returns sum" do
        (add' 1 1) \`shouldEqual\` 2
`,python:`import codewars_test as test
# TODO Write tests
import solution # or from solution import example

# test.assert_equals(actual, expected, [optional] message)
@test.describe("Example")
def test_group():
    @test.it("test case")
    def test_case():
        test.assert_equals(1 + 1, 2)
`,r:`# You can test with testthat (http://r-pkgs.had.co.nz/tests.html#test-structure)
# TODO: replace with your own tests (TDD), these are just here to demonstrate usage.

test_that("example", {
  expect_equal(actual, expected)
})
`,racket:`#lang racket
(require "solution.rkt")
(require rackunit
         codewars/rackunit)

;; codewars/rackunit provides \`run-tests\`.
;; See RackUnit documentation. https://docs.racket-lang.org/rackunit
(run-tests
  (test-suite
   "example"
   (test-case
    "add"
    (check-equal? (add 1 1) 2))))
`,raku:`use v6;
# You can write tests using the standard Test module.
# https://docs.raku.org/language/testing
use Test;
# The name of the solution module is inferred from the code.
use Solution;

subtest "examples", {
    is(add(1, 1), 2);
}
done-testing;
`,reason:`/* You can write tests using Jest.
 * See https://github.com/glennsl/bs-jest
 * Replace with your own tests.
 */
open Jest;

describe("add", () => {
  open Expect;
  test("1 + 1", () =>
    expect(Solution.add(1, 1)) |> toBe(2));
});
`,ruby:`# From Ruby 3.0, RSpec is used under the hood.
# See https://rspec.info/
# Defaults to the global \`describe\` for backwards compatibility, but \`RSpec.desribe\` works as well.
describe "Example" do
  it "should return the sum" do
    expect(add(1, 1)).to eq(2)
    # The following is still supported, but new tests should now use them.
    # Test.assert_equals(add(1, 1), 2)
  end
end
`,rust:`// Add your tests here.
// See https://doc.rust-lang.org/stable/rust-by-example/testing/unit_testing.html

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_add() {
        assert_eq!(add(1, 2), 3);
    }
}
`,scala:`// You can test using ScalaTest (http://www.scalatest.org/).
import org.scalatest.flatspec.AnyFlatSpec
import org.scalatest.matchers.should.Matchers

// TODO: replace this example test with your own, this is just here to demonstrate usage.
// See http://www.scalatest.org/ to learn more.
class ExampleSpec extends AnyFlatSpec with Matchers {
  "multiply(2, 2)" should "return 4" in {
    Example.multiply(2, 2) should be (4)
  }
}
`,shell:`# TODO: replace with your own tests (TDD). An example to get you started is included below.

# run the solution and store its result
# output = run_shell args: ['my_arg']

# describe "Solution" do
#   it "should return the argument passed in" do
#     expect(output).to include('my_arg')
#   end
# end
`,solidity:`// You can test using JavaScript/Truffle
// TODO: replace this example test with your own, this is just here to demonstrate usage.

const Example = artifacts.require("ExampleToken");
contract('Example', function(accounts) {
  it("should put 10000 in the first account", async function() {
    const m = await Example.deployed();

    const balance = await m.balanceOf.call(accounts[0]);
    assert.equal(balance.valueOf(), 10000, "10000 wasn't in the first account");
  });
});
`,sql:`# TODO: replace with your own tests (TDD), these are just how-to examples to get you started.

# Ruby/Rspec/Sequel Example:
# While the code section is pure SQL, for testing we use Ruby & Rspec.
# Sequel (https://github.com/jeremyevans/sequel) is used to setup the database and run queries.
# The connection is already made for you, use DB to access.

DB.create_table :items do
  primary_key :id
  String :name
  Float :price
end

items = DB[:items] # Create a dataset

# Populate the table
items.insert(:name => 'a', :price => 10)
items.insert(:name => 'b', :price => 35)
items.insert(:name => 'c', :price => 20)

# calling run_sql will print the results and return them so that you can test data within them.
# if you want to test different sets of data, then its best to move this code into its own top level describe
# block. If you are only testing one set though, its better to set the results before you enter a describe block
# so that the results are presented at the top of the output.
results = run_sql

describe :items do
   it "should return 3 items" do
    expect(results.count).to eq 3
   end
end

# Other tips about using run_sql:
# The SQL/code section supports multiple statements, seperated of course by a ";".
# When multiple SELECT statements are issued:
#    run_sql will return an array of arrays, unless only one SELECT statement returned results
#    INSERT and UPDATE results will not be included in the list
#    SELECT statements that return no results will not be included in the list
`,swift:`import XCTest
// XCTest Spec Example:
// TODO: replace with your own tests (TDD), these are just how-to examples to get you started

class SolutionTest: XCTestCase {
    static var allTests = [
        ("Test Example", testExample),
    ]

    func testExample() {
        let actual = 1
        XCTAssertEqual(actual, 1)
    }
}

XCTMain([
    testCase(SolutionTest.allTests)
])
`,typescript:`// See https://www.chaijs.com for how to use Chai.
import { assert } from "chai";

import { example } from "./solution";

// TODO Add your tests here
describe("example", function() {
  it("test", function() {
    // assert.strictEqual(1 + 1, 2);
  });
});
`,vb:`Imports NUnit.Framework

<TestFixture>
Public Class AdderTest
    <Test>
    Public Sub ShouldAddInts()
        Assert.AreEqual(2, Adder.Add(1, 1))
    End Sub
End Class
`};class le extends R{constructor(e,s){super(e,s)}emptyCodeMsg(){return he(["Code is missing!","Where is the code?","Why you no send me any code?","Present must your code be before run it we can","Code is missing that is why you fail","Code you must!","Feed me code!","Where did the code go?","Some code would be nice...","There seems to be a lack of code going on here","The idea here would be to code something...","Well this isn't going very well. We need some code..."])}defaultFixtureText(e){return Mi[e]}}le.prototype.events=Object.assign({},R.prototype.events);le.defaults=Object.assign({},R.defaults);class Je extends Be{configureDisabled(e){if(e.element.parent(".is-disabled").length>0){const s=e.element.find("input");s.addClass("is-disabled"),s.attr("disabled",!0)}}configureMarkdownField(e,s){const i=e.element.find(".markdown-editor"),n=new oe(i,Object.assign({},s||{},{_app:this._app}));n.ready=function(){e.element.parent(".is-disabled").length>0&&n.editor.setReadOnly(!0)},i.on("texteditor.change",()=>{e.element.data("context").value=n.getValue()}),i.data("editor",n),i.addClass("js-markdown-editor")}configureCodeEditorField(e,s){const i=new le(e.element,Object.assign({},s||{},{_app:this._app}));e.element.on("texteditor.change",()=>{e.element.data("context").value=i.getValue()}),e.element.data("editor",i),e.element.addClass("js-code-editor")}}Je.prototype.filters={field_class(t){let e="field";return t.context.id&&(e+=` ${t.context.id}`),t.includeData.required&&(e+=" required"),t.context.errors&&t.context.errors.length>0&&(e+=" has-error"),e},field_value_class(t){let e="field";return t.context.errors&&t.context.errors.length>0&&(e+=" has-error"),e}};Je.prototype.renderEvents={view(){this.element.find("select").each((t,e)=>{const s=a(e);s.attr("value")&&s.val(s.attr("value"))})},hidden_field(t){t.element.on("change",function(){t.element.data("context").value=a(this).val()})},input_field(t){t.element.find("input").on("change, keyup",function(){t.element.data("context").value=a(this).val()}),this.configureDisabled(t)},checkbox_field(t){t.element.find("input").on("change",function(){t.element.data("context").value=a(this).is(":checked")}),this.configureDisabled(t)},markdown_field(t){this.configureMarkdownField(t)},code_editor_field(t){this.configureCodeEditorField(t)}};const Ae=t=>a("view").each((e,s)=>{const i=a(s);if(!i.data("view")&&i.closest("template").length===0){const n=Vi(i.data("view-type"));new n(i,{_app:t})}}),Vi=t=>{switch(t){case"FormView":return Je;default:return Be}},At=t=>{if(!t||/^if(?:-not)?:/.test(t))return"text/plain";switch(t){case"bash":case"shell":return"shell";case"bf":return"text/x-brainfuck";case"c":return"text/x-c";case"cpp":return"text/x-c++src";case"cfml":return"javascript";case"csharp":return"text/x-csharp";case"sql":return"text/x-pgsql";case"solidity":case"typescript":return"application/typescript";case"php":return"text/x-php";case"scala":return"text/x-scala";case"java":return"text/x-java";case"objc":return"text/x-objectivec";case"kotlin":return"text/x-kotlin";case"racket":return"scheme";case"lisp":case"commonlisp":return"text/x-common-lisp";case"ocaml":return"text/x-ocaml";case"fsharp":return"text/x-fsharp";case"nim":return"text/x-nim";case"python":case"python3":return"python";case"purescript":case"idris":return"text/x-haskell";case"elm":return"text/x-elm";case"perl6":case"raku":return"text/x-perl6";case"d":return"text/x-d";case"factor":return"text/x-factor";case"forth":return"text/x-forth";case"coq":return"text/x-coq";case"vb":return"text/x-vb";case"prolog":return"text/x-prolog";case"lean":return"agda";case"math":case"latex":return"text/x-latex";case"cobol":return"text/x-cobol";case"haxe":return"text/x-haxe";case"json":return"application/json";default:return t}},jt=t=>{switch(t){case"kotlin":case"python":case"python3":case"rust":case"vb":case"cfml":case"raku":case"perl":case"d":return 4;default:return 2}},q=function(t){t==null&&(t=a("body")),t.find("code").each(function(e,s){const i=a(s);if(i.data("highlighted")||!i.html())return;let n=i.data("language")||i.parent().attr("lang");!n&&/lang(?:uage)?-/.test(i.attr("class")||"")&&(n=i.attr("class").split(" ")[0].replace(/lang(?:uage)?-/,""));const r=je(i.text(),n);r&&(i.html(r),i.data("highlighted",!0))})},je=function(t,e){try{const s=Ui(t)?"text/plain":At(e),i=document.createElement("div");return v.runMode(t,s,i,{tabSize:jt(e)}),i.innerHTML}catch(s){console.warn(`Failed to highlight: ${s.message}`),console.warn(s)}},Ni=function(t,e){const s=document.createElement("div");return s.innerHTML=t,je(s.textContent,e)},Ui=t=>{const e=t.split(`
`);return e.length>2e3||e.some(s=>s.length>500)},Xe="[data-tippy-content]",_e=()=>{for(const t of document.querySelectorAll(Xe))t._tippy||Bs(t,{delay:[400,0],theme:"codewars",arrow:Ks})},Ze=()=>window.requestAnimationFrame(()=>{for(const t of document.querySelectorAll(Xe))t._tippy&&t._tippy.hide()}),Pi=()=>{for(const t of document.querySelectorAll(Xe))t._tippy&&t._tippy.destroy()},z=()=>a(window).trigger("resize"),J=(t,e)=>{const[s,i]=$t(t,e);return document.addEventListener("turbolinks:visit",i,{once:!0}),typeof t=="string"&&window.location.host.includes("localhost")&&console.debug(`${t} state`,s),s},$t=(t,e)=>{const s=typeof t=="string"?document.querySelector(t):t;if(!s)throw new Error(`${t} not found`);const i=Gs(e),n=s.outerHTML,r=Ys(i).mount(s);return[i,()=>{r.unmount(),s.parentNode&&(s.outerHTML=n)}]},Ot=(t,e)=>{var n,r;const s=((n=window.location.hash.match(/^#label-(issue|enhancement|question)$/))==null?void 0:n[1])||"all",i=(r=window.location.hash.match(/^#([a-f\d]{24})$/))==null?void 0:r[1];return J(t,te(O({loading:!0,activeId:i,labelFilter:s,stateFilter:"all"},e),{setLabelFilter(o){this.labelFilter=o},setStateFilter(o){this.stateFilter=o},onCommentCreated(o){this.comments.unshift(o.detail)},onCommentRemoved(o){const c=this.comments.findIndex(h=>h.id===o.detail);c!==-1&&this.comments.splice(c,1)},NewComment:Hi,CommentItem:zi,CommentEditor:qi}))},Dt=async t=>{if(!t)return null;try{const s=(await d.get(t)).data;return s.success?s.votes:null}catch(e){return console.error("Request to get user's comment votes failed",e),null}},X=async t=>{const e=document.querySelectorAll("[v-scope].comments-list-component"),s=await Promise.all([...e].map(async i=>{const n=i.dataset.viewData,r=n?JSON.parse(n):{};return r.votes=await Dt(r.userVotesUrl)||t.data.votes||{},[i,r]}));for(const[i,n]of s)Ot(i,O({_app:t,currentUser:t.currentUser,appData:t.data,getRoute:t.route.bind(t),alerts:t.alerts},n))},Hi=t=>te(O({$template:"#comment-new-template",active:!1,user:null},t),{get blockedNew(){var e;return!this.appData.created_by_id||!((e=this.currentUser)==null?void 0:e.blocked_by_user_ids)?!1:this.currentUser.blocked_by_user_ids.includes(this.appData.created_by_id)},get guestUserView(){const e=this.currentUser;return!e.id||e.guest},onCanceled(){this.active=!1},onCreated(e){this.active=!1,this.$refs.self.dispatchEvent(new CustomEvent("comment:created",{detail:e.detail}))}}),qi=t=>te(O({$template:"#comment-editor-template",id:"",active:!1,isPosting:!1,user:null,markdown:"",markResolved:!1,masked:!1,nest_level:0,parent:null,label:"",label_text:"No Label"},t),{editor:null,initEditor(){!this.guestUserView&&!this.editor&&(this.editor=new oe(this.$refs.markdown,{_app:this._app,styleActiveLine:!1,editorHeight:135,alwaysVisible:!0})),this.editor&&setTimeout(()=>this.editor.focus(),100),this.active=!0,this.$refs.markdown.scrollIntoView({block:"center",inline:"nearest"})},get blockedNew(){var e;return!this.appData.created_by_id||!((e=this.currentUser)==null?void 0:e.blocked_by_user_ids)?!1:this.currentUser.blocked_by_user_ids.includes(this.appData.created_by_id)},get guestUserView(){const e=this.currentUser;return!e.id||e.guest},get adminView(){var e;return((e=this.currentUser)==null?void 0:e.role)==="admin"},get labelsAllowed(){var e;return this.nest_level===0&&((e=this.allowedLabels)==null?void 0:e.length)>0},get postLabel(){return this.id?"Update":this.nest_level===1?"Reply":"Post"},get labelText(){var e,s;return(s=(e=this.parent)==null?void 0:e.label_text)==null?void 0:s.toLowerCase()},canResolve(){var e,s,i;return!this.currentUser||!((e=this.parent)==null?void 0:e.is_resolvable)?!1:((i=(s=this.parent)==null?void 0:s.allowed_resolver_ids)==null?void 0:i.includes(this.currentUser.id))||this.adminView||this.currentUser.can_resolve_comments},cancel(){this.active=!1,this.$refs.self.dispatchEvent(new CustomEvent("edit:canceled"))},post(){this.markResolved?this.markCommentClosed():this.saveComment()},commentData(){var e,s,i;return{markdown:this.markdown,masked:this.masked,label:(i=(s=(e=this.$refs.dropdown)==null?void 0:e.querySelector("dd.is-active"))==null?void 0:s.dataset)==null?void 0:i.value,hideSpoilers:this.hideSpoilers}},markCommentClosed(){if(this.isPosting)return;const e=this.getRoute(this.commentUrl,{comment_id:this.parentCommentId})+"/close";(this.markdown||this.adminView)&&this.addNewComment(e,this.commentData())},saveComment(){if(!this.markdown||this.isPosting)return;const e=this.commentData();this.parentCommentId&&(e.parent_comment_id=this.parentCommentId);const s=this.getRoute(this.commentUrl,{comment_id:this.id||""});this.id?this.updateComment(s,e):this.addNewComment(s,e)},updateComment(e,s){this.isPosting=!0,d.put(e,s).then(i=>{const n=i.data;n.success&&this.$refs.self.dispatchEvent(new CustomEvent("edit:updated",{detail:n.comment})),this.isPosting=!1}).catch(i=>{this.isPosting=!1,be.call(this,i)})},addNewComment(e,s){this.isPosting=!0,d.post(e,s).then(i=>{const n=i.data;n.success&&(this.parentCommentId?this.$refs.self.dispatchEvent(new CustomEvent("edit:replied",{detail:n.comment})):this.$refs.self.dispatchEvent(new CustomEvent("edit:created",{detail:n.comment}))),this.isPosting=!1}).catch(i=>{this.isPosting=!1,be.call(this,i)})}}),zi=t=>{var s;const e=((s=t.comments)==null?void 0:s.find(i=>i.id===t.activeId))!=null;return te(O({$template:"#comment-item-template",editing:!1,replying:!1,parent:null,show_solutions:!1,solutions:null,fetchSolutionsError:""},t),{collapsed:t.collapsed&&!e,voting:!1,CompareSolution:Wi,toggleCommenterSolutions(){this.show_solutions?(this.show_solutions=!1,this.fetchSolutionsError=""):this.solutions?(this.fetchSolutionsError="",this.show_solutions=!0,setTimeout(()=>q(),50)):d.post(this.getRoute("user_solution",{userId:this.user_id})).then(i=>{const n=i.data;this.solutions=[n],this.show_solutions=!0,setTimeout(()=>q(),50)}).catch(i=>{this.fetchSolutionsError="Failed to get solutions",this.show_solutions=!0})},flagComment(){const i=this.getRoute(this.commentUrl,{comment_id:this.id})+"/flag";d.post(i,{type:"mask"}).then(n=>{const r=n.data;r.success?(this.alerts.success(`Successfully ${r.verb} comment`),r.comment?Object.assign(this,r.comment):this.masked=r.flagged):this.alerts.fail(r.reason||r.message||"Was unable to flag comment. Try again later.")}).catch(n=>{be.call(this,n)})},showSpoiler(){const i=this.getRoute(this.commentUrl,{comment_id:this.id})+"/content";this.markdown="<i>Loading...</i>",d.get(i).then(n=>{const r=n.data;this.markdown=r.markdown,this.markdown_html=r.markdownHtml}).catch(n=>{be.call(this,n)})},get masked_flag_title(){return this.masked?"Un-flag this comment as having spoilers within it.":"Flag this comment as a spoiler. It will be hidden from users who have not yet solved the kata."},get isBlocked(){var n;return(((n=this.currentUser)==null?void 0:n.blocked_user_ids)||[]).includes(this.user_id)},get noMarkdown(){return!(this.masked||this.markdown)},get hideContent(){return this.masked&&!this.markdown},get guestUserView(){const i=this.currentUser;return!i.id||i.guest},get adminView(){var i;return((i=this.currentUser)==null?void 0:i.role)==="admin"},get moderatorView(){var i,n;return((i=this.currentUser)==null?void 0:i.role)==="admin"||((n=this.currentUser)==null?void 0:n.role)==="moderator"},get ownComment(){return this.user_id===this.currentUser.id},get blockedNew(){var i;return!this.appData.created_by_id||!((i=this.currentUser)==null?void 0:i.blocked_by_user_ids)?!1:this.currentUser.blocked_by_user_ids.includes(this.appData.created_by_id)},get hasReplies(){var i;return((i=this.comments)==null?void 0:i.length)>0},get replyAllowed(){return!this.blockedNew&&this.nest_level===0&&(!this.hideContent||this.adminView||this.ownComment||this.hasReplies)},get canEdit(){return this.ownComment&&!this.hasReplies||this.adminView},get canRemove(){const i=this.nest_level===0&&this.canEdit;return!this.type&&(i||this.moderatorView)},get labelTagClass(){if(this.is_resolvable)switch(this.label){case"issue":return"issue-label";case"question":return"question-label";default:return"is-lightened"}else return"is-low-light"},expand(){this.collapsed=!1},collapse(){this.collapsed=!0},reply(){this.collapsed=!1,this.replying=!0},toChild(){return{id:this.id,label_text:this.label_text,allowed_resolver_ids:this.allowed_resolver_ids,is_resolvable:this.is_resolvable,comments:this.comments}},onUpdated(i){Object.assign(this,i.detail),this.editing=!1},onReplied(i){Object.assign(this,i.detail),this.replying=!1},remove(){this._app.confirmModal.show({messageHtml:"You sure you want to remove this comment?",confirm:()=>{d.delete(this.getRoute(this.commentUrl,{comment_id:this.id})).then(i=>{if(i.data.success)if(this.nest_level>0){const r=this.parent.comments.findIndex(o=>o.id===this.id);this.parent.comments.splice(r,1)}else this.$refs.self.dispatchEvent(new CustomEvent("comment:removed",{detail:this.id}))}).catch(i=>{be.call(this,i)})}})},vote(i){this.voting||(this.voting=!0,d.post(this._app.route(this.voteUrl,{refId:this.id,value:i})).then(n=>{const r=n.data;r.success&&(this.votes[this.id]=i,this.votes_score=r.score),this.voting=!1}))}})},Wi=t=>O({$template:"#compare-solution-template",solution:null,denied:!1},t);function be(t){t.response?t.response.status===401?this._app.alerts.fail("Unauthorized: "+t.response.data.reason.replace(/^User .+:/,"").trim()):this._app.alerts.fail(t.response.data.reason):t.request?this._app.alerts.fail("No response was received. Please try again."):this._app.alerts.fail(t.message||"Unknown Error")}class Bi extends w{constructor(e,s){super(e,s);X(this._app)}}class Ki extends w{constructor(e,s){super(e,s);X(this._app)}}class Gi extends w{constructor(e,s){super(e,s);X(this._app)}}class $e extends w{constructor(e,s){super(e,s);var i,n;if(this.descriptionShown=!1,this.fixtureShown=!1,document.querySelector("#vote_feedback")){const r=this._app.data;this.voteFeedback=J("#vote_feedback",{canVote:(i=r.permissions)==null?void 0:i.vote,canAssessRank:(n=r.permissions)==null?void 0:n.assess_rank,completedKata:r.completedKata,vote:r.vote,assessedRank:r.assessed_rank,setVote(o){this.vote=o},setAssessedRank(o){this.assessedRank=o}})}}postVote(e,s){e.closest("ul").addClass("is-disabled").find("li.is-active").removeClass("is-active"),d.post(this._app.route("challenge_vote"),{vote:s}).then(i=>{const n=i.data;e.closest("ul").removeClass("is-disabled"),n.success?(this._app.data.vote=n.vote,this.voteFeedback.setVote(this._app.data.vote)):this._app.alerts.fail(n.message||"Failed to cast vote, please try again later")})}isDiscussView(){return a("body").hasClass("discuss_view")}}$e.prototype.events={"#toggle_description a click"(t){this.descriptionShown?(V(a("#description_panel").get(0)),this.descriptionShown=!1,t.text("Show Kata Description")):(this.descriptionMarkdown||(this.descriptionMarkdown=new me("#description",{_app:this._app,language:this._app.data.activeLanguage}),this.descriptionMarkdown.setMarkdown(this._app.data.description),this._controllers.push(this.descriptionMarkdown)),I(a("#description_panel").get(0)),this.descriptionShown=!0,t.text("Hide Kata Description"))},"#toggle_fixture a click"(t){t.text()==="Hide Kata Test Cases"?(V(a("#fixture_panel").get(0)),t.text("Show Kata Test Cases"),this.fixtureShown=!1):(I(a("#fixture_panel").get(0)),t.text("Hide Kata Test Cases"),this.fixtureShown=!0)},"#show_beta_about a click"(){V(a("#show_beta_about").get(0)),I(a("#beta_about").get(0))},"ul.vote-assessment li:not(.is-disabled) click"(t,e){let s=t.data("value");(s===this._app.data.vote||s===1&&this._app.data.vote>0)&&(s=null),this.postVote(t,s)},".assessment-ranks .ranks li click"(t){t.closest(".assessment-ranks").find("li.is-active").removeClass("is-active");let e=t.data("rank");e===this._app.data.assessed_rank&&(e=null),d.post(this._app.route("assess_rank"),{rank:e}).then(s=>{const i=s.data;i.success?(this._app.data.assessed_rank=e,this.voteFeedback.setAssessedRank(this._app.data.assessed_rank)):this._app.alerts.fail(i.message||"Failed to cast vote, please try again later")})}};const Yi=t=>t.replace(/[&<>]/g,e=>`&${e==="&"?"amp":e==="<"?"lt":"gt"};`);class Qe extends w{constructor(e,s){super(e,s)}}Qe.prototype.events={".js-compare-solutions click"(t){const e=t.closest(".js-result-group, .js-solution-group").find(".js-compare");if(e.is(":visible"))V(e.get(0)),t.removeClass("is-red-text");else{if(t.addClass("is-red-text"),!e.html()){let s;if(this._app.data.solution){const i=Yi(this._app.data.solution);s=`<pre class="p-2 overflow-x-auto"><code data-language=${this._app.data.activeLanguage}>${i}</code></pre>`}else s='<p class="bg-k-40 mb-0 p-2"><i class="icon-moon-info"></i>There is no solution to show</p>';e.html(`<div class="my-4">${s}</div>`),q(e)}I(e.get(0))}Ze()}};const N=t=>{const e=document.createElement("script");e.innerHTML=t,document.body.appendChild(e)},et=t=>{document.addEventListener("turbolinks:request-start",e=>{e.data.xhr.setRequestHeader("X-Refreshed","true")},{once:!0}),g.visit(t)};class tt extends w{constructor(e,s){super(e,s);this.updateVotes()}updateVotes(e){e==null&&(e=this._app.data&&this._app.data.label_votes),!!e&&e.forEach(s=>{const i=this.element.find(`[data-vote-ref-id='${s.refId}']`);i.length!==0&&s.labels.forEach(n=>{i.find(`.vote-label[data-label='${n}']`).addClass("is-voted")})})}}tt.prototype.events={"#app infinitescrollcontent"(){this.updateVotes()},"a.vote-label click"(t,e){const s=t.closest(".vote-labels"),i={refId:s.data("vote-ref-id"),label:t.data("label")},n=s.closest("[data-labels-vote-url]").data("labels-vote-url")||"label_vote",r=this._app.route(n,i);t.hasClass("is-voted")?d.delete(r).then(o=>{const c=o.data;c.success&&(t.removeClass("is-voted"),t.find("span").html(c.totalVotes))}):d.post(r).then(o=>{const c=o.data;c.success&&(t.find("span").html(c.totalVotes),s.find(".is-voted").trigger("click"),t.addClass("is-voted"))})}};class It extends w{constructor(e,s){super(e,s);X(this._app).then(()=>{this._controllers.push(new tt(a("#app"),{_app:this._app}))});const i=new $e(this.element,{_app:this._app}),n=new Qe(this.element,{_app:this._app});this._controllers.push(i,n)}}It.prototype.events={".js-unlock-solutions click"(t){d.post(this._app.route("unlock_solutions"),{},{responseType:"text"}).then(e=>{N(e.data)})},".js-unlock-test-cases click"(t){d.post(this._app.route("unlock_test_cases"),{},{responseType:"text"}).then(e=>{N(e.data)})}};const Ji=20;class Ft extends w{constructor(e,s){super(e,s);this.src="",this.connection=null,this.connectionDestroyed=!1,this.darkMode=this._app.darkMode;const i=this.element.data("src");i&&this.connect(this.darkMode?i:i.replace("theme=dark","theme=day"))}destroy(){this.destroyConnection(),g.clearCache(),super.destroy()}connect(e){this.src=e;const s=this.element.get(0),i=s.cloneNode();this.element=a(i),this.element.attr("src",e),this.connection=Js({timeout:Ji*1e3,iframe:i,methods:{onReady:()=>{},onReceipt:n=>{this.element.trigger("message.notifyReceipt",n)},authorize:async()=>{try{return(await d.post("/api/v1/runner/authorize")).data.token}catch(n){ie(n,{response:n.response&&n.response.data}),this._app.alerts.fail("Authorization Failed")}}}}),this.connectionDestroyed=!1,s.parentNode.replaceChild(i,s)}async run(e){if(!this.connection)return;this.request=e;const s=await this.getChild();if(!!s){this.element.show();try{const i=await s.run(e);i.result?(this.response=i.result,this.element.trigger("message.notifyResponse",this.response)):i.error&&Ve(i.error)}catch(i){if(i.code===se.ConnectionDestroyed&&this.connectionDestroyed)return;ie(i),console.error(i)}}}async display(e){if(!this.connection)return;const s=await this.getChild();if(!!s)try{s.display(e)}catch(i){if(i.code===se.ConnectionDestroyed&&this.connectionDestroyed)return;ie(i),console.error(i)}}expand(){if(this.expanded)return;const e=this.element.data("expand");!e||(this.connect(e),this.expanded=!0)}async setTheme(e){if(!this.connection||this.darkMode===e)return;this.element.show();const s=await this.getChild();if(!!s)try{s.setOptions({theme:e?"night":"day"}),this.darkMode=e}catch(i){if(i.code===se.ConnectionDestroyed&&this.connectionDestroyed)return;ie(i),console.error(i)}}async getChild(){if(!this.connection)return null;try{return await this.connection.promise}catch(e){if(e.code===se.ConnectionDestroyed)return this.connectionDestroyed||(ie(e),console.error(e)),null;if(e.code===se.ConnectionTimeout){if(this.connectionDestroyed)return null;Ve("Runner frame connection timed out");const s=new URL(this.src),i=`${s.protocol}//${s.host}`;return this.onConnectionFailure({title:"Connection Timed Out",content:["<p>Timed out while loading the runner frame.</p>","<p>Please verify that nothing is preventing access to",`<a class="underline" href="${i}" target="_blank" rel="noopener">${i}</a>,`,"such as ad-blockers or firewall rules.</p>"].join(" ")})}return ie(e),console.error(e),this.onConnectionFailure({title:"Unknown Failure",content:["<p>Unexpected error occured while connecting to the runner frame.","If the problem persists, please let us know any details by opening an issue on",'<a class="underline" href="https://github.com/codewars/codewars.com" target="_blank" rel="noopener">GitHub</a>.</p>'].join(" ")})}}destroyConnection(){if(!!this.connection){try{this.connection.promise.catch(()=>{}),this.connection.destroy()}catch(e){if(e.code!==se.ConnectionDestroyed)throw e}this.connection=null,this.connectionDestroyed=!0,this.unloadFrame()}}unloadFrame(){const e=this.element.get(0);e.removeAttribute("src");const s=e.cloneNode();e.parentNode.replaceChild(s,e),this.element=a(s)}reconnect(){this.destroyConnection(),this.connect(this.src)}async onConnectionFailure({title:e,content:s}){const i=document.createElement("div");switch(i.innerHTML=s,await M({title:e,content:i,icon:"error",buttons:{reconnect:!0}})){case"reconnect":return this.reconnect(),this.getChild();default:return null}}}class we extends w{constructor(e,s){super(e,s);this.runner=new Ft(this.element.find("iframe"),{_app:this._app}),this.runner.setTheme(this._app.darkMode),this._controllers.push(this.runner),!!this.options.box&&(this.box=new ge(this.element,{successMessage:this.options.successMessage,failMessage:this.options.failMessage,warnClassName:"info",displayDuration:0,showClose:this.options.showClose}),this._controllers.push(this.box))}showStatus(e){!this.box||!this.runner.request||(this.runner.request.fixture&&this.runner.request.fixture!==""?this.box.showResult(e,null,0):this.box.warn("No tests cases provided",0))}}we.prototype.events={"iframe message.notifyResponse"(){this.showStatus(this.runner.response&&this.runner.response.result&&this.runner.response.result.completed)},"#app dark-mode-toggled"(t,e,s){this.runner.setTheme(s)}};we.defaults={showClose:!1,successMessage:Ge,failMessage:Oi,box:!0};class Z extends w{constructor(e,s){super(e,s)}showRunResult(e){let s=e.closest(".run-result");s.length===0&&(s=e.closest(".panel").find(".run-result")),s.removeClass("is-hidden"),this.result=s.data("runResult"),this.panel=new we(s,{_app:this._app,box:!1}),this.panel.runner.expand(),this._controllers.push(this.panel),setTimeout(()=>{this.panel.runner.display(this.result)},500);const i=this.result.output||this.result.response&&this.result.response.result&&this.result.response.result.output;i&&this.panel.runner.element.height(Math.min(i.length*30+200,400))}}Z.prototype.events={".code-snippet-list-item.is-collapsed click"(t){t.removeClass("is-collapsed")},".code-snippet-list-item.is-collapsed a click"(t,e){e.preventDefault()},"a.js-show-fixture click"(t){t.closest(".panel").find(".code-snippet-fixture-details").show(),t.closest("li").hide()},"a.js-show-run-result click"(t){this.showRunResult(t),t.closest("li").hide()},".run-result-link a click"(t){const e=t.closest(".run-result-link").hide();this.showRunResult(e.next())}};class Xi extends w{constructor(e,s){super(e,s);const i=new Z(this.element,{_app:this._app});this._controllers.push(i)}}const Rt=t=>{Lt(`https://twitter.com/intent/tweet?text=${encodeURIComponent(t)}`)},Zi=(t={})=>{const e=encodeURIComponent(t.imageUrl||a('meta[property="og:image"]').attr("content")),s=encodeURIComponent(t.url||a('meta[property="og:url"]').attr("content")),i=encodeURIComponent(t.title||a('meta[property="og:title"]').attr("content")),n=encodeURIComponent(t.body||a('meta[property="og:description"]').attr("content"));Lt(`https://www.facebook.com/sharer/sharer.php?s=100&p[url]=${s}&p[images][0]=${e}&p[title]=${i}&p[summary]=${n}`,t)},Lt=(t,e={})=>{const s=e.width||550,i=e.height||450,n=e.left||Math.round(screen.width/2-s/2),r=e.top||Math.round(screen.height/2-i/2);window.open(t,"_blank",`left=${n},top=${r},width=${s},height=${i},personalbar=0,toolbar=0,scrollbars=1,resizable=1`)};class Oe extends w{constructor(e,s){super(e,s);(!this._app.data.permissions||this._app.data.permissions.save===!1)&&a(".js-edit-challenge").remove()}}Oe.prototype.events={".js-share-email click"(t,e){window.open(t.attr("href"),"mail"),e.preventDefault(),e.stopPropagation()},".js-share-twitter click"(t){Rt(t.data("share-text"))},".js-share-facebook click"(t){Zi({title:t.data("share-title"),body:t.data("share-body")})}};class Mt extends w{constructor(e,s){super(e,s);X(this._app);const i=new $e(this.element,{_app:this._app}),n=new Oe(this.element.find(".js-train-social"),{_app:this._app});this._controllers.push(i,n)}}Mt.prototype.events={".js-unlock-test-cases click"(t){d.post(this._app.route("unlock_test_cases"),{},{responseType:"text"}).then(e=>{N(e.data)})}};/*!
  SerializeJSON jQuery plugin.
  https://github.com/marioizquierdo/jquery.serializeJSON
  version 2.9.0 (Jan, 2018)

  Copyright (c) 2012-2018 Mario Izquierdo
  Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
  and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
*/const st=(t,e)=>{var s,i,n,r,o,c,h,f,x,A,_,y;return s=Q,i=s.setupOpts(e),n=t.serializeArray().map(C=>({name:C.name,value:C.value.replace(/\r\n/g,`
`)})),s.readCheckboxUncheckedValues(n,i,t),r={},n.forEach(C=>{o=C.name,c=C.value,f=s.extractTypeAndNameWithNoType(o),x=f.nameWithNoType,A=f.type,A||(A=s.attrFromInputWithName(t,o,"data-value-type")),s.validateType(o,A,i),A!=="skip"&&(_=s.splitInputNameIntoKeysArray(x),h=s.parseValue(c,o,A,i),y=!h&&s.shouldSkipFalsy(t,o,x,A,i),y||s.deepSet(r,_,h,i))}),r},Q={defaultOptions:{checkboxUncheckedValue:void 0,parseNumbers:!1,parseBooleans:!1,parseNulls:!1,parseAll:!1,parseWithFunction:null,skipFalsyValuesForTypes:[],skipFalsyValuesForFields:[],customTypes:{},defaultTypes:{string:function(t){return String(t)},number:function(t){return Number(t)},boolean:function(t){var e=["false","null","undefined","","0"];return e.indexOf(t)===-1},null:function(t){var e=["false","null","undefined","","0"];return e.indexOf(t)===-1?t:null},array:function(t){return JSON.parse(t)},object:function(t){return JSON.parse(t)},auto:function(t){return Q.parseValue(t,null,null,{parseNumbers:!0,parseBooleans:!0,parseNulls:!0})},skip:null},useIntKeysAsArrayIndex:!1},setupOpts:function(t){var e,s,i,n,r,o;o=Q,t==null&&(t={}),i=o.defaultOptions||{},s=["checkboxUncheckedValue","parseNumbers","parseBooleans","parseNulls","parseAll","parseWithFunction","skipFalsyValuesForTypes","skipFalsyValuesForFields","customTypes","defaultTypes","useIntKeysAsArrayIndex"];for(e in t)if(s.indexOf(e)===-1)throw new Error("serializeJSON ERROR: invalid option '"+e+"'. Please use one of "+s.join(", "));return n=function(c){return t[c]!==!1&&t[c]!==""&&(t[c]||i[c])},r=n("parseAll"),{checkboxUncheckedValue:n("checkboxUncheckedValue"),parseNumbers:r||n("parseNumbers"),parseBooleans:r||n("parseBooleans"),parseNulls:r||n("parseNulls"),parseWithFunction:n("parseWithFunction"),skipFalsyValuesForTypes:n("skipFalsyValuesForTypes"),skipFalsyValuesForFields:n("skipFalsyValuesForFields"),typeFunctions:Object.assign({},n("defaultTypes"),n("customTypes")),useIntKeysAsArrayIndex:n("useIntKeysAsArrayIndex")}},parseValue:function(t,e,s,i){var n,r;return n=Q,r=t,i.typeFunctions&&s&&i.typeFunctions[s]?r=i.typeFunctions[s](t):i.parseNumbers&&n.isNumeric(t)?r=Number(t):i.parseBooleans&&(t==="true"||t==="false")?r=t==="true":i.parseNulls&&t=="null"?r=null:i.typeFunctions&&i.typeFunctions.string&&(r=i.typeFunctions.string(t)),i.parseWithFunction&&!s&&(r=i.parseWithFunction(r,e)),r},isObject:function(t){return t===Object(t)},isUndefined:function(t){return t===void 0},isValidArrayIndex:function(t){return/^[0-9]+$/.test(String(t))},isNumeric:function(t){return t-parseFloat(t)>=0},optionKeys:function(t){return Object.keys(t)},readCheckboxUncheckedValues:function(t,e,s){var i,n,r,o;e==null&&(e={}),i="input[type=checkbox][name]:not(:checked):not([disabled])",n=s.find(i).add(s.filter(i)),n.each(function(c,h){if(r=a(h),o=r.attr("data-unchecked-value"),o==null&&(o=e.checkboxUncheckedValue),o!=null){if(h.name&&h.name.indexOf("[][")!==-1)throw new Error("serializeJSON ERROR: checkbox unchecked values are not supported on nested arrays of objects like '"+h.name+"'. See https://github.com/marioizquierdo/jquery.serializeJSON/issues/67");t.push({name:h.name,value:o})}})},extractTypeAndNameWithNoType:function(t){var e;return(e=t.match(/(.*):([^:]+)$/))?{nameWithNoType:e[1],type:e[2]}:{nameWithNoType:t,type:null}},shouldSkipFalsy:function(t,e,s,i,n){var r=Q,o=r.attrFromInputWithName(t,e,"data-skip-falsy");if(o!=null)return o!=="false";var c=n.skipFalsyValuesForFields;if(c&&(c.indexOf(s)!==-1||c.indexOf(e)!==-1))return!0;var h=n.skipFalsyValuesForTypes;return i==null&&(i="string"),!!(h&&h.indexOf(i)!==-1)},attrFromInputWithName:function(t,e,s){var i,n,r;return i=e.replace(/(:|\.|\[|\]|\s)/g,"\\$1"),n='[name="'+i+'"]',r=t.find(n).add(t.filter(n)),r.attr(s)},validateType:function(t,e,s){var i,n;if(n=Q,i=n.optionKeys(s?s.typeFunctions:n.defaultOptions.defaultTypes),!e||i.indexOf(e)!==-1)return!0;throw new Error("serializeJSON ERROR: Invalid type "+e+" found in input name '"+t+"', please use one of "+i.join(", "))},splitInputNameIntoKeysArray:function(t){var e;return e=t.split("["),e=e.map(s=>s.replace(/\]/g,"")),e[0]===""&&e.shift(),e},deepSet:function(t,e,s,i){var n,r,o,c,h,f;if(i==null&&(i={}),f=Q,f.isUndefined(t))throw new Error("ArgumentError: param 'o' expected to be an object or array, found undefined");if(!e||e.length===0)throw new Error("ArgumentError: param 'keys' expected to be an array with least one element");n=e[0],e.length===1?n===""?t.push(s):t[n]=s:(r=e[1],n===""&&(c=t.length-1,h=t[c],f.isObject(h)&&(f.isUndefined(h[r])||e.length>2)?n=c:n=c+1),r===""?(f.isUndefined(t[n])||!Array.isArray(t[n]))&&(t[n]=[]):i.useIntKeysAsArrayIndex&&f.isValidArrayIndex(r)?(f.isUndefined(t[n])||!Array.isArray(t[n]))&&(t[n]=[]):(f.isUndefined(t[n])||!f.isObject(t[n]))&&(t[n]={}),o=e.slice(1),f.deepSet(t[n],o,s,i))}},Qi=(t,e)=>new L(t,e),Vt=t=>typeof t=="object"&&t!==null&&t._type==="progress";class L{static find(e){return this.requests.find(s=>s.dmid===e)}static register(e){K.connect(e),K.register("private","defer_response",s=>{const i=L.find(s.dmid);i?i.handleData(s):L.data[s.dmid]=s},e)}static push(e,s){this.register(s),this.requests.push(e)}static remove(e){const s=this.requests.indexOf(e);s>=0&&this.requests.splice(s,1)}constructor({url:e,method:s,data:i,timeout:n,deferred:r},o){if(L.push(this,o),typeof r!="function")throw new TypeError("deferred must be a function");this.start=Date.now(),this.timeout=n,this.handler=r,this.pollDuration=2500,d({url:e,method:s,data:i}).then(c=>{const h=c.data;if(h.dmid){this.dmid=h.dmid;const f=L.data[h.dmid];f?this.handleData(f):(this.status="polling",this.poll())}else this.handleData(h)})}handleData(e){if(Vt(e)||this.status==="complete")return;const s=this.handler,i=n=>{s(n),this.status="complete",delete L.data[this.dmid],L.remove(this)};e&&e.cached?this.getCache(i):i(e)}poll(){setTimeout(()=>{this.status==="polling"&&this.getCache(e=>{Vt(e)?Date.now()-this.start<this.timeout?this.poll():this.handleData():this.handleData(e)})},this.pollDuration)}cancel(){this.status="cancelled"}getCache(e){!this.dmid||this.status!=="complete"&&d.get(`/api/v1/deferred/${this.dmid}`).then(s=>{const i=s.data;i&&e(i)})}}L.data={};L.requests=[];const en=async()=>{new Xs.Tour({useModalOverlay:!0,defaultStepOptions:{cancelIcon:{enabled:!0},scrollTo:{behavior:"smooth",block:"center"},classes:"codewars",arrow:!1,buttons:[{text:"Back",action(){return this.back()}},{text:"Next",action(){return this.next()}}]},steps:[{title:"Getting Started",text:"Let's go through what each component is for.",buttons:[{text:"OK",action(){return this.next()}}]},{title:"Name",text:`The name is used to uniquely identify a kata.
The best practice is to use a name that gives other users a good idea of what type of challenge they will be getting themselves into.`,attachTo:{element:'[data-tour="name"]',on:"bottom-start"},buttons:[{text:"Next",action(){return this.next()}}]},{title:"Discipline",text:`
<div class="prose">
<p>The discipline is the category that the kata belongs to.
You should pick the category that best describes what the kata is intended to focus on.</p>
<ul>
<li>Fundamentals: Focus on core language and API knowledge</li>
<li>Algorithms: Focus on the logic required to complete the task</li>
<li>Bug Fixes: Focus on fixing the code</li>
<li>Refactoring: Focus on transforming and improving the code</li>
<li>Puzzles: Focus on creativity and solving puzzles</li>
</ul>
</div>
`,attachTo:{element:'[data-tour="discipline"]',on:"auto"}},{title:"Description",text:"Use this editor to add description of the kata in Markdown.",attachTo:{element:'[data-tour="description"]',on:"auto"}},{title:"Language",text:"Select the language you want to use here.",attachTo:{element:'[data-tour="language"]',on:"bottom-start"}},{title:"Complete Solution",text:"A working solution for your kata. Make sure to write a correct and maintainable code.",attachTo:{element:'[data-tour="complete-solution"]',on:"bottom-start"}},{title:"Initial Solution",text:"The code users start from when training on your kata.",attachTo:{element:'[data-tour="initial-solution"]',on:"bottom-start"}},{title:"Preloaded",text:"Optional code that can be provided for different purposes. For example, reducing boilerplate.",attachTo:{element:'[data-tour="preloaded"]',on:"bottom-start"}},{title:"Test Cases",text:"The test cases are the set of tests that users need to pass in order to complete your kata.",attachTo:{element:'[data-tour="test-cases"]',on:"bottom-end"}},{title:"Example Test Cases",text:"The example test cases are the set of tests that users can edit while solving your kata.",attachTo:{element:'[data-tour="sample-tests"]',on:"bottom-start"}},{title:"Examples",text:"Try inserting an example to get you started.",attachTo:{element:'[data-tour="example"]',on:"bottom-end"},buttons:[{text:"Back",action(){return this.back()}},{text:"OK",action(){return this.next()}}]}]}).start()};class Nt extends w{constructor(e,s){super(e,s);const i=["answer","fixture","setup","package","example_fixture"];if(this._app.data.languages&&!this._app.data.languagesDecoded){for(const o of Object.keys(this._app.data.languages)){const c=this._app.data.languages[o];i.forEach(h=>{c[h]=decodeURIComponent(c[h])})}this._app.data.languagesDecoded=!0}L.register(this._app.ablyConfig);const n=a("form");n.length>0&&n.get(0).reset(),this.outputPanel=new we("#code_results",{_app:this._app,showClose:!0});const r={_app:this._app,change:o=>{o.isDirty()&&!this.languageBeingSet&&(this.dirty=!0)},stashGroup:this._app.data.id||"newkata"};this.cache=Ue(r.stashGroup),this.codeSetup=new R("#code_setup",r),this.codeAnswer=new R("#code_answer",r),this.codeFixture=new R("#code_fixture",r),this.codeExampleFixture=new R("#code_example_fixture",r),this.codePackage=new R("#code_package",r),this.editors=[this.codeSetup,this.codeAnswer,this.codeFixture,this.codeExampleFixture,this.codePackage],this.markdownEditor=new oe("#description",{_app:this._app,stashGroup:r.stashGroup}),this._controllers.push(this.outputPanel,...this.editors,this.markdownEditor),this.cache.isEmpty()?this.setLanguage():this._app.confirmModal.show({titleHtml:"We found un-saved edits",messageHtml:"You have local edits that have not been saved. What would you like to do with them?",cancelHtml:"Discard",confirmHtml:"Keep",cancel:()=>{this.emptyStashes(),this.setLanguage()},confirm:()=>{this.dirty=!0,this.setLanguage()}}),this.dirty=!1,this._app.data.showIntro&&setTimeout(()=>en(),1e3)}getFormData(){const{code_challenge:e}=st(a("form.simple_form[action]"),{parseBooleans:!0});return{languages:this._app.data.languages,language:this._app.data.language,code_challenge:e}}getVersion(){return a(".lang-dd:visible dd.is-active").data("version")}setVersion(e){const s=this._app.data.languages[this._app.data.language];s.default_version=e||this.getVersion()}setLanguage(e){e==null&&(e=this._app.data.language),this._app.data.language=e,a(".lang-dd").hide(),a(`#${e}_version`).show();let s=this._app.data.languages[e];s||(this._app.data.languages[e]=s={name:e}),this.setVersion();const i=(o,c,h)=>{if(c.save(),setTimeout(()=>c.setMode(e,o==="answer"||o==="setup"||o==="package"),0),c.setReadOnly(h),c.options.save=()=>s[o]=c.getValue(),c.setValue(s[o],`${e}_${o}`,!0),this._app.data.languageErrors&&(a("#languages .has-error").removeClass("has-error"),this._app.data.languageErrors[e]))for(let f of this._app.data.languageErrors[e]){const x=`#code_${f.name}`;tn(x,f.message,{ignoreMsg:!0}),a(`.tabs a[href='${x}']`).closest("dd").addClass("has-error")}},n=this._app.data.lockedFixtures.indexOf(e)>=0,r=a(".icon-moon-lock");n?r.show():r.hide(),this.languageBeingSet=!0,i("setup",this.codeSetup),i("answer",this.codeAnswer),i("fixture",this.codeFixture,n),i("example_fixture",this.codeExampleFixture),i("package",this.codePackage),this.languageBeingSet=!1,this.markdownEditor.setStashId("description"),this.markdownEditor.setLanguage(e),ue(this._app.route("edit",{language:e}))}save(e){this._app.data.published?this.publish(e):(this.beforeSubmit(),d.post(this._app.route("save"),this.getFormData(),{responseType:"text"}).then(s=>{this.emptyStashes(),N(s.data),typeof e=="function"&&e()}))}beforeSubmit(){for(const e of this.editors)e.save();this.markdownEditor.editor.exitFullScreen()}publish(e){this.beforeSubmit(),Qi({url:this._app.route("publish"),method:"POST",data:this.getFormData(),timeout:5e4,deferred:s=>{if(s&&s.html){this.emptyStashes();const i=window.location.href;g.controller.cache.put(i,g.Snapshot.wrap(s.html));const n=a('meta[name="csrf-token"]').attr("content");document.addEventListener("turbolinks:render",()=>{a("meta[name=csrf-token]").attr("content",n)},{once:!0}),g.visit(i,{action:"restore"}),typeof e=="function"&&e()}else this._app.confirmModal.show({titleHtml:"<i class='icon-moon-warning'></i> Publishing Timed Out!",messageHtml:"The server timed out while trying to publish your changes."})}},this._app.ablyConfig),this._app.confirmModal.show({hideActions:!0,titleHtml:`<div class="inline-block w-8 pr-2">${nn}</div>Please wait while we publish`,messageHtml:"We are validating your code and publishing your changes. This shouldn't take too long."})}emptyStashes(){this.cache.clear()}validateCode(){this.running=!0;const e=a("#code_results");e.is(":visible")||I(e.get(0),{duration:100});const s={language:this._app.data.language,code:this._activeSolution(),fixture:this._activeTest(),setup:this.codePackage.getValue(),languageVersion:this.getVersion(),testFramework:this._app.data.testFrameworks[this._app.data.language]};this.outputPanel.runner.run(s)}handleResponse(){}insertExample(e){const s=()=>{const i=this._app.route("language_example",{language:this._app.data.language,category:e});d.get(i).then(n=>{const r=n.data;r.success&&(this.codeAnswer.setValue(r.answer),this.codeFixture.setValue(r.fixture),this.codeSetup.setValue(r.setup))})};this.codeAnswer.getValue()||this.codeSetup.getValue()||this.codeFixture.getValue()?this._app.confirmModal.show({titleHtml:'<i class="icon-moon-warning"></i> Possible loss of data!',messageHtml:"You are about to replace your current code with example code. Are you sure you want to discard your changes?",confirmHtml:"Yes, go ahead and replace with example code",confirm:s}):s()}_activeSolution(){const e=document.querySelector('[data-editor-group="solutions"] .is-active .code-editor');switch(e&&e.id){case"code_setup":return this.codeSetup.getValue();case"code_answer":case"code_package":default:return this.codeAnswer.getValue()}}_activeTest(){const e=document.querySelector('[data-editor-group="tests"] .is-active .code-editor');switch(e&&e.id){case"code_example_fixture":return this.codeExampleFixture.getValue();case"code_fixture":default:return this.codeFixture.getValue()}}}Nt.prototype.events={"window beforeunload"(t,e){if(this.dirty)return e.preventDefault(),"You risk losing your progress!"},"window keydown"(t,e){if(e.keyCode===8&&!a(e.target).is("input, textarea"))return e.preventDefault(),!1;if(e.keyCode===83&&e.metaKey)return this.save(),e.preventDefault(),!1},"#validate_answer click"(t,e){e.preventDefault(),this.validateCode()},"#code_answer texteditor.submit, #code_fixture texteditor.submit, #code_package texteditor.submit, #code_example_fixture texteditor.submit"(){this.validateCode()},"#insert_example click"(t,e){e.preventDefault(),this.insertExample(a("#code_challenge_category").val())},"#categories li click"(t,e){a("#code_challenge_category").val(t.data("value")),a("#categories li").removeClass("is-active"),t.addClass("is-active")},"#language_dd dd click"(t,e){this.setLanguage(t.data("language"))},".lang-dd dd click"(t,e){this.setVersion()},"#revert click"(t,e){e.preventDefault(),this.emptyStashes(),g.visit()},"#retire click"(){this._app.confirmModal.show({titleHtml:"Are you sure you want to retire this kata?",messageHtml:"This cannot be undone via the UI",confirmHtml:"Retire it",confirm:()=>{d.post(this._app.route("retire")).then(t=>{t.data.success&&g.visit()})}})},"#save click"(t,e){e.preventDefault(),this.save()},"#preview click"(t,e){e.preventDefault();const s=()=>g.visit(this._app.route("preview",{language:this._app.data.language}));this.dirty?this._app.confirmModal.show({titleHtml:"You have un-saved changes",messageHtml:"You must save your changes before previewing. Do you want to continue?",confirmHtml:"Yes, I want to save changes and continue",confirm:()=>{this.save(s)}}):s()},"#publish click"(t,e){e.preventDefault(),this.publish()},"#unpublish click"(t,e){e.preventDefault(),this.beforeSubmit(),d.post(this._app.route("unpublish"),this.getFormData(),{responseType:"text"}).then(s=>{this.emptyStashes(),N(s.data)})},"#delete click"(t,e){e.preventDefault(),this._app.confirmModal.show({titleHtml:'<i class="icon-moon-warning"></i> Are you sure you want to delete this code kata?',messageHtml:"You will not be able to undo this action",confirmHtml:"Yes, I want to delete this kata",confirm:()=>{d.delete(this._app.route("destroy"),{responseType:"text"}).then(s=>{N(s.data)})}})},"#code_answerLabel click"(){setTimeout(()=>{this.codeAnswer.refresh(),this.codeAnswer.resize()},0)},"#initial_setupLabel click"(){setTimeout(()=>{this.codeSetup.refresh(),this.codeSetup.resize()},0)},"#code_packageLabel click"(){setTimeout(()=>{this.codePackage.refresh(),this.codePackage.resize()},0)},"#code_fixtureLabel click"(){setTimeout(()=>{this.codeFixture.refresh(),this.codeFixture.resize()},0)},"#code_exampleFixtureLabel click"(){setTimeout(()=>{this.codeExampleFixture.refresh(),this.codeExampleFixture.resize()},0)},"input change"(){this.dirty=!0},"textarea change"(){this.dirty=!0},"select change"(){this.dirty=!0},"#language_dd i.remove click"(t,e){e.stopPropagation(),e.preventDefault();const s=t.closest("dd").data("language"),i=t.closest("dd").text(),n=this._app.data.languages[s];this._app.confirmModal.show({titleHtml:`<i class='icon-moon-warning'></i> Are you sure you want to delete ${i}?`,messageHtml:"This action is destructive. All data related to this language will be deleted from the record.",confirmHtml:"Yes, I want to delete this language",confirm:()=>{const r=()=>{if(a(t).closest("dd").removeClass("has-value"),this._app.data.languages[s]=null,this._app.data.language===s){for(let o of this.editors)o.setValue("");this.setLanguage()}};n&&n.id?d.delete(this._app.route("remove_language",{language:s})).then(o=>{o.data.success&&r()}):r()}})},"#runner_frame message.notifyResponse"(){this.running&&this.outputPanel.runner.response&&(this.running=!1,this.handleResponse())}};const tn=(t,e,s)=>{let i,n;s==null&&(s={});const r=a(t),o=r.closest(".field")[e?"addClass":"removeClass"]("has-error");let c=o.find("small");const h=r.closest("form").find(".alert-box.error");return h.find(`[data-selector='${t}']`).remove(),s.fieldName&&h.find(`[data-field='${s.fieldName}']`).remove(),e?(c.length===0&&(c=a("<small></small>"),o.find(".field_value").append(c)),pe(c.html(e).get(0)),n=s.fieldLabel||sn(o),s.ignoreMsg||(i=a("<li></li>"),i.attr("data-selector",t),i.html(`${n} ${e}`),s.msgClass&&globalThis.msg.addClass(s.msgClass),h.find("ul").append(i),pe(h.get(0)))):(c.hide(),h.find("li").length===0&&!s.ignoreMsg&&h.hide()),{$field:r,$container:o,$small:c,labelText:n,$msg:i,$msgBox:h}},sn=t=>{let e=a(t);return e.is(".field")||(e=e.closest(".field")),e.find("label").clone().find("*").remove().end().text()},nn=`
<svg viewbox="0 0 57 57" stroke="currentColor" class="text-cw-red">
<g transform="translate(1 1)" stroke-width="2" fill="none" fill-rule="evenodd">
  <circle cx="5" cy="50" r="5">
    <animate attributeName="cy" begin="0s" dur="2.2s" values="50;5;50;50" calcMode="linear" repeatCount="indefinite"/>
    <animate attributeName="cx" begin="0s" dur="2.2s" values="5;27;49;5" calcMode="linear" repeatCount="indefinite"/>
  </circle>
  <circle cx="27" cy="5" r="5">
    <animate attributeName="cy" begin="0s" dur="2.2s" from="5" to="5" values="5;50;50;5" calcMode="linear" repeatCount="indefinite"/>
    <animate attributeName="cx" begin="0s" dur="2.2s" from="27" to="27" values="27;49;5;27" calcMode="linear" repeatCount="indefinite"/>
  </circle>
  <circle cx="49" cy="50" r="5">
    <animate attributeName="cy" begin="0s" dur="2.2s" values="50;50;5;50" calcMode="linear" repeatCount="indefinite"/>
    <animate attributeName="cx" from="49" to="49" begin="0s" dur="2.2s" values="49;5;27;49" calcMode="linear" repeatCount="indefinite"/>
  </circle>
  </g>
</svg>
`;async function an(t=1){return(await d.get(`/job_postings/?limit=${t}`)).data.postings||[]}let W=[],Ut=[];async function it(t,{jobPostings:e}={jobPostings:3}){W.length<2&&(W=W.concat(await an(25)),W=rn(W),Ut=W.filter(i=>!!i.is_featured));const s=e>1?he(Ut,1):[];for(;s.length<e&&W.length>0;){const i=W.pop();s.some(n=>n.id===i.id)||s.push(i)}return J(t,{postings:s})}function rn(t){const e=App.instance.currentUser,s=[],i=[];return t.forEach(n=>{const r=n.sub_category||{};let o=!1;switch(e.experience){case"learner":o=r.slug==="junior";break;case"junior":o=r.slug==="junior"||r.slug==="mid-level";break;case"mid":o=r.slug==="mid-level"||r.slug==="senior";break;case"senior":o=r.slug==="senior"||r.slug==="management";break}o?s.push(n):i.push(n)}),s.concat(i)}class ee extends w{constructor(e,s){super(e,s);this.waypoint(),this.checkWaypoint()}checkWaypoint(){on(this.$waypoint,e=>{e&&setTimeout(()=>this.loadNext(),0)})}waypoint(){this.$waypoint=this.element.find(this.options.waypointSelector)}replaceLoad(e){d.get(e,{responseType:"text"}).then(s=>{this.element.html(s.data),this._updateUi(),this.waypoint()})}loadNext(){const e=this.$waypoint.data("page"),s=new URL(document.location);s.searchParams.set("page",e),d.get(s.href,{responseType:"text"}).then(i=>{this.$waypoint.replaceWith(i.data),window.requestAnimationFrame(()=>{this.waypoint(),this._updateUi(),this.options.loaded&&this.options.loaded(this),a("#app").trigger("infinitescrollcontent")})})}_updateUi(){q(),Ae(this._app),X(this._app),z(),_e()}}ee.prototype.events={"a.js-infinite-button click"(t){this.$waypoint=t,t.html("Loading...").addClass("is-disabled"),this.loadNext()},".js-infinite-button a click"(t){this.$waypoint=t.closest(".js-infinite-button"),t.html("Loading...").addClass("is-disabled"),this.loadNext()},"window scroll"(){this.checkWaypoint()}};ee.defaults={waypointSelector:".js-infinite-marker"};function on(t,e){t.height()&&ln(t.get(0))?t.data("waypoint-in-view")||(e(!0,t),t.data("waypoint-in-view",!0)):t.data("waypoint-in-view")&&(e(!1,t),t.data("waypoint-in-view",!1))}const ln=t=>{const e=t.getBoundingClientRect();return e.bottom>0&&e.right>0&&e.left<(window.innerWidth||document.documentElement.clientWidth)&&e.top<(window.innerHeight||document.documentElement.clientHeight)};class Pt extends w{constructor(e,s){super(e,s);this.start=null,this.end=null,this.values=[],this.element.find("li.is-active").each((i,n)=>{const r=a(n),o=r.index();this.start==null&&(this.start=o),o>this.end&&(this.end=o),this.values.push(r.data("range-value"))})}resetState(){this.hoverEnd=null,this.mouseDown=!1,this.refresh()}clear(){this.start=null,this.end=null,this.refresh()}refresh(){this.values=[];let e=this.start,s=this.hoverEnd!=null?this.hoverEnd:this.end;s!=null?e>s&&(e=s,s=this.start):s=e,this.element.find("ul").children().each((i,n)=>{const r=a(n);i===e||i>e&&i<=s?(r.addClass("is-active"),this.values.push(r.data("range-value"))):r.removeClass("is-active")})}}Pt.prototype.events={mouseleave(){this.resetState()},mouseup(){this.resetState()},"li mouseover"(t){this.mouseDown&&(this.hoverEnd=t.index(),this.refresh())},"li mousedown"(t,e){if(e.which===1){const s=t.index();s===this.start?(this.start=null,this.end=null,t.removeClass("is-active")):(this.start=s,this.end=null,t.addClass("is-active")),this.mouseDown=!0}},"li mouseup"(t,e){if(e.which===1){const s=t.index();this.start!=null&&s!==this.start&&(this.end=s),this.resetState(!0),e.stopPropagation(),this.element.trigger("change",{range:this})}}};class Ht extends w{constructor(e,s){super(e,s);this._app.currentUser.hideAds&&a("#carbonads-container").hide(),this.ranksRange=new Pt("#ranks"),this.markCompleted(),this.infiniteScroll=new ee("section.items-list",{_app:this._app,loaded:()=>{this.markCompleted()}}),this._controllers.push(this.ranksRange,this.infiniteScroll),ke().q&&a("#filters input").trigger("focus"),it("#job-ad")}filterUrl(e){const s={q:e||a("#search-input").val(),r:this.ranksRange.values,tags:this._app.data.tags,xids:a("#ids_filter").val(),beta:a("#beta_filter").val(),beta_state:a("#beta_state_filter").val(),category:a("#category_filter").val(),order_by:a("#order_by").val()};return Object.keys(s).forEach(function(i){!s[i]&&i!=="q"&&delete s[i]}),this._app.route("search",{language:a("#language_filter").val()},s)}search(e){e==null&&(e=a("#search-input").val()),e=e.replace(/#/g,""),this.filter(e)}filter(e){g.clearCache(),g.visit(this.filterUrl(e))}markCompleted(){this._app.data.completedCodeChallengeIds!=null&&this._app.data.completedCodeChallengeIds.forEach(e=>{a(`#${e} .js-check.is-hidden`).removeClass("is-hidden")})}}Ht.prototype.events={"#search click"(){this.search()},"#search-input keypress"(t,e){e.keyCode===13&&(e.preventDefault(),this.search())},".suggestions a.keyword-tag click"(t){this.search(t.text())},"#filters change"(){this.filter()}};class ve extends w{constructor(e,s){super(e,s)}configureIde(){if(this.outputPanel){this.outputPanel.destroy();const e=this._controllers.indexOf(this.outputPanel);e!==-1&&this._controllers.splice(e,1),this.outputPanel=null}this.outputPanel=new we("#code_results",{_app:this._app}),this._controllers.push(this.outputPanel),this.setBindings(this._app.localStorage.get("editorKeyMap"))}toggleBindings(e){e==null&&(e=this._app.data.mode),this.setBindings(this.keybinds!==e?e:"default")}setBindings(e){this.element.find("#vim_mode, #emacs_mode").removeClass("is-active"),e!=="default"&&this.element.find(`#${e}_mode`).addClass("is-active"),this.editors!=null&&this.editors.forEach(s=>{Array.isArray(s)?s[0].setBindings(e):s.setBindings(e)}),a(".markdown-editor").each(function(){const s=a(this).data("editor");s!=null&&s.editor.setBindings(e)}),this.keybinds=e,this._app.data.mode=e}toggleTabs(){const e=a('a[data-tab="description"]');e.parent().is(".is-active")?a('a[data-tab="output"]').trigger("click"):e.trigger("click")}toggleFocusedEditor(){this.editor.focused&&this.fixture?this.fixture.focus():this.editor.focus()}isOutputVisible(){return a("#output_frame").is(":visible")}showOutput(){a('a[data-tab="output"]').trigger("click")}showOutputWaiting(e){this.showOutput(),this.editor.setBorder(),this.fixture&&this.fixture.setBorder()}showResults(e,s){a(".btn.js-run").removeClass("is-disabled"),this.showOutputWaiting(),s&&this.setEditorBorder(s,e)}setEditorBorder(e,s){e.setBorder(s?"green":"red")}reset(){this._app.confirmModal.show({titleHtml:"Reset your solution and example test cases?",messageHtml:"This will replace your solution and example test cases with the default setup. Are you sure?",confirmHtml:"Yes. Do it!",confirm:()=>{this.editor.setValue(this.language.setup),this.fixture.setValue(this.language.exampleFixture)}})}getSetupCode(){return null}getLanguage(){return this.language.languageName}getCode(){if(this.editor)return this.editor.getValue()}getFixture(){if(this.fixture)return this.fixture.getValue()}getTestFramework(){return this.language&&this.language.testFramework}run(e={}){this.running=!0;const s=Object.assign({language:this.getLanguage(),code:this.getCode(),fixture:this.getFixture(),setup:this.getSetupCode(),testFramework:this.getTestFramework()},e);this.outputPanel.runner.run(s)}handleResponse(){(this.fixture||this.editor).messages.hide(),a(".js-run").removeClass("is-disabled")}defaultFixtureText(e){return this.editor.defaultFixtureText(e)}}ve.prototype.events={"window popstate, window beforeunload"(){this.editor&&(this.editor.updateStash(),this.fixture.updateStash())},"window keydown"(t,e){if(e.keyCode===8&&!a(e.target).is("input, textarea"))return e.preventDefault(),!1},"#fixture_help click"(){this._app.confirmModal.show({cancelHtml:"Got It",titleHtml:"Test Cases Help",messageHtml:`<p>The test cases section is provided so that you can use Test Driven Development while coding your solution. For some kata, authors may have provided some example test cases to get you started. When you click "Submit" your solution will be validated against the kata author's test cases, which are usually more thorough than the example tests cases that may be provided. <br><br>You run your tests by clicking the "Run Tests" button. You can also use the <span class='text-ui-text-lc'>Cmd/Control key + '</span> shortcut to run your test cases.</p> <p>Please read the documentation for <a href='https://docs.codewars.com/languages' class='is-alt' target='_blank' rel='noopener'>languages and test frameworks</a>.</p>`})},"div#fixture texteditor.submit"(){this.validate()},"#validate_btn click"(){this.validate()},"#maximize_layout click"(){this.setLayout("max")},"#minimize_layout click"(){this.setLayout("min")},"#vim_mode click"(){this.toggleBindings("vim")},"#emacs_mode click"(){this.toggleBindings("emacs")},"#runner_frame message.notifyReceipt"(t,e){this.running&&(a(".btn.js-run").addClass("is-disabled"),this.showOutputWaiting())},"#runner_frame message.notifyResponse"(){this.running&&this.outputPanel.runner.response&&(this.running=!1,this.handleResponse())}};class qt extends ve{constructor(e,s){super(e,s);this.languages={},this.player=J("#cc_play_view",{loading:!0,language:this._app.data.languageInfo,activeTab:"description",previousSolutions:this._app.data.previousSolutions,setLanguage(i){this.language=i},get activeLabel(){var o;const i=(o=this.language)==null?void 0:o.languageVersions;if(!i)return;const n=i.find(c=>this.language.activeVersion===c.id);if(n==null?void 0:n.label)return n.label;const r=i[i.length-1];return r==null?void 0:r.label},onMounted(){setTimeout(()=>q(),1e3)},toggleTabs(){this.activeTab=this.activeTab==="description"?"output":"description"}}),this.play()}get language(){return this.player.language}set language(e){this.player.language=e}setLayout(e){switch(e){case"max":a("body").addClass("maximized").addClass("no-sidenav");break;case"min":a("body").removeClass("maximized").removeClass("no-sidenav");break}this.layout=e,setTimeout(()=>a(window).trigger("resize"),100)}validate(e={}){this.showOutputWaiting(),this.fixture.messages.hide(),this.run(Object.assign({languageVersion:this.language.activeVersion,relayId:this.language.solutionId,ciphered:["setup"]},e))}attempt(){if(!this.getCode()){this.editor.messages.fail(this.editor.emptyCodeMsg());return}a("#attempt_btn").addClass("is-disabled"),this.attempting=!0,this.validate({ciphered:["setup","fixture"],fixture:this.language.fixture})}handleResponse(){(this.fixture||this.editor).messages.hide();const e=this.outputPanel.runner,s=this.attempting;this.attempting=!1,this.editor.messages.hide();let i=!1,n=null;e.response&&e.response.type==="execution success"&&(i=e.response.result.completed,d.post(this._app.route("notify",{solutionId:this.language.solutionId}),{token:e.response.token,testFramework:e.request.testFramework,code:e.request.code,fixture:e.request.fixture,languageVersion:this.language.activeVersion}).then(r=>{const o=r.data;i&&o.success&&s&&(this.editor.markClean(),this.editor.messages.working(`<i class='icon-moon-circle-check is-green-text is-nudged-down'></i> ${he(Ge)} You may take your time to refactor/comment your solution. Submit when ready.`),this._app.data.published&&(this.readyCode=e.request.code,a("#submit_btn").removeClass("is-hidden"),a("#attempt_btn").hide()))},r=>{window.alert("There was a server issue while sending the request. Please try again."),Zs(o=>{o.setTags({attempting:s+""}),o.setExtras({description:"Error while posting play notification",error:r,attempting:s,solutionId:this.language.solutionId}),Ve("Failed to notify response")})}),n=this.editor,s||this.getFixture()&&this.getFixture!==""&&(n=this.fixture)),this.showResults(i,n)}submit(){!this.readyCode||this.readyCode!==this.editor.getValue()||(this.editor.messages.working("Submitting your final kata solution..."),d.post(this._app.route("finalize",{solutionId:this.language.solutionId})).then(e=>{const s=e.data;s.success?setTimeout(()=>{g.visit(this._app.route("solutions",{language:this._app.data.activeLanguage}))},1500):this.editor.messages.fail(s.debug||"There was an issue submitting your final kata solution")}))}skip(){this._app.data.published&&d.post(this._app.route("skip",this.language),{language_name:this._app.data.activeLanguage}).then(e=>{g.visit(e.data.route)})}backToEditor(){g.visit(this._app.route("editor",{language:this._app.data.activeLanguage}))}surrender(){this._app.confirmModal.show({titleHtml:"Unlock Solutions",messageHtml:"This will cause you to forfeit your ability to earn honor/rank for this kata. Are you sure?",confirmHtml:"Yes, show me the solutions",confirm:()=>{d.post(this._app.route("forfeit"),{},{responseType:"text"}).then(e=>{N(e.data);const s=e.headers["turbolinks-location"];s&&li(s)})}})}getSetupCode(){const e=this._getLanguage();return e&&e.package||""}play(){this.isPlaying=!0,this._playLanguage()}_playLanguage(e){if(e==null&&(e=this._app.data.activeLanguage),this.languages[e]){this._setLanguage(e);return}d.post(this._app.route("session",{language:e})).then(s=>{this.started||(this.started=!0),this.languages[e]=s.data,this._setLanguage(e)}).catch(s=>{this._app.alerts.fail("The kata failed to load. Please try reloading the page.")})}_getLanguage(e){return e==null&&(e=this._app.data.activeLanguage),this.languages[e]}_setLanguage(e){const s=this.languages[e];s.views=s.views||0,s.views++,s.newPlay=!1,this.language=s,this.languageName=e,this.render()}render(){this.configureEditors(),this.configureIde(),this.initMarkdown(),setTimeout(()=>this.afterRender(),100)}afterRender(){const e=!this.language.solutionId&&this.language.recently_attempted||this.language.views>1;this.editor.setValue(this.language.workingCode||this.language.setup,`${this.language.resultId}-${this.languageName}`,e),setTimeout(()=>this.editor.setMode(this._app.data.activeLanguage,!0),0),this.editor.focus();const s=this.language.workingFixture||this.language.exampleFixture||this.defaultFixtureText(this.languageName);this.fixture.setValue(s,`${this.language.resultId}-${this.languageName}-fixture`,e),this.fixture.setMode(this._app.data.activeLanguage),this.player.loading=!1}configureEditors(){if(this.editors)return;const e=v.keyMap.default===v.keyMap.macDefault?"Cmd":"Ctrl",s={};s[`${e}-'`]=()=>this.validate(),s[`${e}-Alt-Enter`]=()=>this.validate(),s[`${e}-;`]=()=>this.attempt(),s[`${e}-I`]=()=>this.player.toggleTabs(),s[`${e}-Alt-I`]=()=>this.player.toggleTabs(),s[`${e}-U`]=()=>this.toggleFocusedEditor(),s[`${e}-Alt-U`]=()=>this.toggleFocusedEditor(),this.editor=new le("div#code",{_app:this._app,mode:this._app.data.activeLanguage,stashGroup:this._app.data.id,extraKeys:s,commands:{save:()=>this.validate()}}),this.fixture=new le("div#fixture",{_app:this._app,mode:this._app.data.activeLanguage,stashGroup:this._app.data.id,extraKeys:s,commands:{save:()=>this.validate()}}),this.editors=[this.editor,this.fixture]}initMarkdown(){this.markdownDisplay||(this.markdownDisplay=new me("#description",{_app:this._app,language:this._app.data.activeLanguage,markdown:this._app.data.description})),this.markdownDisplay.setLanguage(this.languageName)}showOutput(){this.player.activeTab="output"}}qt.prototype.events=Object.assign({},ve.prototype.events,{"#language_dd dd click"(t,e){var s,i;this._app.data.activeLanguage!==t.data("value")&&(ue(t.data("href")),this._app.data.activeLanguage=t.data("value"),((i=(s=this._app.routes)==null?void 0:s.session)==null?void 0:i.endsWith("session"))===!1&&(this._app.routes.session=this._app.routes.session.replace(/\/[\da-f]+$/i,"")),this.isPlaying&&this._playLanguage())},"#play_btn click"(){this.play()},"#skip_btn click"(){this.skip()},"#edit_draft_btn click"(){this.backToEditor()},"div#code texteditor.submit"(){this.readyCode&&this.readyCode===this.editor.getValue()?this.submit():this.attempt()},"div#code texteditor.change"(){!this.readyCode||setTimeout(()=>{this.readyCode===this.editor.getValue()?(a("#attempt_btn").hide(),a("#submit_btn").removeClass("is-hidden")):(a("#submit_btn").addClass("is-hidden"),a("#attempt_btn").show(),this.attempting||this.editor.messages.hide())},0)},"#reset_btn:not(.is-disabled) click"(){this.reset()},"#attempt_btn:not(.is-disabled) click"(){this.attempt()},"#submit_btn:not(.is-disabled) click"(){this.submit()},"#surrender_btn click"(){this.surrender()},"#language_version dd.is-active click"(t){this.language.activeVersion=t.data("version")}});class cn extends w{constructor(e,s){super(e,s);this._app.currentUser.hideAds&&a("#carbonads-container").hide();const i=new Oe(this.element.find(".js-train-social"),{_app:this._app});this.markdownDisplay=new me("#description",{_app:this._app,language:this._app.data.activeLanguage}),this.markdownDisplay.setMarkdown(this._app.data.description),this._controllers.push(i,this.markdownDisplay)}}class zt extends w{constructor(e,s){super(e,s);X(this._app).then(()=>{this._controllers.push(new tt(a("#app"),{_app:this._app}))});const i=new $e(this.element,{_app:this._app}),n=new Oe(this.element.find(".js-train-social"),{_app:this._app}),r=new Qe(this.element,{_app:this._app});this.infiniteScroll=new ee("#solutions_list",{_app:this._app}),this._controllers.push(i,n,r,this.infiniteScroll)}}zt.prototype.events={".js-show-invalid click"(t){const e=a("<span>Loading...</span>");t.replaceWith(e);const s=new URL(document.location);s.searchParams.set("invalid_solutions","true"),d.get(s.href,{responseType:"text"}).then(i=>{const n=i.data;fe(e.get(0)),a("#invalid_solutions").replaceWith(n)})},"#show_invalid_solutions click"(t){t.closest("p").hide(),I(a("#invalid_solutions").get(0))},".js-admin-action click"(t){d.post(t.data("href")).then(e=>{const s=e.data;alert(`Action ${s.success?"successfully queued":"failed"}`)})},".js-unlock-solutions click"(t){d.post(this._app.route("unlock_solutions"),{},{responseType:"text"}).then(e=>{N(e.data)})},".js-unlock-test-cases click"(t){d.post(this._app.route("unlock_test_cases"),{},{responseType:"text"}).then(e=>{N(e.data)})}};class un extends w{constructor(e,s){super(e,s);const i=new Z(this.element,{_app:this._app});this._controllers.push(i)}}class nt extends ve{constructor(e,s){super(e,s);this.fields=this._app.data.fields.code_snippet,this._app.data.activeCode="code",this._app.data.activeFixture="fixture",a("#translation_details dd a:first").trigger("click");const i=new Z(this.element,{_app:this._app});this._controllers.push(i)}ready(){setTimeout(()=>this.renderViews(),0)}canSave(){return this.canRun()?this._app.data.isTranslation?this.fields.code.value:!!this.fields.code.value:!1}canRun(){return this.hasCode()&&!this.running&&!this.publishing}isSupportedLanguage(e){return e==null&&(e=this.getLanguage()),this._app.data.supportedLanguages.indexOf(e)>=0}isTddLanguage(){return this._app.data.tddLanguages.indexOf(this.getLanguage())>=0}isTddEnabled(){return this._app.data.tdd&&this.isTddLanguage()}updateTags(){if(this.tags===this.fields.user_tags.value)return;const e=this.tags=this.fields.user_tags.value;this.mapTags!=null&&this.mapTags.abort(),this.mapTags=de(100,()=>{this.mapTags=null,d.post(this._app.route("map_topics"),{query:e}).then(s=>{const i=s.data;this._app.data.mappedTags=i.tags;const n=a("#tags"),r=a(n.data("template"));(r.data("template")||new G(r,{_app:this._app})).render(n,n.data("context"))})})}updateTitle(){Y(a("#title"))}updateButtons(e){(e||this.canSave()!==this._app.data.canSave)&&(this._app.data.canSave=this.canSave(),Y(a("#buttons")))}activeCodeEditor(){switch(this._app.data.activeCode){case"code":return this.editor;case"setup":return this.setupCode;case"package":return this.package}}toggleFocusedEditor(){this.activeCodeEditor().focused&&this.fixture?this.fixture.focus():this.activeCodeEditor().focus()}toggleTabs(){const e=a("#panel_toggles li.is-active");let s=e.next();s.length===0&&(s=e.siblings().eq(0)),s.find("a").trigger("click")}configureEditor(e,s){!e||(this._app.data.publishedForks&&e.setReadOnly(!0),e.options.stashGroup=this._app.data.id,e.setOption("commands",{save:()=>this.validate()}),e.setMode(this.getLanguage(),s),e.setExtraKeys({"Cmd-S":()=>{this._app.data.published?this.publish():this.save()},"Cmd-I":()=>this.toggleTabs(),"Cmd-U":()=>this.toggleFocusedEditor()}),this.editors.push([e,s]))}configureEditors(){this.editors=[],this.code=this.editor=a("#code_snippet_code_field").data("editor"),this.editor&&(setTimeout(()=>this.configureEditor(this.editor,!0),0),this.editor.focus()),this.fixture=a("#code_snippet_fixture_field").data("editor"),this.fixture&&(this.configureEditor(this.fixture),this.fixture.emptyCodeMsg=()=>"You are using TDD. You must provide test cases before you can run your code. You can turn TDD mode off using the switch in the upper right corner."),this.package=a("#code_snippet_package_field").data("editor"),this.configureEditor(this.package,!0),this.setupCode=a("#code_snippet_setup_code_field").data("editor"),this.configureEditor(this.setupCode,!0),this.exampleFixture=a("#code_snippet_example_fixture_field").data("editor"),this.configureEditor(this.exampleFixture)}render(){this.updateButtons(!0),this.updateTitle(),Y(a("#buttons, #edit, #editors, #options_bar, #language_info")),_e()}setTestFramework(e){if(e=e||this.fields.test_framework.value||a("#test_framework dd").data("framework"),!e)return;let s=a(`dd[data-framework='${e}']`);s.length===0&&(s=a("dd[data-framework]").eq(0)),s.trigger("click").trigger("click")}getLanguage(){return this.fields.language.value||this._app.data.language}getLanguageVersion(){return this.fields.language_version.value}getLanguageInfo(e){return e==null&&(e=this.getLanguage()),this._app.data.versionInfo[e]}setLanguageVersion(e,s){const i=this.fields.language.value;if(e&&e===s){e!==i?this.setLanguageVersion(i,e):this.setLanguageVersion(null,e);return}if(this._app.data.versionInfo[e]){if(e===this.fields.language.originalValue)this.setLanguageVersion(this.fields.language_version.originalValue,e);else{const n=this.getLanguageInfo(e);if(n){const r=n.find(o=>o.default);this.setLanguageVersion(r&&r.id,e)}else this.setLanguageVersion(null,e)}return}e||!i?this.fields.language_version.value=e:this.fields.language_version.value=this._app.data.versionInfo[i]!=null?this._app.data.versionInfo[i][0].id:void 0}setLanguage(e){if(e&&this.getLanguage()!==e||!this.languageSet){this.languageSet=!0,this.resetFixtures(),this.fields.language.value=e,this.setLanguageVersion(e),this.setTestFramework();const s=this.fields.language.value;this._app.data.language=s,this.render(),this.editors!=null&&this.editors.forEach(([i,n])=>i.setMode(s,n)),this.isSupportedLanguage()?a("#output_btn").show():a("#output_btn").hide().hasClass("is-active")&&a("#edit_btn a").trigger("click")}this.defaultFixtures()}setEditorBorder(e,s){}hasCode(){return!!(this.editor&&this.editor.getValue())}getCode(){return this._app.data.activeCode==="setup"&&!this.publishing?this.setupCode&&this.setupCode.getValue():this.editor&&this.editor.getValue()}fixtureEditors(){return[this.exampleFixture,this.fixture]}resetFixtures(){if(!this.fixture)return;const e=this.getLanguage();this.fixtureEditors().forEach(s=>{s.getValue()===s.defaultFixtureText(e)&&s.setValue("")})}defaultFixtures(){if(!this.fixture)return;const e=this.getLanguage();this.fixtureEditors().forEach(s=>{(s.getValue()||"")===""&&s.setValue(s.defaultFixtureText(e))})}getFixture(){if(!!this.fixture){if(this._app.data.activeFixture==="example_fixture")return this.exampleFixture.getValue();if(this._app.data.isTranslation||this.isTddEnabled())return this.fixture.getValue()}}getPackage(){return this.package?this.package.getValue():this.fields.package.value}getTestFramework(){return this.fields.test_framework.value||this._app.data.defaultFrameworks[this.getLanguage()]}validate(){!this.isSupportedLanguage()||(a("#output_btn").trigger("click"),this.run({language:this.getLanguage(),languageVersion:this.getLanguageVersion()+"",setup:this.getPackage(),relayId:this._app.data.id}))}save(e){this._app.alerts.working("Saving..."),a("#code_snippet_language").val(this.getLanguage()),a("#code_snippet_language_version").val(this.getLanguageVersion()),d({url:this._app.data.new?this._app.route("create"):this._app.route("update",{id:this._app.data.id}),method:this._app.data.new?"post":"put",data:st(a("form"),{parseBooleans:!0})}).then(s=>{const i=s.data;this.dirty=!1,this._app.alerts.hide(),this._app.data.fields=i.fields,this._app.data.errors=i.errors,i.success?(i.id&&(this._app.data.id=i.id),this._app.data.new&&i.url?g.visit(i.url):(i.url&&ue(i.url),this.updateTitle(),typeof e=="function"&&e())):(this.publishing=!1,a("#edit_btn a").trigger("click")),this.updateButtons(!0),this.updateTitle(),Y(a("#editors, #options_bar, #language_info")),_e()})}publish(){this._app.alerts.working("Publishing..."),this.editor&&this.editor.messages.hide(),this.fixture&&this.fixture.messages.hide(),a(".js-run").addClass("is-disabled"),this.publishing=!0,this.save(()=>{this.validate()})}handleResponse(){if(this.updateButtons(!0),!this.publishing)return;let e=this.outputPanel.runner.response;if(!e||!e.token){this.running=!1,this.publishing=!1,this.updateButtons(!0),window.alert("Something went wrong, please try republishing again");return}this.showOutputWaiting("Publishing..."),a(".js-run").removeClass("is-disabled"),this.publishing=!1,e={token:e.token,run_result:JSON.stringify({response:{result:e.result}})},d.post(this._app.route("publish",{id:this._app.data.id}),e).then(s=>{const i=s.data;a("#publish_btn").removeClass("is-disabled"),(this._app.data.allowFailedTests||i.completed)&&!i.message?g.visit(this._app.route("show",{id:this._app.data.id})):(this._app.alerts.warn("Kumite was published with failed tests!"),this.editor.messages.hide(),this.showResults(i))})}unpublish(){d.post(this._app.route("unpublish",{id:this._app.data.id})).then(e=>{e.data.success&&g.visit()})}}nt.prototype.filters={"tdd_language?"(){return this.isTddLanguage()},"tdd_enabled?"(){return this.isTddEnabled()},"active_language_supported?"(){return this.isSupportedLanguage()},"can_save?"(){return this.canSave()},"has_code?"(){return this.hasCode()},"can_run?"(){return this.canRun()},language_versions(){return this.getLanguageInfo()},active_language(){return this.getLanguage()},active_version(){return this.getLanguageVersion()},active_version_label(){const t=this.getLanguageVersion();let e=this.getLanguageInfo();if(!!e)return e=e.find(s=>s.id===t),e&&e.label||t}};nt.prototype.events=Object.assign({},ve.prototype.events,{"window beforeunload"(t,e){if(this.dirty)return e.preventDefault(),"You have unsaved changes!"},"#editors view:render"(){this.configureEditors(),this.setLanguage(this.getLanguage()),this.setTestFramework()},"#edit view:render"(){this.configureIde()},"#languages dd click"(t){const e=a("#languages dd.is-active");this.setLanguage(e.data("language"))},"#versions dd click"(t){this.setLanguageVersion(t.data("version"))},"#tdd_mode:not(.is-disabled) click"(t){this._app.data.tdd=!this._app.data.tdd,Y(a("#options_bar, #editors")),_e()},"#edit_btn click"(){setTimeout(()=>Y(a("#edit")),0)},"#save_btn click"(){this.save()},"#publish_btn:not(.is-disabled) click"(){this.publish()},"#unpublish_btn click"(){this.unpublish()},"#convert_btn click"(){this._app.confirmModal.show({titleHtml:"Are you sure you want to convert?",messageHtml:"This will create a new kata using the data in this kumite. The kumite will be unpublished/hidden.",cancelHtml:"Cancel",confirmHtml:"Do it!",cancel:()=>{},confirm:()=>{a("#buttons .btn").addClass("is-disabled"),this.save(()=>{a("#buttons .btn").addClass("is-disabled"),window.requestAnimationFrame(()=>{d.post(this._app.route("convert")).then(t=>{const e=t.data;e.data&&e.data.url&&g.visit(e.data.url)})})})}})},"texteditor.change"(){this.updateButtons(!0),this.dirty=!0},"#code_snippet_title change, #code_snippet_title keyup"(){this.updateTitle()},"#code_snippet_user_tags change, #code_snippet_user_tags keyup"(){this.updateTags()},"#code_snippet_secret change, #code_snippet_secret click"(){this.updateTitle()},"texteditor.submit"(){this.hasCode()&&this.validate()},"dd[data-framework] click"(t){a("#code_snippet_test_framework").val(t.data("framework")).trigger("change")},"#code_container dd a click"(t){this._app.data.activeCode=t.data("tab"),this.updateButtons(!0)},"#fixture_container dd a click"(t){this._app.data.activeFixture=t.data("tab")},".js-details-link click"(){a("#edit_btn a").trigger("click")}});class Wt extends w{constructor(e,s){super(e,s);const i=new Z(this.element,{_app:this._app});this._controllers.push(i),it("#job-ad")}filterUrl(e){const s={q:e||a("#search-input").val(),personal:a("#personal input:checked").length===1,secrets:a("#secrets input:checked").length===1,language:this._app.data.language};return Object.keys(s).forEach(function(i){!s[i]&&i!=="q"&&delete s[i]}),this._app.route("search",null,s)}search(e){e==null&&(e=a("#search_bar input").val()),this.filter(e)}filter(e){g.clearCache(),g.visit(this.filterUrl(e))}}Wt.prototype.events={"#search click"(){this.search()},"#personal input change"(){this.search()},".js-lang click"(t){const e=t.data("lang");this._app.data.language=e===this._app.data.language?null:e,this.search()},"#search-input keypress"(t,e){e.keyCode===13&&(e.preventDefault(),this.search())}};const hn=m.object({action:m.enum(["none","code_update","fixture_update","full_update"]),tags:m.array(m.string()),language:m.string(),testLanguage:m.string(),user:m.object({id:m.string(),username:m.string()}),description:m.nullable(m.string()).default(null),code:m.optional(m.string()).default(""),setupCode:m.optional(m.string()).default(""),package:m.optional(m.string()).default(""),fixture:m.optional(m.string()).default(""),exampleFixture:m.optional(m.string()).default(""),solutionGroupId:m.nullable(m.string()),validFixture:m.optional(m.nullable(m.boolean())).default(null),isTranslation:m.boolean(),runResult:m.nullable(m.object({response:m.optional(m.object({result:m.object({}).passthrough()}))}))}),dn=m.object({canClose:m.boolean(),activeTab:m.enum(["details","diff","comments"]),hasDiff:m.boolean(),authorView:m.boolean(),commentsCount:m.number().int(),isPublished:m.boolean(),publishedForks:m.boolean(),editUrl:m.string(),newUrl:m.string(),closeUrl:m.optional(m.string())}),pn=m.object({descriptionDiff:m.optional(m.string()).default(""),codeDiff:m.optional(m.string()).default(""),setupCodeDiff:m.optional(m.string()).default(""),packageDiff:m.optional(m.string()).default(""),fixtureDiff:m.optional(m.string()).default(""),exampleFixtureDiff:m.optional(m.string()).default(""),isTranslation:m.boolean()});class Bt extends w{constructor(e,s){super(e,s);this.listItem=new Z(this.element,{_app:this._app}),this._controllers.push(this.listItem)}ready(){const e=ke();e.sel?a(`#${e.sel}`).trigger("click").length===0&&this.activateRoot():this.activateRoot()}activateRoot(){a("#snippet_list .title-container:first").trigger("click")}renderMainView(e){this.view?Object.assign(this.view,e):this.view=J("#main-view",O({highlight:Ni,renderMarkdown(s){return Ye(s,this.language)}},e))}async renderComments(e){e.votes=await Dt(e.userVotesUrl)||this._app.data.votes||{},this.comments?Object.assign(this.comments,O({},e)):this.comments=Ot(".comments-list-component",O({_app:this._app,currentUser:this._app.currentUser,appData:this._app.data,getRoute:this._app.route.bind(this._app),alerts:this._app.alerts},e))}}Bt.prototype.events={"#branches a.js-new-branch:not(.is-disabled) click"(t){g.visit(a("article a.js-new-branch").attr("href"))},"a.js-approve:not(.is-disabled) click"(t,e){e.preventDefault(),this._app.confirmModal.show({titleHtml:"Are you sure you want to approve this translation?",messageHtml:"This cannot be undone, you will be merging this version directly into the code challenge. Are you sure?",cancelHtml:"Nevermind",confirmHtml:"I'm sure",confirm:()=>{d.post(t.attr("href"),{event:"approve"}).then(s=>{const i=s.data;i.success?(this._app.alerts.success("Successfully enqueued a job to merge approved translation. This can take a few minutes to complete."),setTimeout(()=>g.visit(),500)):this._app.alerts.fail(i.message||i.reason)}).catch(s=>{Kt.call(this,s,"approve")})}})},"a.js-reject:not(.is-disabled) click"(t,e){e.preventDefault(),this._app.confirmModal.show({titleHtml:"Are you sure you want to reject this translation?",messageHtml:"This cannot be easily undone, you will be marking this translation as rejected and removing it from this list. Are you sure?",cancelHtml:"Nevermind",confirmHtml:"I'm sure",confirm:()=>{d.post(t.attr("href"),{event:"reject"}).then(s=>{const i=s.data;i.success?(this._app.alerts.success("Successfully rejected a translation."),setTimeout(()=>g.visit(),500)):this._app.alerts.fail(i.message||i.reason)}).catch(s=>{Kt.call(this,s,"reject")})}})},".tree-container .title-container:not(.is-active) click"(t){var s,i,n,r;const e=ke();if(e.sel=t.attr("id"),ue(`${location.pathname}?${qe(e)}`),a(".tree-container .title-container.is-active").removeClass("is-active"),t.addClass("is-active"),this.viewData=t.data("view-data"),this.viewData){const o=(s=this._app.data.isTranslation)!=null?s:!1;this.renderMainView(O(O(O({},hn.parse(te(O({},this.viewData),{isTranslation:o}))),dn.parse(O({canClose:!1,activeTab:"details",hasDiff:"codeDiff fixtureDiff descriptionDiff setupCodeDiff exampleFixtureDiff packageDiff".split(" ").some(c=>!!this.viewData[c]),authorView:this.viewData.user.username===this._app.currentUser.username,commentsCount:(r=(n=(i=this.viewData.discourse)==null?void 0:i.comments)==null?void 0:n.length)!=null?r:0,isPublished:this.viewData.publishedAt!=null},this.viewData))),pn.parse(O({isTranslation:o},this.viewData)))),this.renderComments(this.viewData.discourse),a(".js-new-branch").toggleClass("is-disabled",this.viewData.state==="draft")}},".accordion li click"(t){t.parent().find(".active .content").hide().parent("li").removeClass("active");const s=t.children(".content").first();s.show(0,()=>{s.parent("li").addClass("active")})}};function Kt(t,e){if(t.response){const s=t.response.data;t.response.status===401?this._app.alerts.fail(s.reason.replace(/^User .+:/,`Failed to ${e}:`)):this._app.alerts.fail(s.reason||s.message)}else t.request?this._app.alerts.fail("No response was received. Please try again."):this._app.alerts.fail(t.message||"Unknown Error")}class fn extends w{constructor(e,s){super(e,s);const i=new Z(this.element,{_app:this._app});this._controllers.push(i)}}class gn extends w{constructor(e,s){super(e,s);setTimeout(()=>{this.markdownEditor=new oe("#description",{_app:this._app,stashGroup:"collection"}),this._controllers.push(this.markdownEditor)},0)}}class Gt extends w{constructor(e,s){super(e,s);this.infiniteScroll=new ee("section.items-list",{_app:this._app}),this._controllers.push(this.infiniteScroll)}filterUrl(e){const s={q:e||a("#search-input").val(),created_by:a("#created_by").val(),order_by:a("#order_by").val()};return Object.keys(s).forEach(function(i){!s[i]&&i!=="q"&&delete s[i]}),this._app.route("search",null,s)}search(e){e==null&&(e=a("#search-input").val()),this.filter(e)}filter(e){a("#search").attr("disabled",""),g.clearCache(),g.visit(this.filterUrl(e))}}Gt.prototype.events={"#search click"(){this.search()},"#search-input keypress"(t,e){e.keyCode===13&&(e.preventDefault(),this.search())},"#filters change"(){this.filter()}};class Yt extends w{constructor(e,s){super(e,s);this.activateCurrentOrFirst(),this._app.data.isAuthor&&(a(".for-collection-creator").removeClass("is-hidden"),a("body").addClass("creator-view"))}totalItems(){return a("[data-items-count]").data("itemsCount")}moveBy(e,s){const i=e.closest(".list-item-kata").prop("id");d.post(this._app.route("move",{id:i}),{delta:s}).then(n=>{g.clearCache(),g.visit()})}activeLanguage(){const e=a("dd[data-language].is-active");if(e.length)return{id:e.data("language"),name:e.text()}}activeLanguageItems(){const e=this.activeLanguage();return e?a(`a[data-language='${e.id}']`).length:0}activateCurrentOrFirst(){let e=a(`dd[data-language='${this._app.currentUser.current_language}']`);e.length||(e=a("dd[data-language]")),e.trigger("click").trigger("click")}trainNow(e,s){d.post(this._app.route("train"),{all_kata:s,language:e}).then(i=>{const n=i.data;n.route&&g.visit(n.route)})}}Yt.prototype.events={".js-train click"(){const t=this.activeLanguage();this.totalItems()===1||this.activeLanguageItems()===this.totalItems()?this.trainNow(t.id,!1):this._app.confirmModal.show({titleHtml:"Which kata do you want to train on?",messageHtml:[`You prefer to train on ${t.name}.`,"Not all kata in this collection are available in that language.","Which kata should we add to your training queue?"].join(" "),confirmHtml:`${t.name} Kata Only`,cancelHtml:"All Kata",confirm:()=>this.trainNow(t.id,!0),cancel:()=>this.trainNow(t.id,!1)})},".js-remove click"(t){this._app.confirmModal.show({titleHtml:"Are you sure you want to remove?",messageHtml:"You can add it again later by finding it within the library.",confirmHtml:"Yes, remove",confirm:()=>{const e=t.closest(".list-item-kata");this._app.collectionModal.removeChallenge(this._app.data.collection,e.prop("id"),()=>{V(e.get(0))})}})},".js-move-up click"(t){this.moveBy(t,-1)},".js-move-down click"(t){this.moveBy(t,1)},".js-delete-collection click"(){d.delete(this._app.route("collection")).then(t=>{g.visit("/collections")})}};class Jt extends w{constructor(e,s){super(e,s);this.discourseScroll=new ee(".comments-list",{_app:this._app}),this._controllers.push(this.discourseScroll),this.nextChallenge=J("#trainer-next-challenge",{loading:!0,name:"",href:"",rankingHtml:"",description:"",systemTags:[],setValues(i){this.name=i.name,this.href=i.href,this.rankingHtml=i.rankingHtml,this.systemTags=i.systemTags,this.description=Ye(i.description,i.language)},clear(){this.name="",this.href="",this.rankingHtml="",this.description="",this.systemTags=[]}}),this.loadTrainerChallenge(),it("#job-ad",{jobPostings:2})}loadDiscourse(e){const s=this._app.route("discourse",{view_id:e});ue(s),this.discourseScroll.replaceLoad(s),a("#discourse_filters .is-active").removeClass("is-active"),a(`#discourse_filters [data-view-id='${e}']`).addClass("is-active")}trainerRouteParams(){return{language:a("#trainer_language dd.is-active").data("language")||this._app.currentUser.current_language,strategy:a("#trainer_strategy dd.is-active").data("strategy")}}train(e){if(this.trainerData){const s=this.trainerRouteParams();s.id=this.trainerData.id,s.id&&(g.clearCache(),g.visit(this._app.route("train",s)))}else e||this.loadTrainerChallenge(!0,!0)}loadTrainerChallenge(e,s){const i=this.trainerRouteParams(),n=this._app.route("peek",i);this.nextChallenge.loading=!0,d.get(n,{params:{dequeue:!!e}}).then(r=>{this.nextChallenge.loading=!1;const o=r.data;o.name?this.nextChallenge.setValues(o):this.nextChallenge.clear(),this.trainerData=o,s&&this.train(!1)})}}Jt.prototype.events={".personal-trainer .dropdown dd:not(.is-active) click"(t){this.loadTrainerChallenge()},"#personal-trainer-play click"(t){this.train()},"#personal-trainer-skip click"(t){this.loadTrainerChallenge(!0)},"#tell_me_more_referrals click"(t){a("#referral").hide(),a("#referrals").show()},"#discourse_filters a:not(.is-active) click"(t,e){this.loadDiscourse(t.data("view-id"))}};class Xt extends w{constructor(e,s){super(e,s);this.challenge=this._app.data.challenge,this.challenge&&(this.editor=new le("#code_editor",{_app:this._app,allowFullScreen:!1,lineNumbers:!1}),this.markdownDisplay=new me("#description",{_app:this._app}),this.runner=new Ft("#runner_frame",{_app:this._app}),this.runner.setTheme(!0),this._controllers.push(this.editor,this.markdownDisplay,this.runner),this.setCodeChallenge())}attempt(){const e={code:this.editor.getValue(),language:this._app.data.language,source:"landing",ciphered:["setup","fixture"],languageVersion:this.session.activeVersion,setup:this.session.package,fixture:this.session.fixture,testFramework:this.session.testFramework,relayId:this.session.solutionId};if(!e.code){this.editor.messages.fail(this.editor.emptyCodeMsg());return}this.runner.run(e),a(".output").show(),a("#attempt_btn").addClass("is-disabled"),a("#try_again_btn").addClass("is-disabled")}handleResponse(){a("#attempt_btn").removeClass("is-disabled"),a("#try_again_btn").removeClass("is-disabled"),this.runner.response&&this.runner.response.type==="execution success"&&this.runner.response.result&&this.runner.response.result.completed&&(a("#try_again_btn").hide(),a("#success_msg b").html(he(["Great Job!","Well Done!","Solid!","Impressive!"])),a("#success_msg").show(),d.post(this._app.route("notify",{solutionId:this.session.solutionId}),{token:this.runner.response.token,testFramework:this.runner.request.testFramework,code:this.runner.request.code,fixture:this.runner.request.fixture,languageVersion:this.runner.request.languageVersion}).then(e=>{setTimeout(()=>g.visit(),1e3)}))}setCodeChallenge(){this.markdownDisplay.setMarkdown(this.challenge.description),a("#other_languages, #code_editor").show(),d.post(this._app.route("session",{language:this._app.data.language})).then(e=>{this.session=e.data,a("#attempt_btn").removeClass("is-disabled")}),this.editor.setValue(this.challenge.setup),this.editor.setMode(this._app.data.language),this.editor.focus()}}Xt.prototype.events={"#attempt_btn:not(.is-disabled) click"(){this.attempt()},"#code_editor codeeditor.submit"(){this.session&&this.attempt()},"#sign_up_button click"(){a("#step_start").show(),a("#landing").addClass("sign-up")},"#step_signup form submit"(t){a("#enlist_btn").addClass("is-disabled")},"#step_start [data-language] click"(t,e){g.visit(`?language=${t.attr("data-language")}`)},"#try_again_btn click"(){V(a(".output").get(0))},"#runner_frame message.notifyResponse"(){this.handleResponse()}};const mn={frontend:["javascript","typescript","reason","purescript","elm","haxe","cfml"],backend:["ruby","javascript","typescript","go","java","csharp","sql","shell","scala","php","groovy","python","haskell","elixir"],mobile:["kotlin","java","swift","dart","javascript","typescript","csharp","haxe"],game:["cpp","lua","java","javascript","typescript","python","csharp","haxe"],devops:["shell","powershell","go","ruby","rust","perl","groovy","sql","python"],desktop:["c","cpp","csharp","java","python","javascript","typescript","go","haxe","haskell","rust"],data:["python","r","julia","javascript","java","sql","typescript"],security:["shell","powershell","java","haskell","ocaml"],web3:["solidity","rust","javascript","typescript"],academic:["agda","coq","lean","prolog","idris"],other:["clojure","racket","haskell","ocaml"]},_n=["reason","purescript","julia","elm","scala","haxe","haskell","elixir","forth","cfml"],bn=["America/Atka","America/Boise","America/Chicago","America/Denver","America/Detroit","America/Fort_Wayne","America/Indiana","America/Indianapolis","America/Juneau","America/Kentucky","America/Knox_IN","America/Los_Angeles","America/Louisville","America/Menominee","America/Metlakatla","America/New_York","America/Nome","America/North_Dakota","America/Phoenix","America/Shiprock","America/Sitka","America/Yakutat"];class Zt extends w{constructor(e,s){super(e,s);const i=wn();this.setup=J("#setup",{bootcamps:this._app.data.bootcamps,experience:this._app.currentUser.experience,name:this._app.currentUser.name||"",company:this._app.currentUser.company||"",bootcampInterest:this._app.currentUser.bootcamp_interest,bootcampInterestSchools:this._app.data.bootcamp_interest_schools||[],careerPaths:this._app.currentUser.career_paths||[],timezone:i.timeZone,locale:i.locale,get isUSTimezone(){return this.timezone?!!bn.some(n=>this.timezone.startsWith(n)):!1},get recommendedLanguages(){let n=[];return this.careerPaths.forEach(r=>{n=n.concat(mn[r])}),["learning","junior"].includes(this.experience)?n.filter(r=>!_n.includes(r)):n},get recommendedBootcamps(){return this.bootcamps.filter(n=>{if(this.bootcampInterestSchools.includes(n.name))return!0;if(this.careerPaths.length&&!this.careerPaths.some(o=>(n.paths||[]).includes(o)))return!1;const r=[this.experience,this.locale,this.timezone].join("|");return!(n.exclude&&n.exclude.some(o=>r.includes(o))||n.include&&!n.include.some(o=>r.includes(o)))})},selectAllSchools(){this.recommendedBootcamps.forEach(n=>{this.bootcampInterestSchools.includes(n)||this.bootcampInterestSchools.push(n.name)})},toggleSchool(n){this.bootcampInterestSchools.includes(n)?this.bootcampInterestSchools=this.bootcampInterestSchools.filter(r=>r!==n):this.bootcampInterestSchools=[...this.bootcampInterestSchools,n]},isTopReq(n){return this.recommendedBootcamps.length===1?!1:n===0||n===1&&this.recommendedBootcamps.length>3}})}save(){if(this.setup.experience){const e={timezone:this.setup.timezone,country_name:this.setup.isUSTimezone&&this.setup.regionName!=="Non US"?"United States":null,region_name:this.setup.regionName,weekly_newsletter:!!a("#user_weekly_newsletter_true:checked").val(),experience:this.setup.experience,career_paths:this.setup.careerPaths,bootcamp_interest:this.setup.bootcampInterest,bootcamp_interest_schools:this.setup.bootcampInterestSchools,name:this.setup.name||this._app.currentUser.name,company:this.setup.company,languages:a(".icon-list a.is-active").map((s,i)=>a(i).data("language")).toArray()};d.post(this._app.route("save"),e).then(s=>{s.data.success?(this._app.alerts.success('<i class="icon-moon-check"></i> Settings saved'),setTimeout(()=>g.visit(this._app.route("post_save")),500)):this._app.alerts.fail("Failed to save settings. Please try again")})}else a(".radio_buttons").addClass("has-error")}}Zt.prototype.events={".js-save click"(){this.save()},".icon-list a click"(t){t.toggleClass("is-active")}};function wn(){try{return Intl.DateTimeFormat().resolvedOptions()}catch{return{}}}class Qt extends w{constructor(e,s){super(e,s)}}Qt.prototype.events={"#delete_account click"(t,e){e.preventDefault(),this._app.confirmModal.show({titleHtml:"Are you sure?",messageHtml:"You are about to delete everything you have worked so hard for. If all you wish to do is stop receiving notification emails you can simply turn them off without deleting your account.",cancelHtml:"Nooo stop! I was just kidding!",confirmHtml:"Yep, I'm serious about doing this",confirm:()=>{d.delete("/user").then(s=>{s.data.success&&g.visit("/")})}})},"#forgot_password click"(t,e){e.preventDefault(),this._app.alerts.working("Requesting password instructions..."),d.post(t.attr("href")+".json").then(s=>{this._app.alerts.success("Password email instructions have been sent to your email. You must logout first before clicking the reset link within the email.",1e4)})},"#edit_user submit"(t,e){e.preventDefault(),a("#flash").remove();const{user:s}=st(a(t.get(0))),i=document.getElementById("remove_previous_clan_members").checked?{remove_previous_clan_members:"1"}:{};d.put("/users",{user:s},{params:i}).then(n=>{N(n.data)})},".js-resend-confirmation:not(.is-disabled) click"(t,e){e.preventDefault(),t.addClass("is-disabled");const s=a("meta[name=csrf-param]").attr("content"),i=a("meta[name=csrf-token]").attr("content"),n=a([`<form method="post" action="${t.data("href")}">`,'<input name="_method" value="POST" type="hidden" />',`<input name="${s}" value="${i}" type="hidden" />`,"</form>"].join(""));n.hide(),n.appendTo("body"),n.trigger("submit")}};const es=(t,e)=>{const s=document.createElement("script");s.onerror=i=>{throw new URIError(`${i.target.src} failed to load`)},s.onload=e,document.body.appendChild(s),s.src=t};class ts extends w{constructor(e,s){super(e,s);this.stripe=null,es("https://js.stripe.com/v3/",()=>{d.get("/subscription/key").then(i=>{this.stripe=window.Stripe(i.data.pubKey),a("#subscribe.is-disabled").removeClass("is-disabled").addClass("is-green")})})}}ts.prototype.events={".js-radio click"(t){a(".js-radio.checked").removeClass("checked").find("i").removeClass("icon-moon-radio-on").addClass("icon-moon-radio-off"),t.addClass("checked").find("i").addClass("icon-moon-radio-on").removeClass("icon-moon-radio-off")},"#subscribe:not(.is-disabled) click"(t){a("#subscribe").addClass("is-disabled");const e=a(".js-radio.checked").data(),s=a("#coupon").val();d.post("/subscription/session",{price_id:e.priceId,coupon_id:s}).then(i=>{this.stripe.redirectToCheckout({sessionId:i.data.sessionId}).then(n=>{n.error&&alert(n.error.message)}).catch(n=>{console.error(n)})}).catch(i=>{a("#subscribe").removeClass("is-disabled"),i.response?alert(i.response.data.reason):alert("Something went wrong, please try again.")})}};class ss extends w{constructor(e,s){super(e,s);this.stripe=null,es("https://js.stripe.com/v3/",()=>{d.get("/subscription/key").then(i=>{this.stripe=window.Stripe(i.data.pubKey),a("#update_payment_method.is-disabled").removeClass("is-disabled")})})}}ss.prototype.events={"#update_payment_method:not(.is-disabled) click"(t){a("#update_payment_method").addClass("is-disabled"),d.post("/subscription/edit/session").then(e=>{this.stripe.redirectToCheckout({sessionId:e.data.sessionId}).then(s=>{s.error&&alert(s.error.message)}).catch(s=>{console.error(s)})}).catch(e=>{a("#update_payment_method").removeClass("is-disabled"),e.response?alert(e.response.data.reason):alert("Something went wrong, please try again.")})},"#reactivate:not(.is-disabled) click"(t){t.addClass("is-disabled"),d.post("/subscription/edit/renewal").then(e=>{Turbolinks.visit()}).catch(e=>{t.removeClass("is-disabled"),e.response?alert(e.response.data.reason):alert("Something went wrong, please try again.")})},"#cancel:not(.is-disabled) click"(t){t.addClass("is-disabled"),d.delete("/subscription/edit/renewal").then(e=>{Turbolinks.visit()}).catch(e=>{t.removeClass("is-disabled"),e.response?alert(e.response.data.reason):alert("Something went wrong, please try again.")})}};class is extends w{constructor(e,s){super(e,s);if(this.infiniteScroll=new ee(".items-list",{_app:this._app}),this._controllers.push(this.infiniteScroll),this._app.data.next_rank_color){const i=a("#honor_chart");i.length&&!i.attr("data-donut-chart")&&(vn("#honor_chart",{value:Math.max(0,Math.min(99.9,this._app.data.rank_progress+1)),radius:200,thickness:50,bg:"var(--color-donut-chart-bg)",color:$i[this._app.data.next_rank_color]}),i.attr("data-donut-chart",!0))}if(this._app.data.stats_refreshing){const i=K.register("stats_refresh",this._app.data.profile.username,()=>{g.visit()},this._app.ablyConfig);typeof i=="function"&&this._unregisters.push(i),d.get(this._app.route("check_stats")).then(n=>{n.data.ready&&et(window.location.pathname)})}a("[data-meter]").each((i,n)=>{const r=a(n),o=a('<div class="bg-[#d68e80] dark:bg-[#bb432c] absolute top-0 left-0 h-full inline-block transition-width ease-in-out duration-1500" style="width: 0">');r.prepend(o),window.requestAnimationFrame(()=>{o.width(`${r.attr("data-meter")}%`)})})}}is.prototype.events={".js-reload-action:not(.js-working) click"(t){t.text("Working..."),t.addClass("js-working"),d.post(t.data("href")).then(e=>g.visit())},"#tell_me_more_referrals click"(t){a("#referral").hide(),a("#referrals").show()},"#toggle_relationship click"(t){d.post(this._app.route("toggle_relationship")).then(e=>{const s=e.data;s.success&&(s.following?(t.find("span").text("Unfollow"),t.addClass("is-red-text").removeClass("is-green-text")):(t.find("span").text("Follow"),t.addClass("is-green-text").removeClass("is-red-text")))})},".js-delete-collection click"(t){this._app.confirmModal.show({titleHtml:"Are you sure you want to delete this collection?",messageHtml:"You will not be able to undo this operation. Are you sure?",confirmHtml:"Yes, delete it",confirm:()=>{const e=this._app.route("collection",{id:t.data("collectionId")});d.delete(e).then(s=>{V(t.closest(".list-item-collection").get(0))})}})}};function vn(t,e){const s=document.querySelector(t),i=Object.assign({value:50,radius:50,thickness:10,bg:"rgba(255,255,255,0.125)",color:"#333",transition:"all 1s cubic-bezier(0.57, 0.13, 0.18, 0.98)"},e||{}),n=2*Math.PI*i.radius,r=n-n*(i.value/100),o=2*i.radius+i.thickness,c=document.createDocumentFragment(),h=_(o);h.appendChild(y()),h.appendChild(C()),c.appendChild(h),s.appendChild(c),s.innerHTML=s.innerHTML;const f=s.querySelector(".donut-fill");f.style.transition=i.transition,window.requestAnimationFrame(()=>{A(f,{"stroke-dasharray":n,"stroke-dashoffset":r}),f.style.opacity=1});function x(j,F={}){return A(document.createElementNS("http://www.w3.org/2000/svg",j),F)}function A(j,F={}){for(const ye of Object.keys(F))j.setAttribute(ye,F[ye]);return j}function _(j){return x("svg",{class:"donut",xmlns:"http://www.w3.org/2000/svg",viewbox:`0 0 ${j} ${j}`,transform:"rotate(270)",preserveAspectRatio:"xMidYMid meet"})}function y(){return x("circle",{class:"donut-bg",cx:"50%",cy:"50%",r:i.radius,fill:"transparent",stroke:i.bg,"stroke-width":i.thickness,"stroke-dasharray":n})}function C(){const j=x("circle",{class:"donut-fill",cx:"50%",cy:"50%",r:i.radius,fill:"transparent",stroke:i.color,"stroke-width":i.thickness,"stroke-dashoffset":n,"stroke-dasharray":n});return j.style.opacity=0,j}}class yn extends w{constructor(e,s){super(e,s);a(`[data-username='${this._app.currentUser.username}']`).addClass("is-current-player")}}class ns extends w{constructor(e,s){super(e,s);if(this._app.data.refreshing){const i=K.register("compare_refresh",this._app.currentUser.username,n=>{n.username===this._app.data.username&&et(window.location.pathname)},this._app.ablyConfig);typeof i=="function"&&this._unregisters.push(i),d.get(this._app.route("check")).then(n=>{n.data.ready&&et(window.location.pathname)})}}search(){const e=Object.assign({},ke(),{r:a("#rank").val(),l:a("#language").val(),q:a("#search-input").val(),page:null});for(const s of Object.keys(e))e[s]===null&&delete e[s];g.clearCache(),g.visit(`${window.location.pathname}?${qe(e)}`)}}ns.prototype.events={"#search click"(){this.search()},"#rank change"(){this.search()},"#language change"(){this.search()},"#search-input keypress"(t,e){e.keyCode===13&&(e.preventDefault(),this.search())}};class as extends w{constructor(e,s){super(e,s);const i=this._app.route.bind(this._app),n=this.hide.bind(this),[r,o]=$t("#collection-modal-view",{canAdd:this._app.currentUser.honor>=20,newCollectionName:"",current:{},collections:[],loading:!0,adding:!1,isInCollection(c){var f;const h=(f=this.current)==null?void 0:f.id;return c.code_challenges?c.code_challenges.find(x=>x.code_challenge_id===h)!=null:!1},addChallenge(c){var x;const h=(x=this.current)==null?void 0:x.id,f=i("collection_code_challenge",{collectionId:c.id,id:""});d.post(f,{id:h})},removeChallenge(c){var x;const h=(x=this.current)==null?void 0:x.id,f=i("collection_code_challenge",{collectionId:c.id,id:h});d.delete(f)},createCollection(){const c=this.newCollectionName,h=this.current.id;d.post(i("collections"),{name:c,code_challenge_id:h}).then(f=>{this.newCollectionName="",this.hide()})},hide:n});this.modal=r,this.unmount=o,this.store=at.get("personal_collections",{ablyConfig:this._app.ablyConfig,url:this._app.route("collections"),realtime:"collection"})}destroy(){this.unmount(),this.hide(),super.destroy()}disableBtns(){this.element.find("a").addClass("is-disabled")}show(e){this.modal.current=e,this.modal.loading=!0,this.modal.collections=[],requestAnimationFrame(()=>{this.element.show(),this.refreshCollections()})}refreshCollections(){this.store.getAll(e=>{this.modal.collections=e,this.modal.adding=!1,this.modal.loading=!1})}hide(){this.element.hide()}removeChallenge(e,s,i){const n=this._app.route("collection_code_challenge",{collectionId:e.id,id:s});d.delete(n).then(r=>{typeof i=="function"&&i()})}}as.prototype.events={"#app store.personal_collections.changed"(){this.modal.collections=[],window.requestAnimationFrame(()=>{this.refreshCollections()})},"body .js-add-to-collection click"(t){this.show(t.data("challenge"))}};const rs={};class at{static get(e,s){s.name=e;let i=rs[e];return i||(i=rs[e]=new at(s)),i}constructor(e={}){this.options=e,this.ablyConfig=e.ablyConfig}getAll(e){this.items?e(this.items):d.get(this.options.url).then(s=>{const i=s.data;this.response=i,this.items=i.items,e(this.items),this.options.realtime&&(K.register("private",`${this.options.realtime}_saved`,this.handleModelSaved.bind(this),this.ablyConfig),K.register("private",`${this.options.realtime}_destroyed`,this.handleModelDestroyed.bind(this),this.ablyConfig))})}handleModelSaved(e){if(this.items&&e.id){const s=this.items.find(i=>i.id===e.id);if(s){for(const i of Object.keys(s))e.hasOwnProperty(i)||delete s[i];Object.assign(s,e),this.storeChanged("updated",s)}else this.items.push(e),this.storeChanged("added",e)}}handleModelDestroyed(e){const s=this.items.findIndex(i=>i.id===e.id);if(s!==-1){const i=this.items[s];this.items.splice(s,1),this.storeChanged("destroyed",i)}}storeChanged(e,s){const i=this.options.name||this.options.realtime;a("#app").trigger(`store.${i}.changed`,{store:this,model:s})}}class os extends w{constructor(e,s){super(e,s)}}os.prototype.events={".comments .js-show-comments:not(.is-disabled) click"(t,e){const i=t.closest(".comments").find("ul.comments-list").first();t.addClass("is-disabled"),t.data("open")?V(i.get(0),{finish:()=>{t.removeClass("is-disabled"),z(),t.data("open",!1)}}):I(i.get(0),{finish:()=>{t.removeClass("is-disabled"),z(),t.data("open",!0)}})},".comments .new-comment .js-expand click"(t,e){e.preventDefault(),e.stopPropagation();const s=t.closest(".new-comment");s.data("editor").editor.enterFullScreen(),s.find("dl.tabs > dd:first a").trigger("click"),setTimeout(()=>t.parent().removeClass("is-active"),0)}};class rt extends w{constructor(e,s){super(e,s);const i=Object.assign({backdrop:!0,keyboard:!0,show:!0},this.element.data(),this.options);this.modal=new xn(this.element,i),this.element.data("modal",this.modal),i.show&&this.modal.show()}destroy(){this.hide(),super.destroy()}messageEl(){return this.element.find(".modal-body")}show(e={}){if(e=Object.assign({},this.options,e),!e.cancelHtml&&!e.confirm&&!e.altConfirm&&(e.cancelHtml="OK"),e.titleHtml&&this.element.find("h4").html(e.titleHtml),this.view=null,e.view){const i=a('<div class="view"></div>').appendTo(this.messageEl().html(""));this.view=e.view(i)}else e.messageHtml&&this.messageEl().html(e.messageHtml);e.cancelHtml&&this.element.find("li.cancel a").html(e.cancelHtml),e.confirm?e.confirmHtml&&this.element.find("li.confirm").show().find("a").html(e.confirmHtml):this.element.find("li.confirm").hide(),e.altConfirm&&e.altConfirmHtml?this.element.find("li.alt-confirm").show().find("a").addClass(e.altConfirmClass).html(e.altConfirmHtml):this.element.find("li.alt-confirm").hide().find("a").attr("class","button");const s=this.element.find(".modal-footer, .modal-header .close");e.hideActions?s.hide():s.show(),this.showOptions=e,this.modal.show()}hide(){this.modal.hide()}}rt.prototype.events={'*[data-dismiss="modal"] click'(t,e){this.showOptions!=null&&this.showOptions.cancel&&this.showOptions.cancel(e)},"li.alt-confirm a click"(t,e){this.modal.hide(),this.showOptions!=null&&this.showOptions.altConfirm&&this.showOptions.altConfirm(e)},'*[data-confirm="modal"] click, li.confirm a click'(t,e){this.modal.hide(),this.showOptions!=null&&this.showOptions.confirm&&this.showOptions.confirm(e)}};rt.defaults={backdrop:!0,show:!1,keyboard:!1,confirm:null,cancel:null,titleHtml:null,messageHtml:null,cancelHtml:"Cancel",confirmHtml:"Confirm"};class xn{constructor(e,s){this.options=s,this.$element=a(e).on("click.dismiss.modal",'[data-dismiss="modal"]',this.hide.bind(this))}toggle(){return this.isShown?this.hide():this.show()}show(){this.isShown||(a("body").addClass("modal-open"),this.isShown=!0,this.$element.trigger("show"),us.call(this),ls.call(this,()=>{const e=this.$element.hasClass("fade");this.$element.parent().length||this.$element.appendTo(document.body),this.$element.show(),e&&this.$element.get(0).offsetWidth,this.$element.addClass("in"),e?this.$element.one("transitionend",()=>{this.$element.trigger("shown")}):this.$element.trigger("shown")}))}hide(e){e&&e.preventDefault(),!!this.isShown&&(this.isShown=!1,a("body").removeClass("modal-open"),us.call(this),this.$element.trigger("hide").removeClass("in"),this.$element.hasClass("fade")?kn.call(this):ot.call(this))}}function kn(){const t=setTimeout(()=>{this.$element.off("transitionend"),ot.call(this)},500);this.$element.one("transitionend",()=>{clearTimeout(t),ot.call(this)})}function ot(){this.$element.hide().trigger("hidden"),ls.call(this)}function ls(t){if(this.isShown&&this.options.backdrop){const e=this.$element.hasClass("fade")?"fade":"";this.$backdrop=a(`<div class="modal-backdrop ${e}"></div>`).appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.on("click",this.hide.bind(this)),e&&this.$backdrop.get(0).offsetWidth,this.$backdrop.addClass("in"),e?this.$backdrop.one("transitionend",t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),this.$element.hasClass("fade")?this.$backdrop.one("transitionend",cs.bind(this)):cs.call(this)):t&&t()}function cs(){this.$backdrop.remove(),this.$backdrop=null}function us(){this.isShown&&this.options.keyboard?a(document).on("keyup.dismiss.modal",t=>t.which===27&&this.hide()):this.isShown||a(document).off("keyup.dismiss.modal")}class hs extends w{constructor(e,s){super(e,s)}toggle(e){const s=e&&!e.is(".is-focused");a(".dropdown.is-focused").removeClass("is-focused"),s&&e.addClass("is-focused")}}hs.prototype.events={".dropdown click"(t){this.toggle(t)},".dropdown dl dd .info mouseenter"(t){t.closest("dd").addClass("show-info")},".dropdown dl dd .info mouseleave"(t){t.closest("dd").removeClass("show-info")},click(t,e){a(e.target).closest(".dropdown").length===0&&this.toggle()},".dropdown dd:not(.is-disabled) click"(t){const e=t.closest(".dropdown");e.children("span").html(t.find("> span").html()||t.html()),e.find("dd.is-active").removeClass("is-active"),t.addClass("is-active"),t.data("load")!==void 0&&t.data("href")&&g.visit(t.data("href"))}};class ds extends w{constructor(e,s){super(e,s)}}ds.prototype.events={".form-field input focus"(t){t.closest(".form-field").addClass("active")},".form-field input blur"(t){t.closest(".form-field").removeClass("active")},".form-field .prefix i click"(t){const e=t.closest(".form-field").find("input").get(0);e!=null&&e.focus()}};class ps extends w{constructor(e,s){super(e,s);this.adjustMaxHeight()}adjustMaxHeight(){a(".menu-body").css("max-height",a(window).height()-a("#main_header").height())}}ps.prototype.events={"window resize"(){this.adjustMaxHeight()},"#main_header .has-menu click"(t){a(window).width()<768&&t.toggleClass("active")},"#header_profile_link click"(t){if(a(window).width()<768)return t.parent(".has-menu").toggleClass("active"),!1},"body .sidenav-nubbin click"(){a("#app").toggleClass("shift-right")},".js-sign-out click"(t){g.clearCache();const e=a('<form method="post" action="/users/sign_out"></form>'),s=a("meta[name=csrf-param]").attr("content"),i=a("meta[name=csrf-token]").attr("content"),n=['<input name="_method" value="DELETE" type="hidden" />',`<input name="${s}" value="${i}" type="hidden" />`].join("");e.hide().append(n).appendTo("body"),e.trigger("submit")}};class fs extends w{constructor(e,s){super(e,s);this._app.currentUser!=null&&this._app.currentUser.username&&!this._app.currentUser.guest&&(this.deferred=de(1e3,()=>{this.nextPopupNotification()}))}destroy(){super.destroy(),this.deferred&&(this.deferred.abort(),this.deferred=null)}maybeCheckNext(){a("#popup-notification-container").data("notification-sticky")||(this.deferred=de(500,()=>{this.nextPopupNotification()}))}nextPopupNotification(e){this.deferred=null,d.post(this._app.route("unread_popup_notifications"),{href:location.href,data:this._app.data,default_popup_id:e},{responseType:"text"}).then(s=>{const i=s.data;!i||typeof i!="string"||window.requestAnimationFrame(()=>{a("#popup-notification-container").remove();const n=a(i).appendTo("#app").hide();setTimeout(()=>I(n.get(0)),250)})})}markAllRead(){this.markReadWait=null,this.markedRead=!0;const e=a("#notification_count"),s={ids:e.data("unread-ids")};!s.ids||d.post(this._app.route("mark_notifications_read"),s).then(i=>{fe(e.get(0))})}}fs.prototype.events={"#notifications_drawer mouseenter"(){this.markedRead||(this.markReadWait!=null&&this.markReadWait.abort(),this.markReadWait=de(700,()=>this.markAllRead()))},"#notifications_drawer mouseleave"(){this.markReadWait!=null&&this.markReadWait.abort()},"#popup-notification-container .popup-toast a.close click"(){this.maybeCheckNext(),Ai("#popup-notification-container","fadeOutDown",t=>{t.parentNode.removeChild(t)})},"#popup-notification-container .js-show-dialog click"(){a("#popup-notification-container").removeClass("toast").addClass("dialog")},"#popup-notification-container .popup-dialog .js-close click"(){this.maybeCheckNext();const t=a("#popup-notification-container");fe(t.get(0),{finish:()=>{t.remove()}})},"#popup-notification-container .js-tweet click"(t){Rt(t.data("tweet"))}};class gs extends w{constructor(e,s){super(e,s);this.syncStarred()}refreshList(){const e=this.element.find(".stars-item .menu-body");e.length!==0&&d.get(this._app.route("user_stars"),{responseType:"text"}).then(s=>{e.html(s.data)})}toggleCodeChallengeStar(e){const s=e.parent(),i=s.data("id");d.post(this._app.route("star_code_challenge",{id:i})).then(n=>{n.data.success&&(this.updateCodeChallengeStar(s,e.hasClass("js-add-code-challenge-star")),this.refreshList())})}updateCodeChallengeStar(e,s){s?(e.find(".js-add-code-challenge-star").hide(),e.find(".js-remove-code-challenge-star").show()):(e.find(".js-add-code-challenge-star").show(),e.find(".js-remove-code-challenge-star").hide())}syncStarred(){this._app.currentUser&&this._app.currentUser.starred_code_challenge_ids&&this._app.currentUser.starred_code_challenge_ids.forEach(e=>{this.updateCodeChallengeStar(a(`[data-id='${e}']`),!0)})}}gs.prototype.events={".js-add-code-challenge-star click"(t){this.toggleCodeChallengeStar(t)},".js-remove-code-challenge-star click"(t){this.toggleCodeChallengeStar(t)},infinitescrollcontent(){this.syncStarred()}};class ms extends w{constructor(e,s){super(e,s)}_resetTabs(e){const s=e.closest("dl.tabs");let i=s.closest(".tabs:not(dl)");i.length===0&&(i=s.parent()),s.is(".is-vertical")&&(i=i.parent());const n=i.find("ul.tabs-content").first();s.find("dd.is-active").removeClass("is-active"),n.find("> li.is-active").removeClass("is-active");const r=e.closest("dd");return setTimeout(()=>r.addClass("is-active"),0),{$tab:r,$content:n}}}ms.prototype.events={".tabs dd:not(.is-active) a[data-tab]:not(.is-disabled) click"(t,e){const s=this._resetTabs(t);e.preventDefault(),s.$content.find(`[data-tab='${t.data("tab")}']`).first().addClass("is-active"),t.closest(".tabs").data("updateLayout")!=="off"&&z()}};const _s="dark-mode",bs="theme-transition";class ws extends w{constructor(e,s){super(e,s);this.isDark=!1,this.initDarkMode()}initDarkMode(){if(document.getElementById("landing"))return;const e=localStorage.getItem(_s);if(e!==null)return this.toggleDarkMode(e==="true");this.toggleDarkMode(!0)}toggleDarkMode(e){this.isDark=!!e,document.documentElement.classList.toggle("dark",this.isDark),localStorage.setItem(_s,this.isDark+""),this._app.darkMode=this.isDark,a("#app").trigger("dark-mode-toggled",[this.isDark])}}ws.prototype.events={".js-toggle-dark-mode click"(t){document.documentElement.classList.add(bs);const e=document.documentElement.classList.contains("dark");this.toggleDarkMode(!e),g.clearCache(),setTimeout(()=>{document.documentElement.classList.remove(bs)},1e3)}};class De{static setup(e){return this.instance!==null?this.instance.update(e):this.instance=new De(e),this.instance}constructor(e){this.localStorage=Ue("app"),this.darkMode=!1,this.assignConfig(e),this.initSentry(),En(),this.configureControls(),this.configureAxios(),this.setPageController(e.pageControllerName),this.configureSentry(),this.afterLoad()}update(e){this.assignConfig(e),this.destroyControls(),this.configureControls(),this.setPageController(e.pageControllerName),this.configureSentry(),this.afterLoad()}assignConfig(e){this.currentUser=e.currentUser,this.routes=e.routes,this.data=e.data,this.ablyConfig={key:e.ablyKey,clientId:e.currentUser&&e.currentUser.id,privateChannelName:e.privateChannelName},this.env=e.env,this.release=window.SENTRY_RELEASE}destroyControls(){for(const e of Tn)this[e]&&!this[e].destroyed&&(this[e].destroy(),this[e]=null);Pi()}configureControls(){this.header=new ps("#main_header"),this.confirmModal=new rt("#confirm_modal"),this.collectionModal=new as("#collection_modal",{_app:this}),this.alerts=new ge("#global_alerts",{useSlide:!0});const e=a("#app");this.tabs=new ms(e),this.dropdowns=new hs(e),this.comments=new os(e,{_app:this}),this.forms=new ds(e),this.notifications=new fs(e,{_app:this}),this.stars=new gs(e,{_app:this}),this.theme=new ws(e,{_app:this}),q(),Ae(this),z(),setTimeout(()=>{_e()},1e3)}setPageController(e){this.controller&&!this.controller.destroyed&&(this.controller.destroy(),this.controller=null);const s=An(e);!s||(this.controller=new s("#app",{_app:this}))}configureAxios(){d.defaults.headers.common["x-requested-with"]="XMLHttpRequest",d.interceptors.request.use(e=>(e.headers["x-csrf-token"]=Cn(),this.currentUser.jwt&&(e.headers.authorization=this.currentUser.jwt),Sn({type:e.method,url:e.url,data:e.data}),e),e=>Promise.reject(e)),d.interceptors.response.use(e=>(vs(e.headers["x-csrf-token"]),e),e=>(e.response&&vs(e.response.headers["x-csrf-token"]),Promise.reject(e)))}initSentry(){Qs({dsn:"https://dc778a04207f4100809dddc5f47d43fb@sentry.io/116947",environment:this.env,release:this.release,enabled:["production","staging"].includes(this.env),ignoreErrors:[/NS_ERROR_NOT_INITIALIZED/,"top.GLOBALS","Can't execute code from a freed script","\u041D\u0435 \u0443\u0434\u0430\u0435\u0442\u0441\u044F \u0432\u044B\u043F\u043E\u043B\u043D\u0438\u0442\u044C \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0443 \u0438\u0437 \u043E\u0441\u0432\u043E\u0431\u043E\u0436\u0434\u0435\u043D\u043D\u043E\u0433\u043E \u0441\u0446\u0435\u043D\u0430\u0440\u0438\u044F","No se puede ejecutar c\xF3digo de un script liberado"],blacklistUrls:[/graph\.facebook\.com/i,/connect\.facebook\.net\/en_US\/all\.js/i,/extensions\//i,/^chrome:\/\//i,/js\.intercomcdn\.com/i,/ravenjs/i]})}configureSentry(){ei(e=>{this.currentUser&&e.setUser({email:this.currentUser.email,username:this.currentUser.username,pro:this.currentUser.subscriber,current_language:this.currentUser.current_language}),e.setExtras({data:this.data,routes:this.routes})}),dt({message:`${document.title}`,category:"Page Loaded",data:this.data})}afterLoad(){this.controller&&typeof this.controller.ready=="function"&&this.controller.ready(),z(),this.currentUser.hideAds&&a("#_carbonad").hide(),g.scrollTop>0&&(document.scrollingElement.scrollTo(0,g.scrollTop),g.scrollTop=0),K.connect(this.ablyConfig)}route(e,s,i){let n=this.routes[e]||e;if(n.startsWith("/")&&(n=`${window.location.protocol}//${window.location.host}${n}`),i&&(n+=n.includes("?")?"&":"?",n+=decodeURIComponent(qe(i))),!n)return"";if(s)for(const r of Object.keys(s))n=n.replace(new RegExp(`%7B${r}%7D`,"g"),s[r]);return n}}De.instance=null;const Cn=()=>a("meta[name='csrf-token']").attr("content"),vs=t=>{t&&a("meta[name=csrf-token]").attr("content",t)},Sn=t=>{dt({message:"Ajax Send",category:"xhr",data:{type:t.type,url:t.url,data:t.data}})},Tn=Object.freeze(["confirmModal","header","collectionModal","alerts","tabs","dropdowns","comments","forms","notifications","stars","theme"]),En=()=>{g.scrollTop=0,document.addEventListener("turbolinks:click",e=>{if(e.target.matches('[data-turbolinks-scroll="false"]')){const s=document.scrollingElement.scrollTop;s>0&&(g.clearCache(),g.scrollTop=s)}},!1);const t=()=>{a("html").toggleClass("scrolling",a(window).scrollTop()>5)};a(window).on("scroll",pi(t)),t(),document.addEventListener("turbolinks:before-cache",()=>{a("#carbonads").remove()}),a(document).on("click",".alert-box a.close",e=>{e.preventDefault();const s=a(e.target).closest(".alert-box");fe(s.get(0),{finish:()=>{s.remove()}})})},An=t=>{switch(t){case"Articles.BlogController":return Bi;case"Articles.DocsController":return Ki;case"Articles.ForumController":return Gi;case"CodeChallenges.CodeSnippetsController":return Xi;case"CodeChallenges.DiscussController":return Mt;case"CodeChallenges.EditorController":return Nt;case"CodeChallenges.ListController":return Ht;case"CodeChallenges.PlayController":return qt;case"CodeChallenges.ShowController":return cn;case"CodeChallenges.SolutionsController":return zt;case"CodeChallenges.TranslationsController":return un;case"CodeChallengeSolutionGroups.ShowController":return It;case"CodeSnippets.EditController":return nt;case"CodeSnippets.IndexController":return Wt;case"CodeSnippets.ShowController":return Bt;case"CodeSnippets.TranslationsController":return fn;case"Collections.EditController":return gn;case"Collections.IndexController":return Gt;case"Collections.ShowController":return Yt;case"Dashboard.IndexController":return Jt;case"Landing.IndexController":return Xt;case"PersonalTrainer.SetupController":return Zt;case"Subscription.IndexController":return ts;case"Subscription.EditController":return ss;case"UsersComparisons.ShowController":return ns;case"Users.ShowController":return is;case"Users.RankingsController":return yn;case"Registrations.EditController":return Qt;default:return null}},U=t=>{t.setAttribute("disabled",""),t.classList.add("cursor-not-allowed")};class jn extends ne{async linkGitHub(e){const s=e.currentTarget.dataset.currentPath||"";lt(e,`/users/auth/github?intent=link&back=${s}`)}async unlinkGitHub(e){lt(e,"/users/unauth/github")}async githubSignIn(e){lt(e,"/users/auth/github")}}const lt=(t,e)=>{const s=t.currentTarget;U(s),t.stopPropagation(),g.clearCache();const i=s.dataset.token,n=a([`<form method="post" action="${e}">`,'<input name="_method" value="POST" type="hidden" />',`<input name="authenticity_token" value="${i}" type="hidden" />`,"</form>"].join(""));n.hide().appendTo("body"),n.trigger("submit")};var $n=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:jn});class ys extends ne{async checkVotes(e){U(e.currentTarget),e.stopPropagation();try{if((await d.post(`/api/v1/code-challenges/${this.idValue}/check-beta-votes`)).data.success){await M({icon:"info",text:"Successfully enqueued a job. Try refreshing the page in a bit."});return}}catch(s){console.error(s.message)}await M({icon:"error",text:"Something went wrong. Check the console for any error messages, and let the admin know if the problem persists."})}async unpublishBeta(e){U(e.currentTarget),e.stopPropagation();try{if((await d.post(`/api/v1/code-challenges/${this.idValue}/unpublish-beta`)).data.success){await M({icon:"info",text:"Successfully unpublished"}),g.visit();return}}catch(s){console.error(s.message)}await M({icon:"error",text:"Something went wrong. Check the console for any error messages, and let the admin know if the problem persists."})}}B(ys,"values",{id:String});var On=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ys});class xs extends ne{initialize(){this.solution=null}disconnect(){this.solution=null}async invalidate(e){U(e.currentTarget),e.stopPropagation(),await d.post(`/api/v1/code-challenges/projects/${this.idValue}/invalidate`),g.visit()}async revalidate(e){U(e.currentTarget),e.stopPropagation(),await d.post(`/api/v1/code-challenges/projects/${this.idValue}/revalidate`),g.visit()}async removeBetaVote(e){U(e.currentTarget),e.stopPropagation(),await d.delete(`/api/v1/code-challenges/projects/${this.idValue}/beta-vote`),g.visit()}async removeRankAssessment(e){U(e.currentTarget),e.stopPropagation(),await d.delete(`/api/v1/code-challenges/projects/${this.idValue}/rank-assessment`),g.visit()}toggleSolution(e){e.stopPropagation();const n=e.currentTarget.closest("tr").nextSibling;if(this.solution&&(Dn(this.solution),this.solution===n)){this.solution=null;return}this.solution=n,In(this.solution)}}B(xs,"values",{id:String});const Dn=t=>t.classList.add("hidden"),In=t=>t.classList.remove("hidden");var Fn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:xs});class ks extends ne{async group(e){U(e.currentTarget),e.stopPropagation();const s=e.currentTarget.dataset.solutionId;try{const i=await d.post(`/api/v1/code-challenges/projects/${this.projectIdValue}/solutions/${s}/group`);await M({icon:"info",text:i.data.message})}catch(i){let n="Failed!";i.response&&(n=i.response.data.reason),await M({icon:"error",text:n})}g.visit()}}B(ks,"values",{projectId:String});var Rn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ks});class Cs extends ne{async verify(e){await this.doAction(e,"verify",async()=>{await Ts("Try refreshing the page in a bit.")})}async invalidate(e){await this.doAction(e,"invalidate")}async flag(e){await this.doAction(e,"cheat_detected")}async unflag(e){await this.doAction(e,"cheat_corrected")}async hide(e){await this.doAction(e,"hide")}async unhide(e){await this.doAction(e,"unhide")}async delete(e){if(U(e.target),e.stopPropagation(),await M({title:"Deleting Solution Group",text:"Deletion is permanent. Are you sure to delete this group?",icon:"warning",buttons:{cancel:"No",confirm:"Yes"}})==="confirm"){try{if((await d.delete(this.solutionGroupUrl)).data.success){Ss(),g.visit(this.reviewUrl);return}}catch(i){console.error(i.message)}await Es()}}async doAction(e,s,i=Ln){U(e.currentTarget),e.stopPropagation();try{if((await d.post(`${this.solutionGroupUrl}/${s}`)).data.success)return await i()}catch(n){console.error(n.message)}await Es()}get reviewUrl(){return`/kata/reviews/${this.reviewIdValue}`}get solutionGroupUrl(){return`${this.reviewUrl}/groups/${this.groupIdValue}`}}B(Cs,"values",{reviewId:String,groupId:String});const Ln=async()=>{await Ts(),Ss(),g.visit()},Ss=()=>{const t=document.scrollingElement.scrollTop;t>0&&(g.clearCache(),g.scrollTop=t)},Ts=async(t="")=>{await M({icon:"info",text:t||"Action Successful"})},Es=async(t="")=>{await M({icon:"error",text:t||"Something went wrong. Check the console for any error messages, and let the admin know if the problem persists."})};var Mn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Cs});const As="Show Variations",js="Hide Variations";class ct extends ne{initialize(){this.fetched=!1}toggle(e){e.stopPropagation();const s=e.currentTarget,i=this.containerTarget;if(s.textContent===As)if(this.fetched)I(i),s.textContent=js;else{const n=document.createElement("p");n.textContent="Fetching variations...",i.appendChild(n),I(i);const r=this.reviewIdValue,o=this.groupIdValue;d.get(`/kata/reviews/${r}/groups/${o}/variations`).then(c=>{const h=c.data;if(h.variations.length>0){const f=h.language;for(const x of h.variations){const A=document.createElement("pre");A.setAttribute("lang",f),A.classList.add("p-2"),A.innerHTML=ht.sanitize(`<code>${je(x,f)}</code>`),i.appendChild(A)}}this.fetched=!0,i.removeChild(n),s.textContent=js})}else V(i),s.textContent=As}}B(ct,"targets",["container"]),B(ct,"values",{reviewId:String,groupId:String});var Vn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ct});const Nn=ti.start(),Un={"./auth_controller.js":$n,"./code_challenge_controller.js":On,"./project_controller.js":Fn,"./project_solution_controller.js":Rn,"./solution_group_controller.js":Mn,"./solution_variations_controller.js":Vn};si(Nn,Un);const Pn=t=>({production:"packs",development:"vite-dev",test:"vite-test"})[t];ii(`/${Pn("production")}`);window.App=De;g.start();
//# sourceMappingURL=application.8162d3e4.js.map
